(self.webpackChunklocallyflow=self.webpackChunklocallyflow||[]).push([[115],{2115:(y,E,r)=>{"use strict";r.r(E),r.d(E,{FlowsModule:()=>Fu});var o={};r.r(o),r.d(o,{forceCenter:()=>ra,forceCollide:()=>Fr,forceLink:()=>Br,forceManyBody:()=>$r,forceRadial:()=>Oa,forceSimulation:()=>jr,forceX:()=>ka,forceY:()=>La});var m={};r.r(m),r.d(m,{dispatch:()=>ln});var p={};r.r(p),r.d(p,{interval:()=>Fa,now:()=>we,timeout:()=>pn,timer:()=>Re,timerFlush:()=>Zn});var g=r(6367),f=r(177),e=r(3953);let u=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-list-header"]],standalone:!0,features:[e.aNF],decls:12,vars:1,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],["href","",1,"hover:text-primary"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-gray-100","hover:text-white",3,"routerLink"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Listado de flujos"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Flujos"),e.k0s(),e.j41(7,"span"),e.EFF(8," - Listado"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.EFF(11," Crear nuevo Flujo "),e.k0s()()()),2&s&&(e.R7$(10),e.Y8G("routerLink","../item"))},dependencies:[f.MD,g.iI,g.Wk],encapsulation:2})}return t})(),a=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-flow-item"]],standalone:!0,features:[e.aNF],decls:17,vars:0,consts:[[1,"flex","w-full","shadow-md","rounded-lg","gap-2","p-3","flex-col","md:w-72","cursor-pointer","bg-background","hover:bg-card"],[1,"text-xs","text-muted-foreground"],[1,"border-dashed","border-border"],[1,"flex","flex-row","items-center","justify-between"],[1,"text-lg","text-foreground"],[1,"flex","gap-2","justify-center","items-center","md:justify-start","md:items-start"],[1,"focus-visible:ring-ring","inline-flex","h-8","items-center","justify-start","whitespace-nowrap","rounded-md","border","border-primary","bg-background","px-3","text-xs","font-medium","text-primary","shadow-sm","transition-colors","focus-visible:outline-none","focus-visible:ring-1","disabled:pointer-events-none","disabled:opacity-50"],[1,"focus-visible:ring-ring","inline-flex","h-8","items-center","justify-start","whitespace-nowrap","rounded-md","border","border-border","bg-background","px-3","text-xs","font-medium","text-muted-foreground","shadow-sm","transition-colors","focus-visible:outline-none","focus-visible:ring-1","disabled:pointer-events-none","disabled:opacity-50"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"span",1),e.EFF(2,"#1"),e.k0s(),e.nrm(3,"hr",2),e.j41(4,"div",3)(5,"span",4),e.EFF(6,"Flujo de Compra"),e.k0s()(),e.j41(7,"span",1),e.EFF(8,"Flujo de prueba demostrando un proceso de compra, es el por defecto corriendo en el chatbot"),e.k0s(),e.nrm(9,"hr",2),e.j41(10,"div",5)(11,"div",6),e.EFF(12," Whatsapp "),e.k0s(),e.j41(13,"div",7),e.EFF(14," Instagram "),e.k0s(),e.j41(15,"div",7),e.EFF(16," Facebook "),e.k0s()()())},dependencies:[f.MD],encapsulation:2})}return t})(),c=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-list-flow"]],standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[[1,"mb-4","flex","flex-row","justify-evenly","gap-2","flex-wrap","w-full"],[3,"routerLink"]],template:function(s,v){1&s&&(e.j41(0,"div",0),e.nrm(1,"app-flow-item",1),e.k0s()),2&s&&(e.R7$(),e.Y8G("routerLink","../item"))},dependencies:[f.MD,a,g.iI,g.Wk],encapsulation:2})}return t})();var l=r(4600),h=r(6134);let d=(()=>{class t{constructor(){this.forms=[]}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-modal-beta"]],inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[[1,"flex","flex-col","items-center","justify-start","w-full"],[1,"flex","justify-center","items-center","w-full"],["src","assets/icons/heroicons/outline/information-circle.svg",3,"svgClass"],[1,"text-foreground"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"svg-icon",2),e.k0s(),e.j41(3,"span",3),e.EFF(4,"MVP, por lo que actualmente se tiene solo un flujo funcionando"),e.k0s()()),2&s&&(e.R7$(2),e.Y8G("svgClass","h-20 w-20 text-red-600"))},dependencies:[f.MD,h.DM],encapsulation:2})}return t})();function x(t,i){}let w=(()=>{class t{constructor(){this.onShowItem=!1,this.modalService=(0,e.WQX)(l.B)}ngOnInit(){this.modalService.open(d,{title:"Alerta",size:"sm",forms:null,data:null,icon:"assets/icons/heroicons/outline/information-circle.svg",actions:[]})}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-list"]],standalone:!0,features:[e.aNF],decls:5,vars:2,consts:[[3,"classList"],["dcWrapper",""]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",0),e.nrm(2,"app-list-header")(3,"app-list-flow"),e.k0s(),e.DNE(4,x,0,0,"ng-template",1),e.k0s()),2&s&&(e.Y8G("classList",v.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",v.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"))},dependencies:[f.MD,u,c],encapsulation:2})}return t})(),C=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-item-header"]],standalone:!0,features:[e.aNF],decls:14,vars:1,consts:[[1,"mb-4","flex","justify-between"],[1,"inline-block"],[1,"font-semibold","text-foreground"],[1,"space-x-1","text-xs","font-medium","text-muted-foreground"],[1,"hover:text-primary",3,"routerLink"],[1,"inline-block","space-x-4"],[1,"flex-none","rounded-md","bg-red-600","px-4","py-2.5","text-xs","font-medium","text-gray-100","hover:text-white"],[1,"flex-none","rounded-md","bg-primary","px-4","py-2.5","text-xs","font-medium","text-gray-100","hover:text-white"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"h3",2),e.EFF(3,"Detalles de Flujo"),e.k0s(),e.j41(4,"div",3)(5,"a",4),e.EFF(6,"Flow"),e.k0s(),e.j41(7,"span"),e.EFF(8," - item"),e.k0s()()(),e.j41(9,"div",5)(10,"button",6),e.EFF(11," Eliminar "),e.k0s(),e.j41(12,"button",7),e.EFF(13," Guardar Cambios "),e.k0s()()()),2&s&&(e.R7$(5),e.Y8G("routerLink","../list"))},dependencies:[f.MD,g.Wk],encapsulation:2})}return t})(),M=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-flow-detail"]],standalone:!0,features:[e.aNF],decls:43,vars:6,consts:[[1,"flex","flex-col","w-full"],[1,"flex","py-2","flex-col","w-full"],[1,"text-xl","text-foreground","text-bold"],[1,"px-2","flex-col","flex","w-full","gap-2"],[1,"text-xs","text-muted-foreground"],["type","text",1,"w-full"],[1,"w-full",3,"resize"],[1,"border-dashed","border-border"],[1,"flex","py-2","flex-col","w-full","gap-4"],[1,"flex","flex-wrap","gap-2"],[1,"focus-visible:ring-ring","inline-flex","h-8","items-center","justify-start","whitespace-nowrap","rounded-md","border","border-primary","bg-background","px-3","text-xs","font-medium","text-primary","shadow-sm","transition-colors","focus-visible:outline-none","focus-visible:ring-1","disabled:pointer-events-none","disabled:opacity-50"],[1,"capitalize"],[1,"focus-visible:ring-ring","inline-flex","h-8","items-center","justify-start","whitespace-nowrap","rounded-md","border","border-muted","bg-background","px-3","text-xs","font-medium","text-muted","shadow-sm","transition-colors","focus-visible:outline-none","focus-visible:ring-1","disabled:pointer-events-none","disabled:opacity-50"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"span",2),e.EFF(3,"Detalles"),e.k0s(),e.j41(4,"div",3)(5,"span",4),e.EFF(6,"Nombre"),e.k0s(),e.nrm(7,"input",5),e.j41(8,"span",4),e.EFF(9,"Descripcion"),e.k0s(),e.j41(10,"textarea",6),e.bIt("resize",function(){return!1}),e.k0s(),e.j41(11,"span",4),e.EFF(12,"Palabra de soporte"),e.k0s(),e.nrm(13,"input",5),e.k0s()(),e.nrm(14,"hr",7),e.j41(15,"div",8)(16,"span",2),e.EFF(17,"Aplicaciones"),e.k0s(),e.j41(18,"div",9)(19,"div",10)(20,"p",11),e.EFF(21),e.k0s()(),e.j41(22,"div",12)(23,"p",11),e.EFF(24),e.k0s()(),e.j41(25,"div",12)(26,"p",11),e.EFF(27),e.k0s()(),e.j41(28,"div",12)(29,"p",11),e.EFF(30),e.k0s()()()(),e.nrm(31,"hr",7),e.j41(32,"div",8)(33,"span",2),e.EFF(34,"Eventos"),e.k0s(),e.j41(35,"div",9)(36,"div",10)(37,"p",11),e.EFF(38),e.k0s()(),e.j41(39,"div",10)(40,"p",11),e.EFF(41),e.k0s()()()(),e.nrm(42,"hr",7),e.k0s()),2&s&&(e.R7$(21),e.JRh("Whatsapp"),e.R7$(3),e.JRh("Instagram"),e.R7$(3),e.JRh("Facebook"),e.R7$(3),e.JRh("Custom"),e.R7$(8),e.JRh("Soporte"),e.R7$(3),e.JRh("Venta"))},dependencies:[f.MD],encapsulation:2})}return t})();var A=r(1635),N=r(9969);function S(){}function P(t){return null==t?S:function(){return this.querySelector(t)}}function j(){return[]}function X(t){return null==t?j:function(){return this.querySelectorAll(t)}}function I(t){return function(){return this.matches(t)}}function F(t){return function(i){return i.matches(t)}}var D=Array.prototype.find;function J(){return this.firstElementChild}var R=Array.prototype.filter;function K(){return Array.from(this.children)}function ot(t){return new Array(t.length)}function pt(t,i){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=i}function Z(t,i,n,s,v,b){for(var T,_=0,O=i.length,G=b.length;_<G;++_)(T=i[_])?(T.__data__=b[_],s[_]=T):n[_]=new pt(t,b[_]);for(;_<O;++_)(T=i[_])&&(v[_]=T)}function nt(t,i,n,s,v,b,_){var T,O,rt,G=new Map,z=i.length,U=b.length,H=new Array(z);for(T=0;T<z;++T)(O=i[T])&&(H[T]=rt=_.call(O,O.__data__,T,i)+"",G.has(rt)?v[T]=O:G.set(rt,O));for(T=0;T<U;++T)rt=_.call(t,b[T],T,b)+"",(O=G.get(rt))?(s[T]=O,O.__data__=b[T],G.delete(rt)):n[T]=new pt(t,b[T]);for(T=0;T<z;++T)(O=i[T])&&G.get(H[T])===O&&(v[T]=O)}function at(t){return t.__data__}function ct(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function vt(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}pt.prototype={constructor:pt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Lt="http://www.w3.org/1999/xhtml";const Mt={svg:"http://www.w3.org/2000/svg",xhtml:Lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zt(t){var i=t+="",n=i.indexOf(":");return n>=0&&"xmlns"!==(i=t.slice(0,n))&&(t=t.slice(n+1)),Mt.hasOwnProperty(i)?{space:Mt[i],local:t}:t}function ae(t){return function(){this.removeAttribute(t)}}function on(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ne(t,i){return function(){this.setAttribute(t,i)}}function Qt(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function Oe(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function ke(t,i){return function(){var n=i.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function ge(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rt(t){return function(){this.style.removeProperty(t)}}function Vt(t,i,n){return function(){this.style.setProperty(t,i,n)}}function Jr(t,i,n){return function(){var s=i.apply(this,arguments);null==s?this.style.removeProperty(t):this.style.setProperty(t,s,n)}}function ue(t,i){return t.style.getPropertyValue(i)||ge(t).getComputedStyle(t,null).getPropertyValue(i)}function ti(t){return function(){delete this[t]}}function ei(t,i){return function(){this[t]=i}}function ni(t,i){return function(){var n=i.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function On(t){return t.trim().split(/^|\s+/)}function un(t){return t.classList||new kn(t)}function kn(t){this._node=t,this._names=On(t.getAttribute("class")||"")}function Ln(t,i){for(var n=un(t),s=-1,v=i.length;++s<v;)n.add(i[s])}function In(t,i){for(var n=un(t),s=-1,v=i.length;++s<v;)n.remove(i[s])}function ii(t){return function(){Ln(this,t)}}function si(t){return function(){In(this,t)}}function oi(t,i){return function(){(i.apply(this,arguments)?Ln:In)(this,t)}}function ui(){this.textContent=""}function hi(t){return function(){this.textContent=t}}function fi(t){return function(){var i=t.apply(this,arguments);this.textContent=i??""}}function li(){this.innerHTML=""}function di(t){return function(){this.innerHTML=t}}function pi(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i??""}}function vi(){this.nextSibling&&this.parentNode.appendChild(this)}function yi(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bi(t){return function(){var i=this.ownerDocument,n=this.namespaceURI;return n===Lt&&i.documentElement.namespaceURI===Lt?i.createElement(t):i.createElementNS(n,t)}}function wi(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fn(t){var i=zt(t);return(i.local?wi:bi)(i)}function _i(){return null}function Ti(){var t=this.parentNode;t&&t.removeChild(this)}function Ai(){var t=this.cloneNode(!1),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Si(){var t=this.cloneNode(!0),i=this.parentNode;return i?i.insertBefore(t,this.nextSibling):t}function Ii(t){return function(){var i=this.__on;if(i){for(var b,n=0,s=-1,v=i.length;n<v;++n)b=i[n],t.type&&b.type!==t.type||b.name!==t.name?i[++s]=b:this.removeEventListener(b.type,b.listener,b.options);++s?i.length=s:delete this.__on}}}function Fi(t,i,n){return function(){var v,s=this.__on,b=function ki(t){return function(i){t.call(this,i,this.__data__)}}(i);if(s)for(var _=0,T=s.length;_<T;++_)if((v=s[_]).type===t.type&&v.name===t.name)return this.removeEventListener(v.type,v.listener,v.options),this.addEventListener(v.type,v.listener=b,v.options=n),void(v.value=i);this.addEventListener(t.type,b,n),v={type:t.type,name:t.name,value:i,listener:b,options:n},s?s.push(v):this.__on=[v]}}function Pn(t,i,n){var s=ge(t),v=s.CustomEvent;"function"==typeof v?v=new v(i,n):(v=s.document.createEvent("Event"),n?(v.initEvent(i,n.bubbles,n.cancelable),v.detail=n.detail):v.initEvent(i,!1,!1)),t.dispatchEvent(v)}function Gi(t,i){return function(){return Pn(this,t,i)}}function Di(t,i){return function(){return Pn(this,t,i.apply(this,arguments))}}kn.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var i=this._names.indexOf(t);i>=0&&(this._names.splice(i,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Gn=[null];function Ot(t,i){this._groups=t,this._parents=i}function Dn(){return new Ot([[document.documentElement]],Gn)}Ot.prototype=Dn.prototype={constructor:Ot,select:function $(t){"function"!=typeof t&&(t=P(t));for(var i=this._groups,n=i.length,s=new Array(n),v=0;v<n;++v)for(var O,G,b=i[v],_=b.length,T=s[v]=new Array(_),z=0;z<_;++z)(O=b[z])&&(G=t.call(O,O.__data__,z,b))&&("__data__"in O&&(G.__data__=O.__data__),T[z]=G);return new Ot(s,this._parents)},selectAll:function L(t){t="function"==typeof t?function k(t){return function(){return function V(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}(t):X(t);for(var i=this._groups,n=i.length,s=[],v=[],b=0;b<n;++b)for(var O,_=i[b],T=_.length,G=0;G<T;++G)(O=_[G])&&(s.push(t.call(O,O.__data__,G,_)),v.push(O));return new Ot(s,v)},selectChild:function B(t){return this.select(null==t?J:function Y(t){return function(){return D.call(this.children,t)}}("function"==typeof t?t:F(t)))},selectChildren:function it(t){return this.selectAll(null==t?K:function Q(t){return function(){return R.call(this.children,t)}}("function"==typeof t?t:F(t)))},filter:function tt(t){"function"!=typeof t&&(t=I(t));for(var i=this._groups,n=i.length,s=new Array(n),v=0;v<n;++v)for(var O,b=i[v],_=b.length,T=s[v]=[],G=0;G<_;++G)(O=b[G])&&t.call(O,O.__data__,G,b)&&T.push(O);return new Ot(s,this._parents)},data:function lt(t,i){if(!arguments.length)return Array.from(this,at);var n=i?nt:Z,s=this._parents,v=this._groups;"function"!=typeof t&&(t=function W(t){return function(){return t}}(t));for(var b=v.length,_=new Array(b),T=new Array(b),O=new Array(b),G=0;G<b;++G){var z=s[G],U=v[G],H=U.length,rt=ct(t.call(z,z&&z.__data__,G,s)),q=rt.length,et=T[G]=new Array(q),st=_[G]=new Array(q);n(z,U,et,st,O[G]=new Array(H),rt,i);for(var xt,wt,dt=0,ft=0;dt<q;++dt)if(xt=et[dt]){for(dt>=ft&&(ft=dt+1);!(wt=st[ft])&&++ft<q;);xt._next=wt||null}}return(_=new Ot(_,s))._enter=T,_._exit=O,_},enter:function ut(){return new Ot(this._enter||this._groups.map(ot),this._parents)},exit:function gt(){return new Ot(this._exit||this._groups.map(ot),this._parents)},join:function yt(t,i,n){var s=this.enter(),v=this,b=this.exit();return"function"==typeof t?(s=t(s))&&(s=s.selection()):s=s.append(t+""),null!=i&&(v=i(v))&&(v=v.selection()),null==n?b.remove():n(b),s&&v?s.merge(v).order():v},merge:function Ft(t){for(var i=t.selection?t.selection():t,n=this._groups,s=i._groups,v=n.length,_=Math.min(v,s.length),T=new Array(v),O=0;O<_;++O)for(var rt,G=n[O],z=s[O],U=G.length,H=T[O]=new Array(U),q=0;q<U;++q)(rt=G[q]||z[q])&&(H[q]=rt);for(;O<v;++O)T[O]=n[O];return new Ot(T,this._parents)},selection:function ji(){return this},order:function bt(){for(var t=this._groups,i=-1,n=t.length;++i<n;)for(var _,s=t[i],v=s.length-1,b=s[v];--v>=0;)(_=s[v])&&(b&&4^_.compareDocumentPosition(b)&&b.parentNode.insertBefore(_,b),b=_);return this},sort:function _t(t){function i(U,H){return U&&H?t(U.__data__,H.__data__):!U-!H}t||(t=vt);for(var n=this._groups,s=n.length,v=new Array(s),b=0;b<s;++b){for(var G,_=n[b],T=_.length,O=v[b]=new Array(T),z=0;z<T;++z)(G=_[z])&&(O[z]=G);O.sort(i)}return new Ot(v,this._parents).order()},call:function $t(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function mt(){return Array.from(this)},node:function Wt(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var s=t[i],v=0,b=s.length;v<b;++v){var _=s[v];if(_)return _}return null},size:function Kt(){let t=0;for(const i of this)++t;return t},empty:function sn(){return!this.node()},each:function oe(t){for(var i=this._groups,n=0,s=i.length;n<s;++n)for(var T,v=i[n],b=0,_=v.length;b<_;++b)(T=v[b])&&t.call(T,T.__data__,b,v);return this},attr:function an(t,i){var n=zt(t);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((null==i?n.local?on:ae:"function"==typeof i?n.local?ke:Oe:n.local?Qt:Ne)(n,i))},style:function qr(t,i,n){return arguments.length>1?this.each((null==i?Rt:"function"==typeof i?Jr:Vt)(t,i,n??"")):ue(this.node(),t)},property:function ri(t,i){return arguments.length>1?this.each((null==i?ti:"function"==typeof i?ni:ei)(t,i)):this.node()[t]},classed:function ai(t,i){var n=On(t+"");if(arguments.length<2){for(var s=un(this.node()),v=-1,b=n.length;++v<b;)if(!s.contains(n[v]))return!1;return!0}return this.each(("function"==typeof i?oi:i?ii:si)(n,i))},text:function ci(t){return arguments.length?this.each(null==t?ui:("function"==typeof t?fi:hi)(t)):this.node().textContent},html:function gi(t){return arguments.length?this.each(null==t?li:("function"==typeof t?pi:di)(t)):this.node().innerHTML},raise:function mi(){return this.each(vi)},lower:function xi(){return this.each(yi)},append:function Ei(t){var i="function"==typeof t?t:Fn(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})},insert:function Ci(t,i){var n="function"==typeof t?t:Fn(t),s=null==i?_i:"function"==typeof i?i:P(i);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})},remove:function Mi(){return this.each(Ti)},clone:function Ni(t){return this.select(t?Si:Ai)},datum:function Oi(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function Pi(t,i,n){var v,_,s=function Li(t){return t.trim().split(/^|\s+/).map(function(i){var n="",s=i.indexOf(".");return s>=0&&(n=i.slice(s+1),i=i.slice(0,s)),{type:i,name:n}})}(t+""),b=s.length;if(!(arguments.length<2)){for(T=i?Fi:Ii,v=0;v<b;++v)this.each(T(s[v],i,n));return this}var T=this.node().__on;if(T)for(var z,O=0,G=T.length;O<G;++O)for(v=0,z=T[O];v<b;++v)if((_=s[v]).type===z.type&&_.name===z.name)return z.value},dispatch:function Ri(t,i){return this.each(("function"==typeof i?Di:Gi)(t,i))},[Symbol.iterator]:function*Bi(){for(var t=this._groups,i=0,n=t.length;i<n;++i)for(var _,s=t[i],v=0,b=s.length;v<b;++v)(_=s[v])&&(yield _)}};const ve=Dn;function Rn(t){return"string"==typeof t?new Ot([[document.querySelector(t)]],[document.documentElement]):new Ot([[t]],Gn)}function Bn(t,i,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+n)/6)}function Le(t){this._context=t}function jn(t,i){this._basis=new Le(t),this._beta=i}Le.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Bn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Bn(this,t,i)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=i}},jn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,i=this._y,n=t.length-1;if(n>0)for(var O,s=t[0],v=i[0],b=t[n]-s,_=i[n]-v,T=-1;++T<=n;)this._basis.point(this._beta*t[T]+(1-this._beta)*(s+(O=T/n)*b),this._beta*i[T]+(1-this._beta)*(v+O*_));this._x=this._y=null,this._basis.lineEnd()},point:function(t,i){this._x.push(+t),this._y.push(+i)}};const $i=function t(i){function n(s){return 1===i?new Le(s):new jn(s,i)}return n.beta=function(s){return t(+s)},n}(.85);var hn=Math.PI,fn=2*hn,ee=1e-6,zi=fn-ee;function cn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function $n(){return new cn}cn.prototype=$n.prototype={constructor:cn,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,n,s){this._+="Q"+ +t+","+ +i+","+(this._x1=+n)+","+(this._y1=+s)},bezierCurveTo:function(t,i,n,s,v,b){this._+="C"+ +t+","+ +i+","+ +n+","+ +s+","+(this._x1=+v)+","+(this._y1=+b)},arcTo:function(t,i,n,s,v){var b=this._x1,_=this._y1,T=(n=+n)-(t=+t),O=(s=+s)-(i=+i),G=b-t,z=_-i,U=G*G+z*z;if((v=+v)<0)throw new Error("negative radius: "+v);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=i);else if(U>ee)if(Math.abs(z*T-O*G)>ee&&v){var H=n-b,rt=s-_,q=T*T+O*O,et=H*H+rt*rt,st=Math.sqrt(q),ht=Math.sqrt(U),dt=v*Math.tan((hn-Math.acos((q+U-et)/(2*st*ht)))/2),ft=dt/ht,xt=dt/st;Math.abs(ft-1)>ee&&(this._+="L"+(t+ft*G)+","+(i+ft*z)),this._+="A"+v+","+v+",0,0,"+ +(z*H>G*rt)+","+(this._x1=t+xt*T)+","+(this._y1=i+xt*O)}else this._+="L"+(this._x1=t)+","+(this._y1=i)},arc:function(t,i,n,s,v,b){t=+t,i=+i,b=!!b;var _=(n=+n)*Math.cos(s),T=n*Math.sin(s),O=t+_,G=i+T,z=1^b,U=b?s-v:v-s;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+O+","+G:(Math.abs(this._x1-O)>ee||Math.abs(this._y1-G)>ee)&&(this._+="L"+O+","+G),n&&(U<0&&(U=U%fn+fn),U>zi?this._+="A"+n+","+n+",0,1,"+z+","+(t-_)+","+(i-T)+"A"+n+","+n+",0,1,"+z+","+(this._x1=O)+","+(this._y1=G):U>ee&&(this._+="A"+n+","+n+",0,"+ +(U>=hn)+","+z+","+(this._x1=t+n*Math.cos(v))+","+(this._y1=i+n*Math.sin(v))))},rect:function(t,i,n,s){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +n+"v"+ +s+"h"+-n+"Z"},toString:function(){return this._}};const Vi=$n;function Ie(t){return function(){return t}}function zn(t){this._context=t}function Yi(t){return new zn(t)}function Xi(t){return t[0]}function Ui(t){return t[1]}function Vn(){var t=Xi,i=Ui,n=Ie(!0),s=null,v=Yi,b=null;function _(T){var O,z,H,G=T.length,U=!1;for(null==s&&(b=v(H=Vi())),O=0;O<=G;++O)!(O<G&&n(z=T[O],O,T))===U&&((U=!U)?b.lineStart():b.lineEnd()),U&&b.point(+t(z,O,T),+i(z,O,T));if(H)return b=null,H+""||null}return _.x=function(T){return arguments.length?(t="function"==typeof T?T:Ie(+T),_):t},_.y=function(T){return arguments.length?(i="function"==typeof T?T:Ie(+T),_):i},_.defined=function(T){return arguments.length?(n="function"==typeof T?T:Ie(!!T),_):n},_.curve=function(T){return arguments.length?(v=T,null!=s&&(b=v(s)),_):v},_.context=function(T){return arguments.length?(null==T?s=b=null:b=v(s=T),_):s},_}zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i)}}};var Yn=Math.PI;function Un(t){return(1-Math.cos(Yn*t))/2}var Hi={value:function(){}};function Hn(){for(var s,t=0,i=arguments.length,n={};t<i;++t){if(!(s=arguments[t]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new Fe(n)}function Fe(t){this._=t}function Ki(t,i){for(var v,n=0,s=t.length;n<s;++n)if((v=t[n]).name===i)return v.value}function Wn(t,i,n){for(var s=0,v=t.length;s<v;++s)if(t[s].name===i){t[s]=Hi,t=t.slice(0,s).concat(t.slice(s+1));break}return null!=n&&t.push({name:i,value:n}),t}Fe.prototype=Hn.prototype={constructor:Fe,on:function(t,i){var v,n=this._,s=function Wi(t,i){return t.trim().split(/^|\s+/).map(function(n){var s="",v=n.indexOf(".");if(v>=0&&(s=n.slice(v+1),n=n.slice(0,v)),n&&!i.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}(t+"",n),b=-1,_=s.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++b<_;)if(v=(t=s[b]).type)n[v]=Wn(n[v],t.name,i);else if(null==i)for(v in n)n[v]=Wn(n[v],t.name,null);return this}for(;++b<_;)if((v=(t=s[b]).type)&&(v=Ki(n[v],t.name)))return v},copy:function(){var t={},i=this._;for(var n in i)t[n]=i[n].slice();return new Fe(t)},call:function(t,i){if((v=arguments.length-2)>0)for(var v,b,n=new Array(v),s=0;s<v;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,v=(b=this._[t]).length;s<v;++s)b[s].value.apply(i,n)},apply:function(t,i,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var s=this._[t],v=0,b=s.length;v<b;++v)s[v].value.apply(i,n)}};const ln=Hn;var Pe,xe,he=0,me=0,ye=0,Kn=1e3,Ge=0,ne=0,De=0,be="object"==typeof performance&&performance.now?performance:Date,Qn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function we(){return ne||(Qn(Qi),ne=be.now()+De)}function Qi(){ne=0}function Ee(){this._call=this._time=this._next=null}function Re(t,i,n){var s=new Ee;return s.restart(t,i,n),s}function Zn(){we(),++he;for(var i,t=Pe;t;)(i=ne-t._time)>=0&&t._call.call(null,i),t=t._next;--he}function Jn(){ne=(Ge=be.now())+De,he=me=0;try{Zn()}finally{he=0,function Ji(){for(var t,n,i=Pe,s=1/0;i;)i._call?(s>i._time&&(s=i._time),t=i,i=i._next):(n=i._next,i._next=null,i=t?t._next=n:Pe=n);xe=t,dn(s)}(),ne=0}}function Zi(){var t=be.now(),i=t-Ge;i>Kn&&(De-=i,Ge=t)}function dn(t){he||(me&&(me=clearTimeout(me)),t-ne>24?(t<1/0&&(me=setTimeout(Jn,t-be.now()-De)),ye&&(ye=clearInterval(ye))):(ye||(Ge=be.now(),ye=setInterval(Zi,Kn)),he=1,Qn(Jn)))}function pn(t,i,n){var s=new Ee;return s.restart(function(v){s.stop(),t(v+i)},i=null==i?0:+i,n),s}Ee.prototype=Re.prototype={constructor:Ee,restart:function(t,i,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?we():+n)+(null==i?0:+i),!this._next&&xe!==this&&(xe?xe._next=this:Pe=this,xe=this),this._call=t,this._time=n,dn()},stop:function(){this._call&&(this._call=null,this._time=1/0,dn())}};var qi=ln("start","end","cancel","interrupt"),ts=[],qn=0,Be=3;function $e(t,i,n,s,v,b){var _=t.__transition;if(_){if(n in _)return}else t.__transition={};!function es(t,i,n){var v,s=t.__transition;function _(G){var z,U,H,rt;if(1!==n.state)return O();for(z in s)if((rt=s[z]).name===n.name){if(rt.state===Be)return pn(_);4===rt.state?(rt.state=6,rt.timer.stop(),rt.on.call("interrupt",t,t.__data__,rt.index,rt.group),delete s[z]):+z<i&&(rt.state=6,rt.timer.stop(),rt.on.call("cancel",t,t.__data__,rt.index,rt.group),delete s[z])}if(pn(function(){n.state===Be&&(n.state=4,n.timer.restart(T,n.delay,n.time),T(G))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=Be,v=new Array(H=n.tween.length),z=0,U=-1;z<H;++z)(rt=n.tween[z].value.call(t,t.__data__,n.index,n.group))&&(v[++U]=rt);v.length=U+1}}function T(G){for(var z=G<n.duration?n.ease.call(null,G/n.duration):(n.timer.restart(O),n.state=5,1),U=-1,H=v.length;++U<H;)v[U].call(t,z);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),O())}function O(){for(var G in n.state=6,n.timer.stop(),delete s[i],s)return;delete t.__transition}s[i]=n,n.timer=Re(function b(G){n.state=1,n.timer.restart(_,n.delay,n.time),n.delay<=G&&_(G-n.delay)},0,n.time)}(t,n,{name:i,index:s,group:v,on:qi,tween:ts,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:qn})}function mn(t,i){var n=Pt(t,i);if(n.state>qn)throw new Error("too late; already scheduled");return n}function Bt(t,i){var n=Pt(t,i);if(n.state>Be)throw new Error("too late; already running");return n}function Pt(t,i){var n=t.__transition;if(!n||!(n=n[i]))throw new Error("transition not found");return n}function Zt(t,i){return t=+t,i=+i,function(n){return t*(1-n)+i*n}}var ze,nr=180/Math.PI,yn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rr(t,i,n,s,v,b){var _,T,O;return(_=Math.sqrt(t*t+i*i))&&(t/=_,i/=_),(O=t*n+i*s)&&(n-=t*O,s-=i*O),(T=Math.sqrt(n*n+s*s))&&(n/=T,s/=T,O/=T),t*s<i*n&&(t=-t,i=-i,O=-O,_=-_),{translateX:v,translateY:b,rotate:Math.atan2(i,t)*nr,skewX:Math.atan(O)*nr,scaleX:_,scaleY:T}}function ir(t,i,n,s){function v(G){return G.length?G.pop()+" ":""}return function(G,z){var U=[],H=[];return G=t(G),z=t(z),function b(G,z,U,H,rt,q){if(G!==U||z!==H){var et=rt.push("translate(",null,i,null,n);q.push({i:et-4,x:Zt(G,U)},{i:et-2,x:Zt(z,H)})}else(U||H)&&rt.push("translate("+U+i+H+n)}(G.translateX,G.translateY,z.translateX,z.translateY,U,H),function _(G,z,U,H){G!==z?(G-z>180?z+=360:z-G>180&&(G+=360),H.push({i:U.push(v(U)+"rotate(",null,s)-2,x:Zt(G,z)})):z&&U.push(v(U)+"rotate("+z+s)}(G.rotate,z.rotate,U,H),function T(G,z,U,H){G!==z?H.push({i:U.push(v(U)+"skewX(",null,s)-2,x:Zt(G,z)}):z&&U.push(v(U)+"skewX("+z+s)}(G.skewX,z.skewX,U,H),function O(G,z,U,H,rt,q){if(G!==U||z!==H){var et=rt.push(v(rt)+"scale(",null,",",null,")");q.push({i:et-4,x:Zt(G,U)},{i:et-2,x:Zt(z,H)})}else(1!==U||1!==H)&&rt.push(v(rt)+"scale("+U+","+H+")")}(G.scaleX,G.scaleY,z.scaleX,z.scaleY,U,H),G=z=null,function(rt){for(var st,q=-1,et=H.length;++q<et;)U[(st=H[q]).i]=st.x(rt);return U.join("")}}}var os=ir(function is(t){const i=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return i.isIdentity?yn:rr(i.a,i.b,i.c,i.d,i.e,i.f)},"px, ","px)","deg)"),as=ir(function ss(t){return null!=t&&(ze||(ze=document.createElementNS("http://www.w3.org/2000/svg","g")),ze.setAttribute("transform",t),t=ze.transform.baseVal.consolidate())?rr((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):yn},", ",")",")");function us(t,i){var n,s;return function(){var v=Bt(this,t),b=v.tween;if(b!==n)for(var _=0,T=(s=n=b).length;_<T;++_)if(s[_].name===i){(s=s.slice()).splice(_,1);break}v.tween=s}}function hs(t,i,n){var s,v;if("function"!=typeof n)throw new Error;return function(){var b=Bt(this,t),_=b.tween;if(_!==s){v=(s=_).slice();for(var T={name:i,value:n},O=0,G=v.length;O<G;++O)if(v[O].name===i){v[O]=T;break}O===G&&v.push(T)}b.tween=v}}function xn(t,i,n){var s=t._id;return t.each(function(){var v=Bt(this,s);(v.value||(v.value={}))[i]=n.apply(this,arguments)}),function(v){return Pt(v,s).value[i]}}function bn(t,i,n){t.prototype=i.prototype=n,n.constructor=t}function sr(t,i){var n=Object.create(t.prototype);for(var s in i)n[s]=i[s];return n}function _e(){}var Ve=1/.7,fe="\\s*([+-]?\\d+)\\s*",Te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cs=/^#([0-9a-f]{3,8})$/,ls=new RegExp(`^rgb\\(${fe},${fe},${fe}\\)$`),ds=new RegExp(`^rgb\\(${jt},${jt},${jt}\\)$`),ps=new RegExp(`^rgba\\(${fe},${fe},${fe},${Te}\\)$`),gs=new RegExp(`^rgba\\(${jt},${jt},${jt},${Te}\\)$`),vs=new RegExp(`^hsl\\(${Te},${jt},${jt}\\)$`),ms=new RegExp(`^hsla\\(${Te},${jt},${jt},${Te}\\)$`),or={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ar(){return this.rgb().formatHex()}function ur(){return this.rgb().formatRgb()}function Me(t){var i,n;return t=(t+"").trim().toLowerCase(),(i=cs.exec(t))?(n=i[1].length,i=parseInt(i[1],16),6===n?hr(i):3===n?new Nt(i>>8&15|i>>4&240,i>>4&15|240&i,(15&i)<<4|15&i,1):8===n?Ye(i>>24&255,i>>16&255,i>>8&255,(255&i)/255):4===n?Ye(i>>12&15|i>>8&240,i>>8&15|i>>4&240,i>>4&15|240&i,((15&i)<<4|15&i)/255):null):(i=ls.exec(t))?new Nt(i[1],i[2],i[3],1):(i=ds.exec(t))?new Nt(255*i[1]/100,255*i[2]/100,255*i[3]/100,1):(i=ps.exec(t))?Ye(i[1],i[2],i[3],i[4]):(i=gs.exec(t))?Ye(255*i[1]/100,255*i[2]/100,255*i[3]/100,i[4]):(i=vs.exec(t))?lr(i[1],i[2]/100,i[3]/100,1):(i=ms.exec(t))?lr(i[1],i[2]/100,i[3]/100,i[4]):or.hasOwnProperty(t)?hr(or[t]):"transparent"===t?new Nt(NaN,NaN,NaN,0):null}function hr(t){return new Nt(t>>16&255,t>>8&255,255&t,1)}function Ye(t,i,n,s){return s<=0&&(t=i=n=NaN),new Nt(t,i,n,s)}function Xe(t,i,n,s){return 1===arguments.length?function bs(t){return t instanceof _e||(t=Me(t)),t?new Nt((t=t.rgb()).r,t.g,t.b,t.opacity):new Nt}(t):new Nt(t,i,n,s??1)}function Nt(t,i,n,s){this.r=+t,this.g=+i,this.b=+n,this.opacity=+s}function fr(){return`#${ie(this.r)}${ie(this.g)}${ie(this.b)}`}function cr(){const t=Ue(this.opacity);return`${1===t?"rgb(":"rgba("}${re(this.r)}, ${re(this.g)}, ${re(this.b)}${1===t?")":`, ${t})`}`}function Ue(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function re(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ie(t){return((t=re(t))<16?"0":"")+t.toString(16)}function lr(t,i,n,s){return s<=0?t=i=n=NaN:n<=0||n>=1?t=i=NaN:i<=0&&(t=NaN),new Gt(t,i,n,s)}function dr(t){if(t instanceof Gt)return new Gt(t.h,t.s,t.l,t.opacity);if(t instanceof _e||(t=Me(t)),!t)return new Gt;if(t instanceof Gt)return t;var i=(t=t.rgb()).r/255,n=t.g/255,s=t.b/255,v=Math.min(i,n,s),b=Math.max(i,n,s),_=NaN,T=b-v,O=(b+v)/2;return T?(_=i===b?(n-s)/T+6*(n<s):n===b?(s-i)/T+2:(i-n)/T+4,T/=O<.5?b+v:2-b-v,_*=60):T=O>0&&O<1?0:_,new Gt(_,T,O,t.opacity)}function Gt(t,i,n,s){this.h=+t,this.s=+i,this.l=+n,this.opacity=+s}function pr(t){return(t=(t||0)%360)<0?t+360:t}function He(t){return Math.max(0,Math.min(1,t||0))}function wn(t,i,n){return 255*(t<60?i+(n-i)*t/60:t<180?n:t<240?i+(n-i)*(240-t)/60:i)}function gr(t,i,n,s,v){var b=t*t,_=b*t;return((1-3*t+3*b-_)*i+(4-6*b+3*_)*n+(1+3*t+3*b-3*_)*s+_*v)/6}bn(_e,Me,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ar,formatHex:ar,formatHex8:function ys(){return this.rgb().formatHex8()},formatHsl:function xs(){return dr(this).formatHsl()},formatRgb:ur,toString:ur}),bn(Nt,Xe,sr(_e,{brighter(t){return t=null==t?Ve:Math.pow(Ve,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Nt(re(this.r),re(this.g),re(this.b),Ue(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fr,formatHex:fr,formatHex8:function ws(){return`#${ie(this.r)}${ie(this.g)}${ie(this.b)}${ie(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:cr,toString:cr})),bn(Gt,function Es(t,i,n,s){return 1===arguments.length?dr(t):new Gt(t,i,n,s??1)},sr(_e,{brighter(t){return t=null==t?Ve:Math.pow(Ve,t),new Gt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?.7:Math.pow(.7,t),new Gt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),i=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*i,v=2*n-s;return new Nt(wn(t>=240?t-240:t+120,v,s),wn(t,v,s),wn(t<120?t+240:t-120,v,s),this.opacity)},clamp(){return new Gt(pr(this.h),He(this.s),He(this.l),Ue(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ue(this.opacity);return`${1===t?"hsl(":"hsla("}${pr(this.h)}, ${100*He(this.s)}%, ${100*He(this.l)}%${1===t?")":`, ${t})`}`}}));const vr=t=>()=>t;function yr(t,i){var n=i-t;return n?function mr(t,i){return function(n){return t+n*i}}(t,n):vr(isNaN(t)?i:t)}const xr=function t(i){var n=function Ms(t){return 1==(t=+t)?yr:function(i,n){return n-i?function Ts(t,i,n){return t=Math.pow(t,n),i=Math.pow(i,n)-t,n=1/n,function(s){return Math.pow(t+s*i,n)}}(i,n,t):vr(isNaN(i)?n:i)}}(i);function s(v,b){var _=n((v=Xe(v)).r,(b=Xe(b)).r),T=n(v.g,b.g),O=n(v.b,b.b),G=yr(v.opacity,b.opacity);return function(z){return v.r=_(z),v.g=T(z),v.b=O(z),v.opacity=G(z),v+""}}return s.gamma=t,s}(1);function br(t){return function(i){var _,T,n=i.length,s=new Array(n),v=new Array(n),b=new Array(n);for(_=0;_<n;++_)T=Xe(i[_]),s[_]=T.r||0,v[_]=T.g||0,b[_]=T.b||0;return s=t(s),v=t(v),b=t(b),T.opacity=1,function(O){return T.r=s(O),T.g=v(O),T.b=b(O),T+""}}}br(function _s(t){var i=t.length-1;return function(n){var s=n<=0?n=0:n>=1?(n=1,i-1):Math.floor(n*i),v=t[s],b=t[s+1];return gr((n-s/i)*i,s>0?t[s-1]:2*v-b,v,b,s<i-1?t[s+2]:2*b-v)}}),br(function Cs(t){var i=t.length;return function(n){var s=Math.floor(((n%=1)<0?++n:n)*i);return gr((n-s/i)*i,t[(s+i-1)%i],t[s%i],t[(s+1)%i],t[(s+2)%i])}});var En=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_n=new RegExp(En.source,"g");function Ns(t,i){var s,v,b,n=En.lastIndex=_n.lastIndex=0,_=-1,T=[],O=[];for(t+="",i+="";(s=En.exec(t))&&(v=_n.exec(i));)(b=v.index)>n&&(b=i.slice(n,b),T[_]?T[_]+=b:T[++_]=b),(s=s[0])===(v=v[0])?T[_]?T[_]+=v:T[++_]=v:(T[++_]=null,O.push({i:_,x:Zt(s,v)})),n=_n.lastIndex;return n<i.length&&(b=i.slice(n),T[_]?T[_]+=b:T[++_]=b),T.length<2?O[0]?function Ss(t){return function(i){return t(i)+""}}(O[0].x):function As(t){return function(){return t}}(i):(i=O.length,function(G){for(var U,z=0;z<i;++z)T[(U=O[z]).i]=U.x(G);return T.join("")})}function wr(t,i){var n;return("number"==typeof i?Zt:i instanceof Me?xr:(n=Me(i))?(i=n,xr):Ns)(t,i)}function Os(t){return function(){this.removeAttribute(t)}}function ks(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ls(t,i,n){var s,b,v=n+"";return function(){var _=this.getAttribute(t);return _===v?null:_===s?b:b=i(s=_,n)}}function Is(t,i,n){var s,b,v=n+"";return function(){var _=this.getAttributeNS(t.space,t.local);return _===v?null:_===s?b:b=i(s=_,n)}}function Fs(t,i,n){var s,v,b;return function(){var _,O,T=n(this);return null==T?void this.removeAttribute(t):(_=this.getAttribute(t))===(O=T+"")?null:_===s&&O===v?b:(v=O,b=i(s=_,T))}}function Ps(t,i,n){var s,v,b;return function(){var _,O,T=n(this);return null==T?void this.removeAttributeNS(t.space,t.local):(_=this.getAttributeNS(t.space,t.local))===(O=T+"")?null:_===s&&O===v?b:(v=O,b=i(s=_,T))}}function Bs(t,i){var n,s;function v(){var b=i.apply(this,arguments);return b!==s&&(n=(s=b)&&function Rs(t,i){return function(n){this.setAttributeNS(t.space,t.local,i.call(this,n))}}(t,b)),n}return v._value=i,v}function js(t,i){var n,s;function v(){var b=i.apply(this,arguments);return b!==s&&(n=(s=b)&&function Ds(t,i){return function(n){this.setAttribute(t,i.call(this,n))}}(t,b)),n}return v._value=i,v}function zs(t,i){return function(){mn(this,t).delay=+i.apply(this,arguments)}}function Vs(t,i){return i=+i,function(){mn(this,t).delay=i}}function Xs(t,i){return function(){Bt(this,t).duration=+i.apply(this,arguments)}}function Us(t,i){return i=+i,function(){Bt(this,t).duration=i}}var ao=ve.prototype.constructor;function Er(t){return function(){this.style.removeProperty(t)}}var Mo=0;function Yt(t,i,n,s){this._groups=t,this._parents=i,this._name=n,this._id=s}function _r(){return++Mo}var Xt=ve.prototype;Yt.prototype=function Ao(t){return ve().transition(t)}.prototype={constructor:Yt,select:function so(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=P(t));for(var s=this._groups,v=s.length,b=new Array(v),_=0;_<v;++_)for(var z,U,T=s[_],O=T.length,G=b[_]=new Array(O),H=0;H<O;++H)(z=T[H])&&(U=t.call(z,z.__data__,H,T))&&("__data__"in z&&(U.__data__=z.__data__),G[H]=U,$e(G[H],i,n,H,G,Pt(z,n)));return new Yt(b,this._parents,i,n)},selectAll:function oo(t){var i=this._name,n=this._id;"function"!=typeof t&&(t=X(t));for(var s=this._groups,v=s.length,b=[],_=[],T=0;T<v;++T)for(var z,O=s[T],G=O.length,U=0;U<G;++U)if(z=O[U]){for(var rt,H=t.call(z,z.__data__,U,O),q=Pt(z,n),et=0,st=H.length;et<st;++et)(rt=H[et])&&$e(rt,i,n,et,H,q);b.push(H),_.push(z)}return new Yt(b,_,i,n)},selectChild:Xt.selectChild,selectChildren:Xt.selectChildren,filter:function Js(t){"function"!=typeof t&&(t=I(t));for(var i=this._groups,n=i.length,s=new Array(n),v=0;v<n;++v)for(var O,b=i[v],_=b.length,T=s[v]=[],G=0;G<_;++G)(O=b[G])&&t.call(O,O.__data__,G,b)&&T.push(O);return new Yt(s,this._parents,this._name,this._id)},merge:function qs(t){if(t._id!==this._id)throw new Error;for(var i=this._groups,n=t._groups,s=i.length,b=Math.min(s,n.length),_=new Array(s),T=0;T<b;++T)for(var H,O=i[T],G=n[T],z=O.length,U=_[T]=new Array(z),rt=0;rt<z;++rt)(H=O[rt]||G[rt])&&(U[rt]=H);for(;T<s;++T)_[T]=i[T];return new Yt(_,this._parents,this._name,this._id)},selection:function uo(){return new ao(this._groups,this._parents)},transition:function Co(){for(var t=this._name,i=this._id,n=_r(),s=this._groups,v=s.length,b=0;b<v;++b)for(var O,_=s[b],T=_.length,G=0;G<T;++G)if(O=_[G]){var z=Pt(O,i);$e(O,t,n,G,_,{time:z.time+z.delay+z.duration,delay:0,duration:z.duration,ease:z.ease})}return new Yt(s,this._parents,t,n)},call:Xt.call,nodes:Xt.nodes,node:Xt.node,size:Xt.size,empty:Xt.empty,each:Xt.each,on:function no(t,i){var n=this._id;return arguments.length<2?Pt(this.node(),n).on.on(t):this.each(function eo(t,i,n){var s,v,b=function to(t){return(t+"").trim().split(/^|\s+/).every(function(i){var n=i.indexOf(".");return n>=0&&(i=i.slice(0,n)),!i||"start"===i})}(i)?mn:Bt;return function(){var _=b(this,t),T=_.on;T!==s&&(v=(s=T).copy()).on(i,n),_.on=v}}(n,t,i))},attr:function Gs(t,i){var n=zt(t),s="transform"===n?as:wr;return this.attrTween(t,"function"==typeof i?(n.local?Ps:Fs)(n,s,xn(this,"attr."+t,i)):null==i?(n.local?ks:Os)(n):(n.local?Is:Ls)(n,s,i))},attrTween:function $s(t,i){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==i)return this.tween(n,null);if("function"!=typeof i)throw new Error;var s=zt(t);return this.tween(n,(s.local?Bs:js)(s,i))},style:function po(t,i,n){var s="transform"==(t+="")?os:wr;return null==i?this.styleTween(t,function ho(t,i){var n,s,v;return function(){var b=ue(this,t),_=(this.style.removeProperty(t),ue(this,t));return b===_?null:b===n&&_===s?v:v=i(n=b,s=_)}}(t,s)).on("end.style."+t,Er(t)):"function"==typeof i?this.styleTween(t,function co(t,i,n){var s,v,b;return function(){var _=ue(this,t),T=n(this),O=T+"";return null==T&&(this.style.removeProperty(t),O=T=ue(this,t)),_===O?null:_===s&&O===v?b:(v=O,b=i(s=_,T))}}(t,s,xn(this,"style."+t,i))).each(function lo(t,i){var n,s,v,T,b="style."+i,_="end."+b;return function(){var O=Bt(this,t),G=O.on,z=null==O.value[b]?T||(T=Er(i)):void 0;(G!==n||v!==z)&&(s=(n=G).copy()).on(_,v=z),O.on=s}}(this._id,t)):this.styleTween(t,function fo(t,i,n){var s,b,v=n+"";return function(){var _=ue(this,t);return _===v?null:_===s?b:b=i(s=_,n)}}(t,s,i),n).on("end.style."+t,null)},styleTween:function mo(t,i,n){var s="style."+(t+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(null==i)return this.tween(s,null);if("function"!=typeof i)throw new Error;return this.tween(s,function vo(t,i,n){var s,v;function b(){var _=i.apply(this,arguments);return _!==v&&(s=(v=_)&&function go(t,i,n){return function(s){this.style.setProperty(t,i.call(this,s),n)}}(t,_,n)),s}return b._value=i,b}(t,i,n??""))},text:function bo(t){return this.tween("text","function"==typeof t?function xo(t){return function(){var i=t(this);this.textContent=i??""}}(xn(this,"text",t)):function yo(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function _o(t){var i="text";if(arguments.length<1)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!=typeof t)throw new Error;return this.tween(i,function Eo(t){var i,n;function s(){var v=t.apply(this,arguments);return v!==n&&(i=(n=v)&&function wo(t){return function(i){this.textContent=t.call(this,i)}}(v)),i}return s._value=t,s}(t))},remove:function io(){return this.on("end.remove",function ro(t){return function(){var i=this.parentNode;for(var n in this.__transition)if(+n!==t)return;i&&i.removeChild(this)}}(this._id))},tween:function fs(t,i){var n=this._id;if(t+="",arguments.length<2){for(var _,s=Pt(this.node(),n).tween,v=0,b=s.length;v<b;++v)if((_=s[v]).name===t)return _.value;return null}return this.each((null==i?us:hs)(n,t,i))},delay:function Ys(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?zs:Vs)(i,t)):Pt(this.node(),i).delay},duration:function Hs(t){var i=this._id;return arguments.length?this.each(("function"==typeof t?Xs:Us)(i,t)):Pt(this.node(),i).duration},ease:function Ks(t){var i=this._id;return arguments.length?this.each(function Ws(t,i){if("function"!=typeof i)throw new Error;return function(){Bt(this,t).ease=i}}(i,t)):Pt(this.node(),i).ease},easeVarying:function Zs(t){if("function"!=typeof t)throw new Error;return this.each(function Qs(t,i){return function(){var n=i.apply(this,arguments);if("function"!=typeof n)throw new Error;Bt(this,t).ease=n}}(this._id,t))},end:function To(){var t,i,n=this,s=n._id,v=n.size();return new Promise(function(b,_){var T={value:_},O={value:function(){0==--v&&b()}};n.each(function(){var G=Bt(this,s),z=G.on;z!==t&&((i=(t=z).copy())._.cancel.push(T),i._.interrupt.push(T),i._.end.push(O)),G.on=i}),0===v&&b()})},[Symbol.iterator]:Xt[Symbol.iterator]};var No={time:null,delay:0,duration:250,ease:function So(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Oo(t,i){for(var n;!(n=t.__transition)||!(n=n[i]);)if(!(t=t.parentNode))throw new Error(`transition ${i} not found`);return n}ve.prototype.interrupt=function rs(t){return this.each(function(){!function ns(t,i){var s,v,_,n=t.__transition,b=!0;if(n){for(_ in i=null==i?null:i+"",n)(s=n[_]).name===i?(v=s.state>2&&s.state<5,s.state=6,s.timer.stop(),s.on.call(v?"interrupt":"cancel",t,t.__data__,s.index,s.group),delete n[_]):b=!1;b&&delete t.__transition}}(this,t)})},ve.prototype.transition=function ko(t){var i,n;t instanceof Yt?(i=t._id,t=t._name):(i=_r(),(n=No).time=we(),t=null==t?null:t+"");for(var s=this._groups,v=s.length,b=0;b<v;++b)for(var O,_=s[b],T=_.length,G=0;G<T;++G)(O=_[G])&&$e(O,t,i,G,_,n||Oo(O,i));return new Yt(s,this._parents,t,i)};var Cn=r(1413),Tn=r(8359),Cr=r(1985),Tr=r(7673),Lo=r(3726),We=r(6977),Io=r(1594);class Fo extends Tn.yU{constructor(i,n){super()}schedule(i,n=0){return this}}const Ke={setInterval(t,i,...n){const{delegate:s}=Ke;return s?.setInterval?s.setInterval(t,i,...n):setInterval(t,i,...n)},clearInterval(t){const{delegate:i}=Ke;return(i?.clearInterval||clearInterval)(t)},delegate:void 0};var Po=r(7908);const Mr={now:()=>(Mr.delegate||Date).now(),delegate:void 0};class Ae{constructor(i,n=Ae.now){this.schedulerActionCtor=i,this.now=n}schedule(i,n=0,s){return new this.schedulerActionCtor(this,i).schedule(s,n)}}Ae.now=Mr.now;const Ro=new class Do extends Ae{constructor(i,n=Ae.now){super(i,n),this.actions=[],this._active=!1}flush(i){const{actions:n}=this;if(this._active)return void n.push(i);let s;this._active=!0;do{if(s=i.execute(i.state,i.delay))break}while(i=n.shift());if(this._active=!1,s){for(;i=n.shift();)i.unsubscribe();throw s}}}(class Go extends Fo{constructor(i,n){super(i,n),this.scheduler=i,this.work=n,this.pending=!1}schedule(i,n=0){var s;if(this.closed)return this;this.state=i;const v=this.id,b=this.scheduler;return null!=v&&(this.id=this.recycleAsyncId(b,v,n)),this.pending=!0,this.delay=n,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(b,this.id,n),this}requestAsyncId(i,n,s=0){return Ke.setInterval(i.flush.bind(i,this),s)}recycleAsyncId(i,n,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return n;null!=n&&Ke.clearInterval(n)}execute(i,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(i,n);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(i,n){let v,s=!1;try{this.work(i)}catch(b){s=!0,v=b||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),v}unsubscribe(){if(!this.closed){const{id:i,scheduler:n}=this,{actions:s}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Po.o)(s,this),null!=i&&(this.id=this.recycleAsyncId(n,i,null)),this.delay=null,super.unsubscribe()}}});var Bo=r(9974),jo=r(4360);function Se(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var s=function(U,H){return{a:U.a*H.a+U.c*H.b,c:U.a*H.c+U.c*H.d,e:U.a*H.e+U.c*H.f+U.e,b:U.b*H.a+U.d*H.b,d:U.b*H.c+U.d*H.d,f:U.b*H.e+U.d*H.f+U.f}};switch((i=Array.isArray(i[0])?i[0]:i).length){case 0:throw new Error("no matrices provided");case 1:return i[0];case 2:return s(i[0],i[1]);default:var b=function ta(t){return Array.isArray(t)?t:Array.from(t)}(i),_=b[0],T=b[1],O=b.slice(2),G=s(_,T);return Se.apply(void 0,[G].concat(function qo(t){if(Array.isArray(t)){for(var i=0,n=Array(t.length);i<t.length;i++)n[i]=t[i];return n}return Array.from(t)}(O)))}}function Nr(t){return{a:1,c:0,e:t,b:0,d:1,f:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}function na(t,i){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(i).domain(t)}return this}"function"==typeof Symbol&&Symbol,Math,Math,Math,Math;const Or=Symbol("implicit");function kr(){var t=new Map,i=[],n=[],s=Or;function v(b){var _=b+"",T=t.get(_);if(!T){if(s!==Or)return s;t.set(_,T=i.push(b))}return n[(T-1)%n.length]}return v.domain=function(b){if(!arguments.length)return i.slice();i=[],t=new Map;for(const _ of b){const T=_+"";t.has(T)||t.set(T,i.push(_))}return v},v.range=function(b){return arguments.length?(n=Array.from(b),v):n.slice()},v.unknown=function(b){return arguments.length?(s=b,v):s},v.copy=function(){return kr(i,n).unknown(s)},na.apply(v,arguments),v}var le=r(9881);function ra(t,i){var n;function s(){var v,_,b=n.length,T=0,O=0;for(v=0;v<b;++v)T+=(_=n[v]).x,O+=_.y;for(T=T/b-t,O=O/b-i,v=0;v<b;++v)(_=n[v]).x-=T,_.y-=O}return null==t&&(t=0),null==i&&(i=0),s.initialize=function(v){n=v},s.x=function(v){return arguments.length?(t=+v,s):t},s.y=function(v){return arguments.length?(i=+v,s):i},s}function Et(t){return function(){return t}}function Jt(){return 1e-6*(Math.random()-.5)}function Lr(t,i,n,s){if(isNaN(i)||isNaN(n))return t;var v,U,H,rt,q,et,st,ht,dt,b=t._root,_={data:s},T=t._x0,O=t._y0,G=t._x1,z=t._y1;if(!b)return t._root=_,t;for(;b.length;)if((et=i>=(U=(T+G)/2))?T=U:G=U,(st=n>=(H=(O+z)/2))?O=H:z=H,v=b,!(b=b[ht=st<<1|et]))return v[ht]=_,t;if(rt=+t._x.call(null,b.data),q=+t._y.call(null,b.data),i===rt&&n===q)return _.next=b,v?v[ht]=_:t._root=_,t;do{v=v?v[ht]=new Array(4):t._root=new Array(4),(et=i>=(U=(T+G)/2))?T=U:G=U,(st=n>=(H=(O+z)/2))?O=H:z=H}while((ht=st<<1|et)==(dt=(q>=H)<<1|rt>=U));return v[dt]=b,v[ht]=_,t}function At(t,i,n,s,v){this.node=t,this.x0=i,this.y0=n,this.x1=s,this.y1=v}function va(t){return t[0]}function ya(t){return t[1]}function Mn(t,i,n){var s=new An(i??va,n??ya,NaN,NaN,NaN,NaN);return null==t?s:s.addAll(t)}function An(t,i,n,s,v,b){this._x=t,this._y=i,this._x0=n,this._y0=s,this._x1=v,this._y1=b,this._root=void 0}function Ir(t){for(var i={data:t.data},n=i;t=t.next;)n=n.next={data:t.data};return i}var St=Mn.prototype=An.prototype;function ba(t){return t.x+t.vx}function wa(t){return t.y+t.vy}function Fr(t){var i,n,s=1,v=1;function b(){for(var O,z,U,H,rt,q,et,G=i.length,st=0;st<v;++st)for(z=Mn(i,ba,wa).visitAfter(_),O=0;O<G;++O)et=(q=n[(U=i[O]).index])*q,H=U.x+U.vx,rt=U.y+U.vy,z.visit(ht);function ht(dt,ft,xt,wt,kt){var Ct=dt.data,Dt=dt.r,Tt=q+Dt;if(!Ct)return ft>H+Tt||wt<H-Tt||xt>rt+Tt||kt<rt-Tt;if(Ct.index>U.index){var qt=H-Ct.x-Ct.vx,te=rt-Ct.y-Ct.vy,Ht=qt*qt+te*te;Ht<Tt*Tt&&(0===qt&&(Ht+=(qt=Jt())*qt),0===te&&(Ht+=(te=Jt())*te),Ht=(Tt-(Ht=Math.sqrt(Ht)))/Ht*s,U.vx+=(qt*=Ht)*(Tt=(Dt*=Dt)/(et+Dt)),U.vy+=(te*=Ht)*Tt,Ct.vx-=qt*(Tt=1-Tt),Ct.vy-=te*Tt)}}}function _(O){if(O.data)return O.r=n[O.data.index];for(var G=O.r=0;G<4;++G)O[G]&&O[G].r>O.r&&(O.r=O[G].r)}function T(){if(i){var O,z,G=i.length;for(n=new Array(G),O=0;O<G;++O)n[(z=i[O]).index]=+t(z,O,i)}}return"function"!=typeof t&&(t=Et(null==t?1:+t)),b.initialize=function(O){i=O,T()},b.iterations=function(O){return arguments.length?(v=+O,b):v},b.strength=function(O){return arguments.length?(s=+O,b):s},b.radius=function(O){return arguments.length?(t="function"==typeof O?O:Et(+O),T(),b):t},b}St.copy=function(){var n,s,t=new An(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return t;if(!i.length)return t._root=Ir(i),t;for(n=[{source:i,target:t._root=new Array(4)}];i=n.pop();)for(var v=0;v<4;++v)(s=i.source[v])&&(s.length?n.push({source:s,target:i.target[v]=new Array(4)}):i.target[v]=Ir(s));return t},St.add=function ia(t){var i=+this._x.call(null,t),n=+this._y.call(null,t);return Lr(this.cover(i,n),i,n,t)},St.addAll=function sa(t){var i,n,v,b,s=t.length,_=new Array(s),T=new Array(s),O=1/0,G=1/0,z=-1/0,U=-1/0;for(n=0;n<s;++n)isNaN(v=+this._x.call(null,i=t[n]))||isNaN(b=+this._y.call(null,i))||(_[n]=v,T[n]=b,v<O&&(O=v),v>z&&(z=v),b<G&&(G=b),b>U&&(U=b));if(O>z||G>U)return this;for(this.cover(O,G).cover(z,U),n=0;n<s;++n)Lr(this,_[n],T[n],t[n]);return this},St.cover=function oa(t,i){if(isNaN(t=+t)||isNaN(i=+i))return this;var n=this._x0,s=this._y0,v=this._x1,b=this._y1;if(isNaN(n))v=(n=Math.floor(t))+1,b=(s=Math.floor(i))+1;else{for(var O,G,_=v-n,T=this._root;n>t||t>=v||s>i||i>=b;)switch(G=(i<s)<<1|t<n,O=new Array(4),O[G]=T,T=O,_*=2,G){case 0:v=n+_,b=s+_;break;case 1:n=v-_,b=s+_;break;case 2:v=n+_,s=b-_;break;case 3:n=v-_,s=b-_}this._root&&this._root.length&&(this._root=T)}return this._x0=n,this._y0=s,this._x1=v,this._y1=b,this},St.data=function aa(){var t=[];return this.visit(function(i){if(!i.length)do{t.push(i.data)}while(i=i.next)}),t},St.extent=function ua(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},St.find=function ha(t,i,n){var s,_,T,O,G,q,et,v=this._x0,b=this._y0,z=this._x1,U=this._y1,H=[],rt=this._root;for(rt&&H.push(new At(rt,v,b,z,U)),null==n?n=1/0:(v=t-n,b=i-n,z=t+n,U=i+n,n*=n);q=H.pop();)if(!(!(rt=q.node)||(_=q.x0)>z||(T=q.y0)>U||(O=q.x1)<v||(G=q.y1)<b))if(rt.length){var st=(_+O)/2,ht=(T+G)/2;H.push(new At(rt[3],st,ht,O,G),new At(rt[2],_,ht,st,G),new At(rt[1],st,T,O,ht),new At(rt[0],_,T,st,ht)),(et=(i>=ht)<<1|t>=st)&&(q=H[H.length-1],H[H.length-1]=H[H.length-1-et],H[H.length-1-et]=q)}else{var dt=t-+this._x.call(null,rt.data),ft=i-+this._y.call(null,rt.data),xt=dt*dt+ft*ft;if(xt<n){var wt=Math.sqrt(n=xt);v=t-wt,b=i-wt,z=t+wt,U=i+wt,s=rt.data}}return s},St.remove=function fa(t){if(isNaN(z=+this._x.call(null,t))||isNaN(U=+this._y.call(null,t)))return this;var i,s,v,b,z,U,H,rt,q,et,st,ht,n=this._root,_=this._x0,T=this._y0,O=this._x1,G=this._y1;if(!n)return this;if(n.length)for(;;){if((q=z>=(H=(_+O)/2))?_=H:O=H,(et=U>=(rt=(T+G)/2))?T=rt:G=rt,i=n,!(n=n[st=et<<1|q]))return this;if(!n.length)break;(i[st+1&3]||i[st+2&3]||i[st+3&3])&&(s=i,ht=st)}for(;n.data!==t;)if(v=n,!(n=n.next))return this;return(b=n.next)&&delete n.next,v?(b?v.next=b:delete v.next,this):i?(b?i[st]=b:delete i[st],(n=i[0]||i[1]||i[2]||i[3])&&n===(i[3]||i[2]||i[1]||i[0])&&!n.length&&(s?s[ht]=n:this._root=n),this):(this._root=b,this)},St.removeAll=function ca(t){for(var i=0,n=t.length;i<n;++i)this.remove(t[i]);return this},St.root=function la(){return this._root},St.size=function da(){var t=0;return this.visit(function(i){if(!i.length)do{++t}while(i=i.next)}),t},St.visit=function pa(t){var n,v,b,_,T,O,i=[],s=this._root;for(s&&i.push(new At(s,this._x0,this._y0,this._x1,this._y1));n=i.pop();)if(!t(s=n.node,b=n.x0,_=n.y0,T=n.x1,O=n.y1)&&s.length){var G=(b+T)/2,z=(_+O)/2;(v=s[3])&&i.push(new At(v,G,z,T,O)),(v=s[2])&&i.push(new At(v,b,z,G,O)),(v=s[1])&&i.push(new At(v,G,_,T,z)),(v=s[0])&&i.push(new At(v,b,_,G,z))}return this},St.visitAfter=function ga(t){var s,i=[],n=[];for(this._root&&i.push(new At(this._root,this._x0,this._y0,this._x1,this._y1));s=i.pop();){var v=s.node;if(v.length){var b,_=s.x0,T=s.y0,O=s.x1,G=s.y1,z=(_+O)/2,U=(T+G)/2;(b=v[0])&&i.push(new At(b,_,T,z,U)),(b=v[1])&&i.push(new At(b,z,T,O,U)),(b=v[2])&&i.push(new At(b,_,U,z,G)),(b=v[3])&&i.push(new At(b,z,U,O,G))}n.push(s)}for(;s=n.pop();)t(s.node,s.x0,s.y0,s.x1,s.y1);return this},St.x=function ma(t){return arguments.length?(this._x=t,this):this._x},St.y=function xa(t){return arguments.length?(this._y=t,this):this._y};var It="$";function Qe(){}function Pr(t,i){var n=new Qe;if(t instanceof Qe)t.each(function(T,O){n.set(O,T)});else if(Array.isArray(t)){var b,s=-1,v=t.length;if(null==i)for(;++s<v;)n.set(s,t[s]);else for(;++s<v;)n.set(i(b=t[s],s,t),b)}else if(t)for(var _ in t)n.set(_,t[_]);return n}Qe.prototype=Pr.prototype={constructor:Qe,has:function(t){return It+t in this},get:function(t){return this[It+t]},set:function(t,i){return this[It+t]=i,this},remove:function(t){var i=It+t;return i in this&&delete this[i]},clear:function(){for(var t in this)t[0]===It&&delete this[t]},keys:function(){var t=[];for(var i in this)i[0]===It&&t.push(i.slice(1));return t},values:function(){var t=[];for(var i in this)i[0]===It&&t.push(this[i]);return t},entries:function(){var t=[];for(var i in this)i[0]===It&&t.push({key:i.slice(1),value:this[i]});return t},size:function(){var t=0;for(var i in this)i[0]===It&&++t;return t},empty:function(){for(var t in this)if(t[0]===It)return!1;return!0},each:function(t){for(var i in this)i[0]===It&&t(this[i],i.slice(1),this)}};const Sn=Pr;function Ze(){}var se=Sn.prototype;function Ta(t){return t.index}function Rr(t,i){var n=t.get(i);if(!n)throw new Error("missing: "+i);return n}function Br(t){var s,b,_,T,O,i=Ta,n=function z(et){return 1/Math.min(T[et.source.index],T[et.target.index])},v=Et(30),G=1;function U(et){for(var st=0,ht=t.length;st<G;++st)for(var ft,xt,wt,kt,Ct,Dt,Tt,dt=0;dt<ht;++dt)kt=(wt=(ft=t[dt]).target).x+wt.vx-(xt=ft.source).x-xt.vx||Jt(),Ct=wt.y+wt.vy-xt.y-xt.vy||Jt(),Ct*=Dt=((Dt=Math.sqrt(kt*kt+Ct*Ct))-b[dt])/Dt*et*s[dt],wt.vx-=(kt*=Dt)*(Tt=O[dt]),wt.vy-=Ct*Tt,xt.vx+=kt*(Tt=1-Tt),xt.vy+=Ct*Tt}function H(){if(_){var et,ft,st=_.length,ht=t.length,dt=Sn(_,i);for(et=0,T=new Array(st);et<ht;++et)(ft=t[et]).index=et,"object"!=typeof ft.source&&(ft.source=Rr(dt,ft.source)),"object"!=typeof ft.target&&(ft.target=Rr(dt,ft.target)),T[ft.source.index]=(T[ft.source.index]||0)+1,T[ft.target.index]=(T[ft.target.index]||0)+1;for(et=0,O=new Array(ht);et<ht;++et)O[et]=T[(ft=t[et]).source.index]/(T[ft.source.index]+T[ft.target.index]);s=new Array(ht),rt(),b=new Array(ht),q()}}function rt(){if(_)for(var et=0,st=t.length;et<st;++et)s[et]=+n(t[et],et,t)}function q(){if(_)for(var et=0,st=t.length;et<st;++et)b[et]=+v(t[et],et,t)}return null==t&&(t=[]),U.initialize=function(et){_=et,H()},U.links=function(et){return arguments.length?(t=et,H(),U):t},U.id=function(et){return arguments.length?(i=et,U):i},U.iterations=function(et){return arguments.length?(G=+et,U):G},U.strength=function(et){return arguments.length?(n="function"==typeof et?et:Et(+et),rt(),U):n},U.distance=function(et){return arguments.length?(v="function"==typeof et?et:Et(+et),q(),U):v},U}function Ma(t){return t.x}function Aa(t){return t.y}Ze.prototype=function Ca(t,i){var n=new Ze;if(t instanceof Ze)t.each(function(b){n.add(b)});else if(t){var s=-1,v=t.length;if(null==i)for(;++s<v;)n.add(t[s]);else for(;++s<v;)n.add(i(t[s],s,t))}return n}.prototype={constructor:Ze,has:se.has,add:function(t){return this[It+(t+="")]=t,this},remove:se.remove,clear:se.clear,values:se.keys,size:se.size,empty:se.empty,each:se.each};var Sa=10,Na=Math.PI*(3-Math.sqrt(5));function jr(t){var i,n=1,s=.001,v=1-Math.pow(s,1/300),b=0,_=.6,T=Sn(),O=Re(z),G=ln("tick","end");function z(){U(),G.call("tick",i),n<s&&(O.stop(),G.call("end",i))}function U(q){var et,ht,st=t.length;void 0===q&&(q=1);for(var dt=0;dt<q;++dt)for(n+=(b-n)*v,T.each(function(ft){ft(n)}),et=0;et<st;++et)null==(ht=t[et]).fx?ht.x+=ht.vx*=_:(ht.x=ht.fx,ht.vx=0),null==ht.fy?ht.y+=ht.vy*=_:(ht.y=ht.fy,ht.vy=0);return i}function H(){for(var st,q=0,et=t.length;q<et;++q){if((st=t[q]).index=q,null!=st.fx&&(st.x=st.fx),null!=st.fy&&(st.y=st.fy),isNaN(st.x)||isNaN(st.y)){var ht=Sa*Math.sqrt(q),dt=q*Na;st.x=ht*Math.cos(dt),st.y=ht*Math.sin(dt)}(isNaN(st.vx)||isNaN(st.vy))&&(st.vx=st.vy=0)}}function rt(q){return q.initialize&&q.initialize(t),q}return null==t&&(t=[]),H(),i={tick:U,restart:function(){return O.restart(z),i},stop:function(){return O.stop(),i},nodes:function(q){return arguments.length?(t=q,H(),T.each(rt),i):t},alpha:function(q){return arguments.length?(n=+q,i):n},alphaMin:function(q){return arguments.length?(s=+q,i):s},alphaDecay:function(q){return arguments.length?(v=+q,i):+v},alphaTarget:function(q){return arguments.length?(b=+q,i):b},velocityDecay:function(q){return arguments.length?(_=1-q,i):1-_},force:function(q,et){return arguments.length>1?(null==et?T.remove(q):T.set(q,rt(et)),i):T.get(q)},find:function(q,et,st){var ft,xt,wt,kt,Ct,ht=0,dt=t.length;for(null==st?st=1/0:st*=st,ht=0;ht<dt;++ht)(wt=(ft=q-(kt=t[ht]).x)*ft+(xt=et-kt.y)*xt)<st&&(Ct=kt,st=wt);return Ct},on:function(q,et){return arguments.length>1?(G.on(q,et),i):G.on(q)}}}function $r(){var t,i,n,v,s=Et(-30),b=1,_=1/0,T=.81;function O(H){var rt,q=t.length,et=Mn(t,Ma,Aa).visitAfter(z);for(n=H,rt=0;rt<q;++rt)i=t[rt],et.visit(U)}function G(){if(t){var H,q,rt=t.length;for(v=new Array(rt),H=0;H<rt;++H)v[(q=t[H]).index]=+s(q,H,t)}}function z(H){var q,et,ht,dt,ft,rt=0,st=0;if(H.length){for(ht=dt=ft=0;ft<4;++ft)(q=H[ft])&&(et=Math.abs(q.value))&&(rt+=q.value,st+=et,ht+=et*q.x,dt+=et*q.y);H.x=ht/st,H.y=dt/st}else{(q=H).x=q.data.x,q.y=q.data.y;do{rt+=v[q.data.index]}while(q=q.next)}H.value=rt}function U(H,rt,q,et){if(!H.value)return!0;var st=H.x-i.x,ht=H.y-i.y,dt=et-rt,ft=st*st+ht*ht;if(dt*dt/T<ft)return ft<_&&(0===st&&(ft+=(st=Jt())*st),0===ht&&(ft+=(ht=Jt())*ht),ft<b&&(ft=Math.sqrt(b*ft)),i.vx+=st*H.value*n/ft,i.vy+=ht*H.value*n/ft),!0;if(!(H.length||ft>=_)){(H.data!==i||H.next)&&(0===st&&(ft+=(st=Jt())*st),0===ht&&(ft+=(ht=Jt())*ht),ft<b&&(ft=Math.sqrt(b*ft)));do{H.data!==i&&(i.vx+=st*(dt=v[H.data.index]*n/ft),i.vy+=ht*dt)}while(H=H.next)}}return O.initialize=function(H){t=H,G()},O.strength=function(H){return arguments.length?(s="function"==typeof H?H:Et(+H),G(),O):s},O.distanceMin=function(H){return arguments.length?(b=H*H,O):Math.sqrt(b)},O.distanceMax=function(H){return arguments.length?(_=H*H,O):Math.sqrt(_)},O.theta=function(H){return arguments.length?(T=H*H,O):Math.sqrt(T)},O}function Oa(t,i,n){var s,b,_,v=Et(.1);function T(G){for(var z=0,U=s.length;z<U;++z){var H=s[z],rt=H.x-i||1e-6,q=H.y-n||1e-6,et=Math.sqrt(rt*rt+q*q),st=(_[z]-et)*b[z]*G/et;H.vx+=rt*st,H.vy+=q*st}}function O(){if(s){var G,z=s.length;for(b=new Array(z),_=new Array(z),G=0;G<z;++G)_[G]=+t(s[G],G,s),b[G]=isNaN(_[G])?0:+v(s[G],G,s)}}return"function"!=typeof t&&(t=Et(+t)),null==i&&(i=0),null==n&&(n=0),T.initialize=function(G){s=G,O()},T.strength=function(G){return arguments.length?(v="function"==typeof G?G:Et(+G),O(),T):v},T.radius=function(G){return arguments.length?(t="function"==typeof G?G:Et(+G),O(),T):t},T.x=function(G){return arguments.length?(i=+G,T):i},T.y=function(G){return arguments.length?(n=+G,T):n},T}function ka(t){var n,s,v,i=Et(.1);function b(T){for(var z,O=0,G=n.length;O<G;++O)(z=n[O]).vx+=(v[O]-z.x)*s[O]*T}function _(){if(n){var T,O=n.length;for(s=new Array(O),v=new Array(O),T=0;T<O;++T)s[T]=isNaN(v[T]=+t(n[T],T,n))?0:+i(n[T],T,n)}}return"function"!=typeof t&&(t=Et(null==t?0:+t)),b.initialize=function(T){n=T,_()},b.strength=function(T){return arguments.length?(i="function"==typeof T?T:Et(+T),_(),b):i},b.x=function(T){return arguments.length?(t="function"==typeof T?T:Et(+T),_(),b):t},b}function La(t){var n,s,v,i=Et(.1);function b(T){for(var z,O=0,G=n.length;O<G;++O)(z=n[O]).vy+=(v[O]-z.y)*s[O]*T}function _(){if(n){var T,O=n.length;for(s=new Array(O),v=new Array(O),T=0;T<O;++T)s[T]=isNaN(v[T]=+t(n[T],T,n))?0:+i(n[T],T,n)}}return"function"!=typeof t&&(t=Et(null==t?0:+t)),b.initialize=function(T){n=T,_()},b.strength=function(T){return arguments.length?(i="function"==typeof T?T:Et(+T),_(),b):i},b.y=function(T){return arguments.length?(t="function"==typeof T?T:Et(+T),_(),b):t},b}var Ia=r(6728);function Fa(t,i,n){var s=new Ee,v=i;return null==i?(s.restart(t,i,n),s):(i=+i,n=null==n?we():+n,s.restart(function b(_){_+=v,s.restart(b,v+=i,n),t(_)},i,n),s)}const Pa=["linkTemplate"],Ga=["nodeTemplate"],Da=["clusterTemplate"],Ra=["defsTemplate"],Ba=["miniMapNodeTemplate"],ja=["nodeElement"],$a=["linkElement"],za=["*"],de=t=>({$implicit:t});function Va(t,i){if(1&t&&(e.qSk(),e.eu8(0,18)),2&t){const n=e.XpG(2);e.Y8G("ngTemplateOutlet",n.defsTemplate)}}function Ya(t,i){if(1&t&&(e.qSk(),e.nrm(0,"path",19)),2&t){const n=i.$implicit;e.BMQ("d",n.textPath)("id",n.id)}}function Xa(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.clusterTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function Ua(t,i){if(1&t&&(e.qSk(),e.j41(0,"g",24),e.nrm(1,"rect"),e.j41(2,"text",25),e.EFF(3),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(),e.BMQ("width",n.dimension.width)("height",n.dimension.height)("fill",null==n.data?null:n.data.color),e.R7$(),e.BMQ("x",10)("y",n.dimension.height/2),e.R7$(),e.SpI(" ",n.label," ")}}function Ha(t,i){if(1&t){const n=e.RV6();e.qSk(),e.j41(0,"g",20,0),e.bIt("click",function(){const v=e.eBV(n).$implicit,b=e.XpG(2);return e.Njj(b.onClick(v))}),e.DNE(2,Xa,1,4,"ng-container",21)(3,Ua,4,6,"g",22),e.k0s()}if(2&t){const n=i.$implicit,s=e.XpG(2);e.AVh("old-node",s.animate&&s.oldClusters.has(n.id)),e.Y8G("id",n.id),e.BMQ("transform",n.transform),e.R7$(2),e.Y8G("ngIf",s.clusterTemplate&&!n.hidden),e.R7$(),e.Y8G("ngIf",!s.clusterTemplate)}}function Wa(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.nodeTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function Ka(t,i){if(1&t&&(e.qSk(),e.j41(0,"g",28),e.nrm(1,"rect"),e.j41(2,"text",25),e.EFF(3),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(),e.BMQ("width",n.dimension.width)("height",n.dimension.height)("fill",null==n.data?null:n.data.color),e.R7$(),e.BMQ("x",10)("y",n.dimension.height/2),e.R7$(),e.SpI(" ",n.label," ")}}function Qa(t,i){if(1&t){const n=e.RV6();e.qSk(),e.j41(0,"g",26,1),e.bIt("click",function(){const v=e.eBV(n).$implicit,b=e.XpG(2);return e.Njj(b.onClick(v))})("mousedown",function(v){const b=e.eBV(n).$implicit,_=e.XpG(2);return e.Njj(_.onNodeMouseDown(v,b))}),e.DNE(2,Wa,1,4,"ng-container",21)(3,Ka,4,6,"g",27),e.k0s()}if(2&t){const n=i.$implicit,s=e.XpG(2);e.AVh("old-node",s.animate&&s.oldCompoundNodes.has(n.id)),e.Y8G("id",n.id),e.BMQ("transform",n.transform),e.R7$(2),e.Y8G("ngIf",s.nodeTemplate&&!n.hidden),e.R7$(),e.Y8G("ngIf",!s.nodeTemplate)}}function Za(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.linkTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function Ja(t,i){if(1&t&&(e.qSk(),e.nrm(0,"path",31)),2&t){const n=e.XpG().$implicit;e.BMQ("d",n.line)}}function qa(t,i){if(1&t&&(e.qSk(),e.j41(0,"g",29,2),e.DNE(2,Za,1,4,"ng-container",21)(3,Ja,1,1,"path",30),e.k0s()),2&t){const n=i.$implicit,s=e.XpG(2);e.Y8G("id",n.id),e.R7$(2),e.Y8G("ngIf",s.linkTemplate),e.R7$(),e.Y8G("ngIf",!s.linkTemplate)}}function tu(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.nodeTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function eu(t,i){if(1&t&&(e.qSk(),e.nrm(0,"circle",33)),2&t){const n=e.XpG().$implicit;e.BMQ("cx",n.dimension.width/2)("cy",n.dimension.height/2)("fill",null==n.data?null:n.data.color)}}function nu(t,i){if(1&t){const n=e.RV6();e.qSk(),e.j41(0,"g",26,1),e.bIt("click",function(){const v=e.eBV(n).$implicit,b=e.XpG(2);return e.Njj(b.onClick(v))})("mousedown",function(v){const b=e.eBV(n).$implicit,_=e.XpG(2);return e.Njj(_.onNodeMouseDown(v,b))}),e.DNE(2,tu,1,4,"ng-container",21)(3,eu,1,3,"circle",32),e.k0s()}if(2&t){const n=i.$implicit,s=e.XpG(2);e.AVh("old-node",s.animate&&s.oldNodes.has(n.id)),e.Y8G("id",n.id),e.BMQ("transform",n.transform),e.R7$(2),e.Y8G("ngIf",s.nodeTemplate&&!n.hidden),e.R7$(),e.Y8G("ngIf",!s.nodeTemplate)}}function ru(t,i){if(1&t){const n=e.RV6();e.qSk(),e.j41(0,"g",7),e.bIt("touchstart",function(v){e.eBV(n);const b=e.XpG();return e.Njj(b.onTouchStart(v))})("touchend",function(v){e.eBV(n);const b=e.XpG();return e.Njj(b.onTouchEnd(v))}),e.j41(1,"defs"),e.DNE(2,Va,1,1,"ng-container",8)(3,Ya,1,2,"path",9),e.k0s(),e.j41(4,"rect",10),e.bIt("mousedown",function(){e.eBV(n);const v=e.XpG();return e.Njj(v.isPanning=!0)}),e.k0s(),e.SdG(5),e.j41(6,"g",11),e.DNE(7,Ha,4,6,"g",12),e.k0s(),e.j41(8,"g",13),e.DNE(9,Qa,4,6,"g",14),e.k0s(),e.j41(10,"g",15),e.DNE(11,qa,4,3,"g",16),e.k0s(),e.j41(12,"g",17),e.DNE(13,nu,4,6,"g",14),e.k0s()()}if(2&t){const n=e.XpG();e.BMQ("transform",n.transform),e.R7$(2),e.Y8G("ngIf",n.defsTemplate),e.R7$(),e.Y8G("ngForOf",n.graph.edges),e.R7$(),e.BMQ("width",100*n.dims.width)("height",100*n.dims.height)("transform","translate("+50*(-n.dims.width||0)+","+50*(-n.dims.height||0)+")"),e.R7$(3),e.Y8G("ngForOf",n.graph.clusters)("ngForTrackBy",n.trackNodeBy),e.R7$(2),e.Y8G("ngForOf",n.graph.compoundNodes)("ngForTrackBy",n.trackNodeBy),e.R7$(2),e.Y8G("ngForOf",n.graph.edges)("ngForTrackBy",n.trackLinkBy),e.R7$(2),e.Y8G("ngForOf",n.graph.nodes)("ngForTrackBy",n.trackNodeBy)}}function iu(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.miniMapNodeTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function su(t,i){if(1&t&&(e.qSk(),e.eu8(0,23)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.Y8G("ngTemplateOutlet",s.nodeTemplate)("ngTemplateOutletContext",e.eq3(2,de,n))}}function ou(t,i){if(1&t&&(e.qSk(),e.nrm(0,"circle",33)),2&t){const n=e.XpG().$implicit,s=e.XpG(2);e.BMQ("cx",n.dimension.width/2/s.minimapScaleCoefficient)("cy",n.dimension.height/2/s.minimapScaleCoefficient)("fill",null==n.data?null:n.data.color)}}function au(t,i){if(1&t&&(e.qSk(),e.j41(0,"g",39,1),e.DNE(2,iu,1,4,"ng-container",21)(3,su,1,4,"ng-container",21)(4,ou,1,3,"circle",32),e.k0s()),2&t){const n=i.$implicit,s=e.XpG(2);e.AVh("old-node",s.animate&&s.oldNodes.has(n.id)),e.Y8G("id",n.id),e.BMQ("transform",n.transform),e.R7$(2),e.Y8G("ngIf",s.miniMapNodeTemplate),e.R7$(),e.Y8G("ngIf",!s.miniMapNodeTemplate&&s.nodeTemplate),e.R7$(),e.Y8G("ngIf",!s.nodeTemplate&&!s.miniMapNodeTemplate)}}function uu(t,i){if(1&t){const n=e.RV6();e.qSk(),e.j41(0,"g",34)(1,"rect",35),e.bIt("mousedown",function(v){e.eBV(n);const b=e.XpG();return e.Njj(b.onMinimapPanTo(v))}),e.k0s(),e.j41(2,"g")(3,"g",36),e.DNE(4,au,5,7,"g",37),e.k0s(),e.j41(5,"rect",38),e.bIt("mousedown",function(){e.eBV(n);const v=e.XpG();return e.Njj(v.onMinimapDragMouseDown())}),e.k0s()()()}if(2&t){const n=e.XpG();e.BMQ("transform",n.minimapTransform)("clip-path","url(#"+n.minimapClipPathId+")"),e.R7$(),e.BMQ("width",n.graphDims.width/n.minimapScaleCoefficient)("height",n.graphDims.height/n.minimapScaleCoefficient),e.R7$(),e.xc7("transform","translate("+-n.minimapOffsetX/n.minimapScaleCoefficient+"px,"+-n.minimapOffsetY/n.minimapScaleCoefficient+"px)"),e.R7$(),e.xc7("transform","scale("+1/n.minimapScaleCoefficient+")"),e.R7$(),e.Y8G("ngForOf",n.graph.nodes)("ngForTrackBy",n.trackNodeBy),e.R7$(),e.AVh("panning",n.isMinimapPanning),e.BMQ("transform","translate("+n.panOffsetX/n.zoomLevel/-n.minimapScaleCoefficient+","+n.panOffsetY/n.zoomLevel/-n.minimapScaleCoefficient+")")("width",n.width/n.minimapScaleCoefficient/n.zoomLevel)("height",n.height/n.minimapScaleCoefficient/n.zoomLevel)}}const zr={};function Ut(){let t=("0000"+(Math.random()*Math.pow(36,4)|0).toString(36)).slice(-4);return t=`a${t}`,zr[t]?Ut():(zr[t]=!0,t)}var Je=function(t){return t.Both="both",t.Horizontal="horizontal",t.Vertical="vertical",t}(Je||{}),qe=function(t){return t.UpperLeft="UpperLeft",t.UpperRight="UpperRight",t}(qe||{});function hu(t,i,n){n=n||{};let s,v,b,_=null,T=0;function O(){T=!1===n.leading?0:+new Date,_=null,b=t.apply(s,v)}return function(...G){const z=+new Date;!T&&!1===n.leading&&(T=z);const U=i-(z-T);return s=this,v=G,U<=0?(clearTimeout(_),_=null,T=z,b=t.apply(s,v)):!_&&!1!==n.trailing&&(_=setTimeout(O,U)),b}}function fu(t,i){return function(s,v,b){return{configurable:!0,enumerable:b.enumerable,get:function(){return Object.defineProperty(this,v,{configurable:!0,enumerable:b.enumerable,value:hu(b.value,t,i)}),this[v]}}}}const Vr=[{name:"vivid",selectable:!0,group:"Ordinal",domain:["#647c8a","#3f51b5","#2196f3","#00b862","#afdf0a","#a7b61a","#f3e562","#ff9800","#ff5722","#ff4514"]},{name:"natural",selectable:!0,group:"Ordinal",domain:["#bf9d76","#e99450","#d89f59","#f2dfa7","#a5d7c6","#7794b1","#afafaf","#707160","#ba9383","#d9d5c3"]},{name:"cool",selectable:!0,group:"Ordinal",domain:["#a8385d","#7aa3e5","#a27ea8","#aae3f5","#adcded","#a95963","#8796c0","#7ed3ed","#50abcc","#ad6886"]},{name:"fire",selectable:!0,group:"Ordinal",domain:["#ff3d00","#bf360c","#ff8f00","#ff6f00","#ff5722","#e65100","#ffca28","#ffab00"]},{name:"solar",selectable:!0,group:"Continuous",domain:["#fff8e1","#ffecb3","#ffe082","#ffd54f","#ffca28","#ffc107","#ffb300","#ffa000","#ff8f00","#ff6f00"]},{name:"air",selectable:!0,group:"Continuous",domain:["#e1f5fe","#b3e5fc","#81d4fa","#4fc3f7","#29b6f6","#03a9f4","#039be5","#0288d1","#0277bd","#01579b"]},{name:"aqua",selectable:!0,group:"Continuous",domain:["#e0f7fa","#b2ebf2","#80deea","#4dd0e1","#26c6da","#00bcd4","#00acc1","#0097a7","#00838f","#006064"]},{name:"flame",selectable:!1,group:"Ordinal",domain:["#A10A28","#D3342D","#EF6D49","#FAAD67","#FDDE90","#DBED91","#A9D770","#6CBA67","#2C9653","#146738"]},{name:"ocean",selectable:!1,group:"Ordinal",domain:["#1D68FB","#33C0FC","#4AFFFE","#AFFFFF","#FFFC63","#FDBD2D","#FC8A25","#FA4F1E","#FA141B","#BA38D1"]},{name:"forest",selectable:!1,group:"Ordinal",domain:["#55C22D","#C1F33D","#3CC099","#AFFFFF","#8CFC9D","#76CFFA","#BA60FB","#EE6490","#C42A1C","#FC9F32"]},{name:"horizon",selectable:!1,group:"Ordinal",domain:["#2597FB","#65EBFD","#99FDD0","#FCEE4B","#FEFCFA","#FDD6E3","#FCB1A8","#EF6F7B","#CB96E8","#EFDEE0"]},{name:"neons",selectable:!1,group:"Ordinal",domain:["#FF3333","#FF33FF","#CC33FF","#0000FF","#33CCFF","#33FFFF","#33FF66","#CCFF33","#FFCC00","#FF6600"]},{name:"picnic",selectable:!1,group:"Ordinal",domain:["#FAC51D","#66BD6D","#FAA026","#29BB9C","#E96B56","#55ACD2","#B7332F","#2C83C9","#9166B8","#92E7E8"]},{name:"night",selectable:!1,group:"Ordinal",domain:["#2B1B5A","#501356","#183356","#28203F","#391B3C","#1E2B3C","#120634","#2D0432","#051932","#453080","#75267D","#2C507D","#4B3880","#752F7D","#35547D"]},{name:"nightLights",selectable:!1,group:"Ordinal",domain:["#4e31a5","#9c25a7","#3065ab","#57468b","#904497","#46648b","#32118d","#a00fb3","#1052a2","#6e51bd","#b63cc3","#6c97cb","#8671c1","#b455be","#7496c3"]}];class cu{constructor(i,n,s){"string"==typeof i&&(i=Vr.find(v=>v.name===i)),this.colorDomain=i.domain,this.domain=n,this.customColors=s,this.scale=this.generateColorScheme(i,this.domain)}generateColorScheme(i,n){return"string"==typeof i&&(i=Vr.find(s=>s.name===i)),kr().range(i.domain).domain(n)}getColor(i){if(null==i)throw new Error("Value can not be null");if("function"==typeof this.customColors)return this.customColors(i);const n=i.toString();let s;return this.customColors&&this.customColors.length>0&&(s=this.customColors.find(v=>v.name.toLowerCase()===n.toLowerCase())),s?s.value:this.scale(i)}}let du=(()=>{class t{constructor(n,s){this.element=n,this.zone=s,this.visible=new e.bkB,this.isVisible=!1,this.runCheck()}destroy(){clearTimeout(this.timeout)}onVisibilityChange(){this.zone.run(()=>{this.isVisible=!0,this.visible.emit(!0)})}runCheck(){const n=()=>{if(!this.element)return;const{offsetHeight:s,offsetWidth:v}=this.element.nativeElement;s&&v?(clearTimeout(this.timeout),this.onVisibilityChange()):(clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n(),100)}))};this.zone.runOutsideAngular(()=>{this.timeout=setTimeout(()=>n())})}}return t.\u0275fac=function(n){return new(n||t)(e.rXU(e.aKT),e.rXU(e.SKi))},t.\u0275dir=e.FsC({type:t,selectors:[["visibility-observer"]],outputs:{visible:"visible"}}),t})();var tn=function(t){return t.LEFT_TO_RIGHT="LR",t.RIGHT_TO_LEFT="RL",t.TOP_TO_BOTTOM="TB",t.BOTTOM_TO_TOM="BT",t}(tn||{});class Xr{constructor(){this.defaultSettings={orientation:tn.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,curveDistance:20,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),le.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;for(const n in this.dagreGraph._nodes){const s=this.dagreGraph._nodes[n],v=i.nodes.find(b=>b.id===s.id);v.position={x:s.x,y:s.y},v.dimension={width:s.width,height:s.height}}for(const n of i.edges)this.updateEdge(i,n);return i}updateEdge(i,n){const s=i.nodes.find(q=>q.id===n.source),v=i.nodes.find(q=>q.id===n.target),b="BT"===this.settings.orientation||"TB"===this.settings.orientation?"y":"x",_="y"===b?"x":"y",T="y"===b?"height":"width",O=s.position[b]<=v.position[b]?-1:1,G={[_]:s.position[_],[b]:s.position[b]-O*(s.dimension[T]/2)},z={[_]:v.position[_],[b]:v.position[b]+O*(v.dimension[T]/2)},U=this.settings.curveDistance||this.defaultSettings.curveDistance;n.points=[G,{[_]:G[_],[b]:G[b]-O*U},{[_]:z[_],[b]:z[b]+O*U},z];const rt=i.edgeLabels[`${n.source}\x01${n.target}\x01\0`];return rt&&(rt.points=n.points),i}createDagreGraph(i){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new le.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(s=>{const v=Object.assign({},s);return v.width=s.dimension.width,v.height=s.dimension.height,v.x=s.position.x,v.y=s.position.y,v}),this.dagreEdges=i.edges.map(s=>{const v=Object.assign({},s);return v.id||(v.id=Ut()),v});for(const s of this.dagreNodes)s.width||(s.width=20),s.height||(s.height=30),this.dagreGraph.setNode(s.id,s);for(const s of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(s.source,s.target,s,s.id):this.dagreGraph.setEdge(s.source,s.target);return this.dagreGraph}}function pe(t){return"string"==typeof t?{id:t,x:0,y:0}:t}function Ur(t,i){return"number"==typeof i?t[i]:i}const Hr={dagre:class gu{constructor(){this.defaultSettings={orientation:tn.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),le.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;for(const n in this.dagreGraph._nodes){const s=this.dagreGraph._nodes[n],v=i.nodes.find(b=>b.id===s.id);v.position={x:s.x,y:s.y},v.dimension={width:s.width,height:s.height}}return i}updateEdge(i,n){const s=i.nodes.find(O=>O.id===n.source),v=i.nodes.find(O=>O.id===n.target),b=s.position.y<=v.position.y?-1:1;return n.points=[{x:s.position.x,y:s.position.y-b*(s.dimension.height/2)},{x:v.position.x,y:v.position.y+b*(v.dimension.height/2)}],i}createDagreGraph(i){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new le.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(s=>{const v=Object.assign({},s);return v.width=s.dimension.width,v.height=s.dimension.height,v.x=s.position.x,v.y=s.position.y,v}),this.dagreEdges=i.edges.map(s=>{const v=Object.assign({},s);return v.id||(v.id=Ut()),v});for(const s of this.dagreNodes)s.width||(s.width=20),s.height||(s.height=30),this.dagreGraph.setNode(s.id,s);for(const s of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(s.source,s.target,s,s.id):this.dagreGraph.setEdge(s.source,s.target);return this.dagreGraph}},dagreCluster:class vu{constructor(){this.defaultSettings={orientation:tn.LEFT_TO_RIGHT,marginX:20,marginY:20,edgePadding:100,rankPadding:100,nodePadding:50,multigraph:!0,compound:!0},this.settings={}}run(i){this.createDagreGraph(i),le.layout(this.dagreGraph),i.edgeLabels=this.dagreGraph._edgeLabels;const n=s=>{const v=this.dagreGraph._nodes[s.id];return{...s,position:{x:v.x,y:v.y},dimension:{width:v.width,height:v.height}}};return i.clusters=(i.clusters||[]).map(n),i.nodes=i.nodes.map(n),i}updateEdge(i,n){const s=i.nodes.find(O=>O.id===n.source),v=i.nodes.find(O=>O.id===n.target),b=s.position.y<=v.position.y?-1:1;return n.points=[{x:s.position.x,y:s.position.y-b*(s.dimension.height/2)},{x:v.position.x,y:v.position.y+b*(v.dimension.height/2)}],i}createDagreGraph(i){const n=Object.assign({},this.defaultSettings,this.settings);this.dagreGraph=new le.graphlib.Graph({compound:n.compound,multigraph:n.multigraph}),this.dagreGraph.setGraph({rankdir:n.orientation,marginx:n.marginX,marginy:n.marginY,edgesep:n.edgePadding,ranksep:n.rankPadding,nodesep:n.nodePadding,align:n.align,acyclicer:n.acyclicer,ranker:n.ranker,multigraph:n.multigraph,compound:n.compound}),this.dagreGraph.setDefaultEdgeLabel(()=>({})),this.dagreNodes=i.nodes.map(s=>{const v=Object.assign({},s);return v.width=s.dimension.width,v.height=s.dimension.height,v.x=s.position.x,v.y=s.position.y,v}),this.dagreClusters=i.clusters||[],this.dagreEdges=i.edges.map(s=>{const v=Object.assign({},s);return v.id||(v.id=Ut()),v});for(const s of this.dagreNodes)this.dagreGraph.setNode(s.id,s);for(const s of this.dagreClusters)this.dagreGraph.setNode(s.id,s),s.childNodeIds.forEach(v=>{this.dagreGraph.setParent(v,s.id)});for(const s of this.dagreEdges)n.multigraph?this.dagreGraph.setEdge(s.source,s.target,s,s.id):this.dagreGraph.setEdge(s.source,s.target);return this.dagreGraph}},dagreNodesOnly:Xr,d3ForceDirected:class yu{constructor(){this.defaultSettings={force:jr().force("charge",$r().strength(-150)).force("collide",Fr(5)),forceLink:Br().id(i=>i.id).distance(()=>100)},this.settings={},this.outputGraph$=new Cn.B}run(i){return this.inputGraph=i,this.d3Graph={nodes:[...this.inputGraph.nodes.map(n=>({...n}))],edges:[...this.inputGraph.edges.map(n=>({...n}))]},this.outputGraph={nodes:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&this.settings.force.nodes(this.d3Graph.nodes).force("link",this.settings.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}updateEdge(i,n){const s=Object.assign({},this.defaultSettings,this.settings);return s.force&&s.force.nodes(this.d3Graph.nodes).force("link",s.forceLink.links(this.d3Graph.edges)).alpha(.5).restart().on("tick",()=>{this.outputGraph$.next(this.d3GraphToOutputGraph(this.d3Graph))}),this.outputGraph$.asObservable()}d3GraphToOutputGraph(i){return this.outputGraph.nodes=this.d3Graph.nodes.map(n=>({...n,id:n.id||Ut(),position:{x:n.x,y:n.y},dimension:{width:n.dimension&&n.dimension.width||20,height:n.dimension&&n.dimension.height||20},transform:`translate(${n.x-(n.dimension&&n.dimension.width||20)/2||0}, ${n.y-(n.dimension&&n.dimension.height||20)/2||0})`})),this.outputGraph.edges=this.d3Graph.edges.map(n=>({...n,source:pe(n.source).id,target:pe(n.target).id,points:[{x:pe(n.source).x,y:pe(n.source).y},{x:pe(n.target).x,y:pe(n.target).y}]})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(i,n){this.settings.force.alphaTarget(.3).restart();const s=this.d3Graph.nodes.find(v=>v.id===i.id);s&&(this.draggingStart={x:n.x-s.x,y:n.y-s.y},s.fx=n.x-this.draggingStart.x,s.fy=n.y-this.draggingStart.y)}onDrag(i,n){if(!i)return;const s=this.d3Graph.nodes.find(v=>v.id===i.id);s&&(s.fx=n.x-this.draggingStart.x,s.fy=n.y-this.draggingStart.y)}onDragEnd(i,n){if(!i)return;const s=this.d3Graph.nodes.find(v=>v.id===i.id);s&&(this.settings.force.alphaTarget(0),s.fx=void 0,s.fy=void 0)}},colaForceDirected:class xu{constructor(){this.defaultSettings={force:(0,Ia.d3adaptor)({...m,...o,...p}).linkDistance(150).avoidOverlaps(!0),viewDimensions:{width:600,height:600}},this.settings={},this.outputGraph$=new Cn.B}run(i){return this.inputGraph=i,this.inputGraph.clusters||(this.inputGraph.clusters=[]),this.internalGraph={nodes:[...this.inputGraph.nodes.map(n=>({...n,width:n.dimension?n.dimension.width:20,height:n.dimension?n.dimension.height:20}))],groups:[...this.inputGraph.clusters.map(n=>({padding:5,groups:n.childNodeIds.map(s=>this.inputGraph.clusters.findIndex(v=>v.id===s)).filter(s=>s>=0),leaves:n.childNodeIds.map(s=>this.inputGraph.nodes.findIndex(v=>v.id===s)).filter(s=>s>=0)}))],links:[...this.inputGraph.edges.map(n=>{const s=this.inputGraph.nodes.findIndex(b=>n.source===b.id),v=this.inputGraph.nodes.findIndex(b=>n.target===b.id);if(-1!==s&&-1!==v)return{...n,source:s,target:v}}).filter(n=>!!n)],groupLinks:[...this.inputGraph.edges.map(n=>{const s=this.inputGraph.nodes.findIndex(b=>n.source===b.id),v=this.inputGraph.nodes.findIndex(b=>n.target===b.id);if(!(s>=0&&v>=0))return n}).filter(n=>!!n)]},this.outputGraph={nodes:[],clusters:[],edges:[],edgeLabels:[]},this.outputGraph$.next(this.outputGraph),this.settings=Object.assign({},this.defaultSettings,this.settings),this.settings.force&&(this.settings.force=this.settings.force.nodes(this.internalGraph.nodes).groups(this.internalGraph.groups).links(this.internalGraph.links).alpha(.5).on("tick",()=>{this.settings.onTickListener&&this.settings.onTickListener(this.internalGraph),this.outputGraph$.next(this.internalGraphToOutputGraph(this.internalGraph))}),this.settings.viewDimensions&&(this.settings.force=this.settings.force.size([this.settings.viewDimensions.width,this.settings.viewDimensions.height])),this.settings.forceModifierFn&&(this.settings.force=this.settings.forceModifierFn(this.settings.force)),this.settings.force.start()),this.outputGraph$.asObservable()}updateEdge(i,n){const s=Object.assign({},this.defaultSettings,this.settings);return s.force&&s.force.start(),this.outputGraph$.asObservable()}internalGraphToOutputGraph(i){return this.outputGraph.nodes=i.nodes.map(n=>({...n,id:n.id||Ut(),position:{x:n.x,y:n.y},dimension:{width:n.dimension&&n.dimension.width||20,height:n.dimension&&n.dimension.height||20},transform:`translate(${n.x-(n.dimension&&n.dimension.width||20)/2||0}, ${n.y-(n.dimension&&n.dimension.height||20)/2||0})`})),this.outputGraph.edges=i.links.map(n=>{const s=Ur(i.nodes,n.source),v=Ur(i.nodes,n.target);return{...n,source:s.id,target:v.id,points:[s.bounds.rayIntersection(v.bounds.cx(),v.bounds.cy()),v.bounds.rayIntersection(s.bounds.cx(),s.bounds.cy())]}}).concat(i.groupLinks.map(n=>{const s=i.nodes.find(T=>T.id===n.source),v=i.nodes.find(T=>T.id===n.target),b=s||i.groups.find(T=>T.id===n.source),_=v||i.groups.find(T=>T.id===n.target);return{...n,source:b.id,target:_.id,points:[b.bounds.rayIntersection(_.bounds.cx(),_.bounds.cy()),_.bounds.rayIntersection(b.bounds.cx(),b.bounds.cy())]}})),this.outputGraph.clusters=i.groups.map((n,s)=>({...this.inputGraph.clusters[s],dimension:{width:n.bounds?n.bounds.width():20,height:n.bounds?n.bounds.height():20},position:{x:n.bounds?n.bounds.x+n.bounds.width()/2:0,y:n.bounds?n.bounds.y+n.bounds.height()/2:0}})),this.outputGraph.edgeLabels=this.outputGraph.edges,this.outputGraph}onDragStart(i,n){const s=this.outputGraph.nodes.findIndex(b=>b.id===i.id),v=this.internalGraph.nodes[s];v&&(this.draggingStart={x:v.x-n.x,y:v.y-n.y},v.fixed=1,this.settings.force.start())}onDrag(i,n){if(!i)return;const s=this.outputGraph.nodes.findIndex(b=>b.id===i.id),v=this.internalGraph.nodes[s];v&&(v.x=this.draggingStart.x+n.x,v.y=this.draggingStart.y+n.y)}onDragEnd(i,n){if(!i)return;const s=this.outputGraph.nodes.findIndex(b=>b.id===i.id),v=this.internalGraph.nodes[s];v&&(v.fixed=0)}}};let Wr=(()=>{class t{getLayout(n){if(Hr[n])return new Hr[n];throw new Error(`Unknown layout type '${n}'`)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac}),t})(),bu=(()=>{class t{constructor(){this.mouseWheelUp=new e.bkB,this.mouseWheelDown=new e.bkB}onMouseWheelChrome(n){this.mouseWheelFunc(n)}onMouseWheelFirefox(n){this.mouseWheelFunc(n)}onWheel(n){this.mouseWheelFunc(n)}onMouseWheelIE(n){this.mouseWheelFunc(n)}mouseWheelFunc(n){window.event&&(n=window.event);const s=Math.max(-1,Math.min(1,n.wheelDelta||-n.detail||n.deltaY||n.deltaX)),b=n.wheelDelta?s<0:s>0;(n.wheelDelta?s>0:s<0)?this.mouseWheelUp.emit(n):b&&this.mouseWheelDown.emit(n),n.returnValue=!1,n.preventDefault&&n.preventDefault()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=e.FsC({type:t,selectors:[["","mouseWheel",""]],hostBindings:function(n,s){1&n&&e.bIt("mousewheel",function(b){return s.onMouseWheelChrome(b)})("DOMMouseScroll",function(b){return s.onMouseWheelFirefox(b)})("wheel",function(b){return s.onWheel(b)})("onmousewheel",function(b){return s.onMouseWheelIE(b)})},outputs:{mouseWheelUp:"mouseWheelUp",mouseWheelDown:"mouseWheelDown"}}),t})();var en=function(t){return t.Init="init",t.Subscribe="subscribe",t.Transform="transform",t}(en||{});let wu=(()=>{class t{constructor(n,s,v,b){this.el=n,this.zone=s,this.cd=v,this.layoutService=b,this.nodes=[],this.clusters=[],this.compoundNodes=[],this.links=[],this.activeEntries=[],this.draggingEnabled=!0,this.panningEnabled=!0,this.panningAxis=Je.Both,this.enableZoom=!0,this.zoomSpeed=.1,this.minZoomLevel=.1,this.maxZoomLevel=4,this.autoZoom=!1,this.panOnZoom=!0,this.animate=!1,this.autoCenter=!1,this.enableTrackpadSupport=!1,this.showMiniMap=!1,this.miniMapMaxWidth=100,this.miniMapPosition=qe.UpperRight,this.scheme="cool",this.animations=!0,this.deferDisplayUntilPosition=!1,this.centerNodesOnPositionChange=!0,this.enablePreUpdateTransform=!0,this.select=new e.bkB,this.activate=new e.bkB,this.deactivate=new e.bkB,this.zoomChange=new e.bkB,this.clickHandler=new e.bkB,this.stateChange=new e.bkB,this.isMouseMoveCalled=!1,this.graphSubscription=new Tn.yU,this.isPanning=!1,this.isDragging=!1,this.initialized=!1,this.graphDims={width:0,height:0},this._oldLinks=[],this.oldNodes=new Set,this.oldClusters=new Set,this.oldCompoundNodes=new Set,this.transformationMatrix={a:1,c:0,e:0,b:0,d:1,f:0},this._touchLastX=null,this._touchLastY=null,this.minimapScaleCoefficient=3,this.minimapOffsetX=0,this.minimapOffsetY=0,this.isMinimapPanning=!1,this.destroy$=new Cn.B,this.groupResultsBy=_=>_.label}get zoomLevel(){return this.transformationMatrix.a}set zoomLevel(n){this.zoomTo(Number(n))}get panOffsetX(){return this.transformationMatrix.e}set panOffsetX(n){this.panTo(Number(n),null)}get panOffsetY(){return this.transformationMatrix.f}set panOffsetY(n){this.panTo(null,Number(n))}ngOnInit(){this.update$&&this.update$.pipe((0,We.Q)(this.destroy$)).subscribe(()=>{this.update()}),this.center$&&this.center$.pipe((0,We.Q)(this.destroy$)).subscribe(()=>{this.center()}),this.zoomToFit$&&this.zoomToFit$.pipe((0,We.Q)(this.destroy$)).subscribe(n=>{this.zoomToFit(n||{})}),this.panToNode$&&this.panToNode$.pipe((0,We.Q)(this.destroy$)).subscribe(n=>{this.panToNodeId(n)}),this.minimapClipPathId=`minimapClip${Ut()}`,this.stateChange.emit({state:en.Subscribe})}ngOnChanges(n){this.basicUpdate();const{layoutSettings:v}=n;this.setLayout(this.layout),v&&this.setLayoutSettings(this.layoutSettings),this.update()}setLayout(n){this.initialized=!1,n||(n="dagre"),"string"==typeof n&&(this.layout=this.layoutService.getLayout(n),this.setLayoutSettings(this.layoutSettings))}setLayoutSettings(n){this.layout&&"string"!=typeof this.layout&&(this.layout.settings=n)}ngOnDestroy(){this.unbindEvents(),this.visibilityObserver&&(this.visibilityObserver.visible.unsubscribe(),this.visibilityObserver.destroy()),this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.bindWindowResizeEvent(),this.visibilityObserver=new du(this.el,this.zone),this.visibilityObserver.visible.subscribe(this.update.bind(this)),setTimeout(()=>this.update())}update(){this.basicUpdate(),this.curve||(this.curve=$i.beta(1)),this.zone.run(()=>{this.dims=function lu({width:t,height:i}){let n=t,s=i;return n=Math.max(0,n),s=Math.max(0,s),{width:Math.floor(n),height:Math.floor(s)}}({width:this.width,height:this.height}),this.seriesDomain=this.getSeriesDomain(),this.setColors(),this.createGraph(),this.updateTransform(),this.initialized||this.stateChange.emit({state:en.Init}),this.initialized=!0})}createGraph(){this.graphSubscription.unsubscribe(),this.graphSubscription=new Tn.yU;const n=s=>(s.meta||(s.meta={}),s.id||(s.id=Ut()),s.dimension?s.meta.forceDimensions=void 0===s.meta.forceDimensions||s.meta.forceDimensions:(s.dimension={width:this.nodeWidth?this.nodeWidth:30,height:this.nodeHeight?this.nodeHeight:30},s.meta.forceDimensions=!1),s.position||(s.position={x:0,y:0},this.deferDisplayUntilPosition&&(s.hidden=!0)),s.data=s.data?s.data:{},s);this.graph={nodes:this.nodes.length>0?[...this.nodes].map(n):[],clusters:this.clusters&&this.clusters.length>0?[...this.clusters].map(n):[],compoundNodes:this.compoundNodes&&this.compoundNodes.length>0?[...this.compoundNodes].map(n):[],edges:this.links.length>0?[...this.links].map(s=>(s.id||(s.id=Ut()),s)):[]},requestAnimationFrame(()=>this.draw())}draw(){if(!this.layout||"string"==typeof this.layout)return;this.applyNodeDimensions();const n=this.layout.run(this.graph),s=n instanceof Cr.c?n:(0,Tr.of)(n);this.graphSubscription.add(s.subscribe(v=>{this.graph=v,this.tick()})),(0!==this.graph.nodes.length||0!==this.graph.compoundNodes?.length)&&s.pipe((0,Io.$)()).subscribe(()=>this.applyNodeDimensions())}tick(){const n=new Set;this.graph.nodes.map(_=>{_.transform=`translate(${_.position.x-(this.centerNodesOnPositionChange?_.dimension.width/2:0)||0}, ${_.position.y-(this.centerNodesOnPositionChange?_.dimension.height/2:0)||0})`,_.data||(_.data={}),_.data.color=this.colors.getColor(this.groupResultsBy(_)),this.deferDisplayUntilPosition&&(_.hidden=!1),n.add(_.id)});const s=new Set,v=new Set;(this.graph.clusters||[]).map(_=>{_.transform=`translate(${_.position.x-(this.centerNodesOnPositionChange?_.dimension.width/2:0)||0}, ${_.position.y-(this.centerNodesOnPositionChange?_.dimension.height/2:0)||0})`,_.data||(_.data={}),_.data.color=this.colors.getColor(this.groupResultsBy(_)),this.deferDisplayUntilPosition&&(_.hidden=!1),s.add(_.id)}),(this.graph.compoundNodes||[]).map(_=>{_.transform=`translate(${_.position.x-(this.centerNodesOnPositionChange?_.dimension.width/2:0)||0}, ${_.position.y-(this.centerNodesOnPositionChange?_.dimension.height/2:0)||0})`,_.data||(_.data={}),_.data.color=this.colors.getColor(this.groupResultsBy(_)),this.deferDisplayUntilPosition&&(_.hidden=!1),v.add(_.id)}),setTimeout(()=>{this.oldNodes=n,this.oldClusters=s,this.oldCompoundNodes=v},500);const b=[];for(const _ in this.graph.edgeLabels){const T=this.graph.edgeLabels[_],O=_.replace(/[^\w-]*/g,""),G=this.layout&&"string"!=typeof this.layout&&this.layout.settings&&this.layout.settings.multigraph;let z=this._oldLinks.find(G?st=>`${st.source}${st.target}${st.id}`===O:st=>`${st.source}${st.target}`===O);const U=this.graph.edges.find(G?st=>`${st.source}${st.target}${st.id}`===O:st=>`${st.source}${st.target}`===O);z?z.data&&U&&U.data&&JSON.stringify(z.data)!==JSON.stringify(U.data)&&(z.data=U.data):z=U||T,z.oldLine=z.line;const H=T.points,rt=this.generateLine(H),q=Object.assign({},z);q.line=rt,q.points=H,this.updateMidpointOnEdge(q,H);const et=H[Math.floor(H.length/2)];et&&(q.textTransform=`translate(${et.x||0},${et.y||0})`),q.textAngle=0,q.oldLine||(q.oldLine=q.line),this.calcDominantBaseline(q),b.push(q)}this.graph.edges=b,this.graph.edges&&(this._oldLinks=this.graph.edges.map(_=>{const T=Object.assign({},_);return T.oldLine=_.line,T})),this.updateMinimap(),this.autoZoom&&this.zoomToFit(),this.autoCenter&&this.center(),requestAnimationFrame(()=>this.redrawLines()),this.cd.markForCheck()}getMinimapTransform(){switch(this.miniMapPosition){case qe.UpperLeft:return"";case qe.UpperRight:return"translate("+(this.dims.width-this.graphDims.width/this.minimapScaleCoefficient)+",0)";default:return""}}updateGraphDims(){let n=1/0,s=-1/0,v=1/0,b=-1/0;for(let _=0;_<this.graph.nodes.length;_++){const T=this.graph.nodes[_];n=T.position.x<n?T.position.x:n,v=T.position.y<v?T.position.y:v,s=T.position.x+T.dimension.width>s?T.position.x+T.dimension.width:s,b=T.position.y+T.dimension.height>b?T.position.y+T.dimension.height:b}n-=100,v-=100,s+=100,b+=100,this.graphDims.width=s-n,this.graphDims.height=b-v,this.minimapOffsetX=n,this.minimapOffsetY=v}updateMinimap(){this.graph.nodes&&this.graph.nodes.length&&(this.updateGraphDims(),this.miniMapMaxWidth&&(this.minimapScaleCoefficient=this.graphDims.width/this.miniMapMaxWidth),this.miniMapMaxHeight&&(this.minimapScaleCoefficient=Math.max(this.minimapScaleCoefficient,this.graphDims.height/this.miniMapMaxHeight)),this.minimapTransform=this.getMinimapTransform())}applyNodeDimensions(){this.nodeElements&&this.nodeElements.length&&this.nodeElements.map(n=>{const s=n.nativeElement,v=this.graph.nodes.find(_=>_.id===s.id);if(!v)return;let b;try{if(b=s.getBBox(),!b.width||!b.height)return}catch{return}if(v.dimension.height=this.nodeHeight?v.dimension.height&&v.meta.forceDimensions?v.dimension.height:this.nodeHeight:v.dimension.height&&v.meta.forceDimensions?v.dimension.height:b.height,this.nodeMaxHeight&&(v.dimension.height=Math.max(v.dimension.height,this.nodeMaxHeight)),this.nodeMinHeight&&(v.dimension.height=Math.min(v.dimension.height,this.nodeMinHeight)),this.nodeWidth)v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:this.nodeWidth;else if(s.getElementsByTagName("text").length){let _;try{for(const T of s.getElementsByTagName("text")){const O=T.getBBox();_?(O.width>_.width&&(_.width=O.width),O.height>_.height&&(_.height=O.height)):_=O}}catch{return}v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:_.width+20}else v.dimension.width=v.dimension.width&&v.meta.forceDimensions?v.dimension.width:b.width;this.nodeMaxWidth&&(v.dimension.width=Math.max(v.dimension.width,this.nodeMaxWidth)),this.nodeMinWidth&&(v.dimension.width=Math.min(v.dimension.width,this.nodeMinWidth))})}redrawLines(n=this.animate){this.linkElements.map(s=>{const v=this.graph.edges.find(b=>b.id===s.nativeElement.id);v&&(Rn(s.nativeElement).select(".line").attr("d",v.oldLine).transition().ease(Un).duration(n?500:0).attr("d",v.line),Rn(this.el.nativeElement).select(`#${v.id}`).attr("d",v.oldTextPath).transition().ease(Un).duration(n?500:0).attr("d",v.textPath),this.updateMidpointOnEdge(v,v.points))})}calcDominantBaseline(n){const s=n.points[0],v=n.points[n.points.length-1];n.oldTextPath=n.textPath,v.x<s.x?(n.dominantBaseline="text-before-edge",n.textPath=this.generateLine([...n.points].reverse())):(n.dominantBaseline="text-after-edge",n.textPath=n.line)}generateLine(n){return Vn().x(v=>v.x).y(v=>v.y).curve(this.curve)(n)}onZoom(n,s){if(this.enableTrackpadSupport&&!n.ctrlKey)return void this.pan(-1*n.deltaX,-1*n.deltaY);const v=1+("in"===s?this.zoomSpeed:-this.zoomSpeed),b=this.zoomLevel*v;if(!(b<=this.minZoomLevel||b>=this.maxZoomLevel)&&this.enableZoom)if(!0===this.panOnZoom&&n){const _=n.clientX,T=n.clientY,O=this.el.nativeElement.querySelector("svg"),G=O.querySelector("g.chart"),z=O.createSVGPoint();z.x=_,z.y=T;const U=z.matrixTransform(G.getScreenCTM().inverse());this.pan(U.x,U.y,!0),this.zoom(v),this.pan(-U.x,-U.y,!0)}else this.zoom(v)}pan(n,s,v=!1){const b=v?1:this.zoomLevel;this.transformationMatrix=Se(this.transformationMatrix,Nr(n/b,s/b)),this.updateTransform()}panTo(n,s){null==n||isNaN(n)||null==s||isNaN(s)||(this.transformationMatrix=Se(this.transformationMatrix,Nr((-this.panOffsetX-n*this.zoomLevel+this.dims.width/2)/this.zoomLevel,(-this.panOffsetY-s*this.zoomLevel+this.dims.height/2)/this.zoomLevel)),this.updateTransform())}zoom(n){this.transformationMatrix=Se(this.transformationMatrix,function Qo(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function Ko(t){return typeof t>"u"}(i)&&(i=t),{a:t,c:0,e:0,b:0,d:i,f:0}}(n,n)),this.zoomChange.emit(this.zoomLevel),this.updateTransform()}zoomTo(n){this.transformationMatrix.a=isNaN(n)?this.transformationMatrix.a:Number(n),this.transformationMatrix.d=isNaN(n)?this.transformationMatrix.d:Number(n),this.zoomChange.emit(this.zoomLevel),this.enablePreUpdateTransform&&this.updateTransform(),this.update()}onDrag(n){if(!this.draggingEnabled)return;const s=this.draggingNode;this.layout&&"string"!=typeof this.layout&&this.layout.onDrag&&this.layout.onDrag(s,n),s.position.x+=n.movementX/this.zoomLevel,s.position.y+=n.movementY/this.zoomLevel,s.transform=`translate(${s.position.x-(this.centerNodesOnPositionChange?s.dimension.width/2:0)}, ${s.position.y-(this.centerNodesOnPositionChange?s.dimension.height/2:0)})`;for(const _ of this.graph.edges)if((_.target===s.id||_.source===s.id||_.target.id===s.id||_.source.id===s.id)&&this.layout&&"string"!=typeof this.layout){const T=this.layout.updateEdge(this.graph,_),O=T instanceof Cr.c?T:(0,Tr.of)(T);this.graphSubscription.add(O.subscribe(G=>{this.graph=G,this.redrawEdge(_)}))}this.redrawLines(!1),this.updateMinimap()}redrawEdge(n){const s=this.generateLine(n.points);this.calcDominantBaseline(n),n.oldLine=n.line,n.line=s}updateTransform(){this.transform=function Jo(t){return function Sr(t){return"matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")"}(t)}(function ea(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e10;return{a:Math.round(t.a*i)/i,b:Math.round(t.b*i)/i,c:Math.round(t.c*i)/i,d:Math.round(t.d*i)/i,e:Math.round(t.e*i)/i,f:Math.round(t.f*i)/i}}(this.transformationMatrix,100)),this.stateChange.emit({state:en.Transform})}onClick(n){this.select.emit(n)}onActivate(n){this.activeEntries.indexOf(n)>-1||(this.activeEntries=[n,...this.activeEntries],this.activate.emit({value:n,entries:this.activeEntries}))}onDeactivate(n){const s=this.activeEntries.indexOf(n);this.activeEntries.splice(s,1),this.activeEntries=[...this.activeEntries],this.deactivate.emit({value:n,entries:this.activeEntries})}getSeriesDomain(){return this.nodes.map(n=>this.groupResultsBy(n)).reduce((n,s)=>-1!==n.indexOf(s)?n:n.concat([s]),[]).sort()}trackLinkBy(n,s){return s.id}trackNodeBy(n,s){return s.id}setColors(){this.colors=new cu(this.scheme,this.seriesDomain,this.customColors)}onMouseMove(n){this.isMouseMoveCalled=!0,(this.isPanning||this.isMinimapPanning)&&this.panningEnabled?this.panWithConstraints(this.panningAxis,n):this.isDragging&&this.draggingEnabled&&this.onDrag(n)}onMouseDown(n){this.isMouseMoveCalled=!1}graphClick(n){this.isMouseMoveCalled||this.clickHandler.emit(n)}onTouchStart(n){this._touchLastX=n.changedTouches[0].clientX,this._touchLastY=n.changedTouches[0].clientY,this.isPanning=!0}onTouchMove(n){if(this.isPanning&&this.panningEnabled){const s=n.changedTouches[0].clientX,v=n.changedTouches[0].clientY,b=s-this._touchLastX,_=v-this._touchLastY;this._touchLastX=s,this._touchLastY=v,this.pan(b,_)}}onTouchEnd(n){this.isPanning=!1}onMouseUp(n){this.isDragging=!1,this.isPanning=!1,this.isMinimapPanning=!1,this.layout&&"string"!=typeof this.layout&&this.layout.onDragEnd&&this.layout.onDragEnd(this.draggingNode,n)}onNodeMouseDown(n,s){this.draggingEnabled&&(this.isDragging=!0,this.draggingNode=s,this.layout&&"string"!=typeof this.layout&&this.layout.onDragStart&&this.layout.onDragStart(s,n))}onMinimapDragMouseDown(){this.isMinimapPanning=!0}onMinimapPanTo(n){this.panTo((n.offsetX-(this.dims.width-(this.graphDims.width+this.minimapOffsetX)/this.minimapScaleCoefficient))*this.minimapScaleCoefficient,(n.offsetY+this.minimapOffsetY/this.minimapScaleCoefficient)*this.minimapScaleCoefficient),this.isMinimapPanning=!0}center(){this.panTo(this.graphDims.width/2,this.graphDims.height/2)}zoomToFit(n){this.updateGraphDims();let b=Math.min(this.dims.height/this.graphDims.height,this.dims.width/this.graphDims.width,1);b<this.minZoomLevel&&(b=this.minZoomLevel),b>this.maxZoomLevel&&(b=this.maxZoomLevel),(!0===n?.force||b!==this.zoomLevel)&&(this.zoomLevel=b,!0!==n?.autoCenter&&this.updateTransform(),!0===n?.autoCenter&&this.center(),this.zoomChange.emit(this.zoomLevel))}panToNodeId(n){const s=this.graph.nodes.find(v=>v.id===n);s&&this.panTo(s.position.x,s.position.y)}getCompoundNodeChildren(n){return this.nodes.filter(s=>n.includes(s.id))}panWithConstraints(n,s){let v=s.movementX,b=s.movementY;switch(this.isMinimapPanning&&(v=-this.minimapScaleCoefficient*v*this.zoomLevel,b=-this.minimapScaleCoefficient*b*this.zoomLevel),n){case Je.Horizontal:this.pan(v,0);break;case Je.Vertical:this.pan(0,b);break;default:this.pan(v,b)}}updateMidpointOnEdge(n,s){if(n&&s)if(s.length%2==1)n.midPoint=s[Math.floor(s.length/2)];else if(this.layout?.settings?.properties?.["elk.direction"])this._calcMidPointElk(n,s);else{const v=s[s.length/2],b=s[s.length/2-1];n.midPoint={x:(v.x+b.x)/2,y:(v.y+b.y)/2}}}_calcMidPointElk(n,s){let v=null,b=null,_=null,T=null;const O=this.layout.settings?.properties["elk.direction"];s.some("RIGHT"===O?z=>z.y!==s[0].y:z=>z.x!==s[0].x)?(v=s[s.length-1],b=s[s.length-2],_=s[s.length-1],T=s[s.length-2]):"RIGHT"===O?(v=s[0],b=s[s.length-1],_=s[s.length/2],T=s[s.length/2-1]):(v=s[s.length/2],b=s[s.length/2-1],_=s[0],T=s[s.length-1]),n.midPoint={x:(v.x+b.x)/2,y:(_.y+T.y)/2}}basicUpdate(){if(this.view)this.width=this.view[0],this.height=this.view[1];else{const n=this.getContainerDims();n&&(this.width=n.width,this.height=n.height)}this.width||(this.width=600),this.height||(this.height=400),this.width=Math.floor(this.width),this.height=Math.floor(this.height),this.cd&&this.cd.markForCheck()}getContainerDims(){let n,s;const v=this.el.nativeElement;if(null!==v.parentNode){const b=v.parentNode.getBoundingClientRect();n=b.width,s=b.height}return n&&s?{width:n,height:s}:null}hasGraphDims(){return this.graphDims.width>0&&this.graphDims.height>0}hasNodeDims(){return this.graph.nodes?.every(n=>n.dimension.width>0&&n.dimension.height>0)}hasCompoundNodeDims(){return this.graph.compoundNodes?.every(n=>n.dimension.width>0&&n.dimension.height>0)}hasDims(){return this.hasGraphDims()&&this.hasNodeDims()&&this.hasCompoundNodeDims()}unbindEvents(){this.resizeSubscription&&this.resizeSubscription.unsubscribe()}bindWindowResizeEvent(){const s=(0,Lo.R)(window,"resize").pipe(function $o(t,i=Ro){return(0,Bo.N)((n,s)=>{let v=null,b=null,_=null;const T=()=>{if(v){v.unsubscribe(),v=null;const G=b;b=null,s.next(G)}};function O(){const G=_+t,z=i.now();if(z<G)return v=this.schedule(void 0,G-z),void s.add(v);T()}n.subscribe((0,jo._)(s,G=>{b=G,_=i.now(),v||(v=i.schedule(O,t),s.add(v))},()=>{T(),s.complete()},void 0,()=>{b=v=null}))})}(200)).subscribe(v=>{this.update(),this.cd&&this.cd.markForCheck()});this.resizeSubscription=s}}return t.\u0275fac=function(n){return new(n||t)(e.rXU(e.aKT),e.rXU(e.SKi),e.rXU(e.gRc),e.rXU(Wr))},t.\u0275cmp=e.VBU({type:t,selectors:[["ngx-graph"]],contentQueries:function(n,s,v){if(1&n&&(e.wni(v,Pa,5),e.wni(v,Ga,5),e.wni(v,Da,5),e.wni(v,Ra,5),e.wni(v,Ba,5)),2&n){let b;e.mGM(b=e.lsd())&&(s.linkTemplate=b.first),e.mGM(b=e.lsd())&&(s.nodeTemplate=b.first),e.mGM(b=e.lsd())&&(s.clusterTemplate=b.first),e.mGM(b=e.lsd())&&(s.defsTemplate=b.first),e.mGM(b=e.lsd())&&(s.miniMapNodeTemplate=b.first)}},viewQuery:function(n,s){if(1&n&&(e.GBs(ja,5),e.GBs($a,5)),2&n){let v;e.mGM(v=e.lsd())&&(s.nodeElements=v),e.mGM(v=e.lsd())&&(s.linkElements=v)}},hostBindings:function(n,s){1&n&&e.bIt("mousemove",function(b){return s.onMouseMove(b)},!1,e.EBC)("mousedown",function(b){return s.onMouseDown(b)},!1,e.EBC)("click",function(b){return s.graphClick(b)},!1,e.EBC)("touchmove",function(b){return s.onTouchMove(b)},!1,e.EBC)("mouseup",function(b){return s.onMouseUp(b)},!1,e.EBC)},inputs:{nodes:"nodes",clusters:"clusters",compoundNodes:"compoundNodes",links:"links",activeEntries:"activeEntries",curve:"curve",draggingEnabled:"draggingEnabled",nodeHeight:"nodeHeight",nodeMaxHeight:"nodeMaxHeight",nodeMinHeight:"nodeMinHeight",nodeWidth:"nodeWidth",nodeMinWidth:"nodeMinWidth",nodeMaxWidth:"nodeMaxWidth",panningEnabled:"panningEnabled",panningAxis:"panningAxis",enableZoom:"enableZoom",zoomSpeed:"zoomSpeed",minZoomLevel:"minZoomLevel",maxZoomLevel:"maxZoomLevel",autoZoom:"autoZoom",panOnZoom:"panOnZoom",animate:"animate",autoCenter:"autoCenter",update$:"update$",center$:"center$",zoomToFit$:"zoomToFit$",panToNode$:"panToNode$",layout:"layout",layoutSettings:"layoutSettings",enableTrackpadSupport:"enableTrackpadSupport",showMiniMap:"showMiniMap",miniMapMaxWidth:"miniMapMaxWidth",miniMapMaxHeight:"miniMapMaxHeight",miniMapPosition:"miniMapPosition",view:"view",scheme:"scheme",customColors:"customColors",animations:"animations",deferDisplayUntilPosition:"deferDisplayUntilPosition",centerNodesOnPositionChange:"centerNodesOnPositionChange",enablePreUpdateTransform:"enablePreUpdateTransform",groupResultsBy:"groupResultsBy",zoomLevel:"zoomLevel",panOffsetX:"panOffsetX",panOffsetY:"panOffsetY"},outputs:{select:"select",activate:"activate",deactivate:"deactivate",zoomChange:"zoomChange",clickHandler:"clickHandler",stateChange:"stateChange"},features:[e.OA$],ngContentSelectors:za,decls:6,vars:11,consts:[["clusterElement",""],["nodeElement",""],["linkElement",""],["mouseWheel","",1,"ngx-graph-outer",3,"mouseWheelUp","mouseWheelDown"],[1,"ngx-graph"],["class","graph chart",3,"touchstart","touchend",4,"ngIf"],["class","minimap",4,"ngIf"],[1,"graph","chart",3,"touchstart","touchend"],[3,"ngTemplateOutlet",4,"ngIf"],["class","text-path",4,"ngFor","ngForOf"],[1,"panning-rect",3,"mousedown"],[1,"clusters"],["class","node-group",3,"old-node","id","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"compound-nodes"],["class","node-group",3,"old-node","id","click","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"links"],["class","link-group",3,"id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"nodes"],[3,"ngTemplateOutlet"],[1,"text-path"],[1,"node-group",3,"click","id"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","node cluster",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"node","cluster"],["alignment-baseline","central"],[1,"node-group",3,"click","mousedown","id"],["class","node compound-node",4,"ngIf"],[1,"node","compound-node"],[1,"link-group",3,"id"],["class","edge",4,"ngIf"],[1,"edge"],["r","10",4,"ngIf"],["r","10"],[1,"minimap"],[1,"minimap-background",3,"mousedown"],[1,"minimap-nodes"],["class","node-group",3,"old-node","id",4,"ngFor","ngForOf","ngForTrackBy"],[1,"minimap-drag",3,"mousedown"],[1,"node-group",3,"id"]],template:function(n,s){1&n&&(e.NAR(),e.j41(0,"div",3),e.bIt("mouseWheelUp",function(b){return s.onZoom(b,"in")})("mouseWheelDown",function(b){return s.onZoom(b,"out")}),e.qSk(),e.j41(1,"svg",4),e.DNE(2,ru,14,14,"g",5),e.j41(3,"clipPath"),e.nrm(4,"rect"),e.k0s(),e.DNE(5,uu,6,15,"g",6),e.k0s()()),2&n&&(e.xc7("width",s.width,"px"),e.Y8G("@animationState","active")("@.disabled",!s.animations),e.R7$(),e.BMQ("width",s.width)("height",s.height),e.R7$(),e.Y8G("ngIf",s.initialized&&s.graph),e.R7$(),e.BMQ("id",s.minimapClipPathId),e.R7$(),e.BMQ("width",s.graphDims.width/s.minimapScaleCoefficient)("height",s.graphDims.height/s.minimapScaleCoefficient),e.R7$(),e.Y8G("ngIf",s.showMiniMap))},dependencies:[bu,f.bT,f.T3,f.Sq],styles:[".minimap .minimap-background{fill:#0000001a}.minimap .minimap-drag{fill:#0003;stroke:#fff;stroke-width:1px;stroke-dasharray:2px;stroke-dashoffset:2px;cursor:pointer}.minimap .minimap-drag.panning{fill:#0000004d}.minimap .minimap-nodes{opacity:.5;pointer-events:none}.graph{-webkit-user-select:none;-moz-user-select:none;user-select:none}.graph .edge{stroke:#666;fill:none}.graph .edge .edge-label{stroke:none;font-size:12px;fill:#251e1e}.graph .panning-rect{fill:#0000;cursor:move}.graph .node-group.old-node{transition:transform .5s ease-in-out}.graph .node-group .node:focus{outline:none}.graph .compound-node rect{opacity:.5}.graph .cluster rect{opacity:.2}\n"],encapsulation:2,data:{animation:[(0,N.hZ)("animationState",[(0,N.kY)(":enter",[(0,N.iF)({opacity:0}),(0,N.i0)("500ms 100ms",(0,N.iF)({opacity:1}))])])]},changeDetection:0}),(0,A.Cg)([fu(500)],t.prototype,"updateMinimap",null),t})(),Eu=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[Wr],imports:[[f.MD]]}),t})(),_u=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[[f.MD],Eu]}),t})();var nn=r(4412);let Nn=(()=>{class t{constructor(){this.zoneDimensions$=new nn.t([0,0]),this.data$=new nn.t(null),this.dataChild$=new nn.t(null),this.dataYoutubers$=new nn.t(null)}calculateDimensions(n){const{width:s,height:v}=n.getBoundingClientRect();this.zoneDimensions$.next([s-5,v-8])}setDataFrom(n){this.data$.next({angular:{id:"first",label:"A",data:{title:"Angular \u{1f381}",text:"Inicio de conversacion"},action:{more:"Ver ruta",src:"angular",key:"childs"}}}[n])}setDataFromChild(n){this.dataChild$.next({angular:{nodes:[{id:"c1",label:"C1",data:{title:"Go ANGULAR!",img:"https://i.imgur.com/Ajzts77.png",text:"Menu del chatbot "}},{id:"c2",label:"C2",data:{title:"TS \u{1f918}",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Typescript_logo_2020.svg/1200px-Typescript_logo_2020.svg.png",text:"Comprar"},action:{more:"Ver ruta",src:"ts",key:"youtubers"}},{id:"c3",label:"C3",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Ver Carrito"}},{id:"c4",label:"C4",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Final"}},{id:"c5",label:"C5",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Consulta confirmacion"}},{id:"c6",label:"C6",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Direccion de envio"}},{id:"c7",label:"C7",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Observaciones"}},{id:"c8",label:"C8",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Verificar"}},{id:"c9",label:"C9",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Eliminar"}}],links:[{id:"a",source:"first",target:"c1",label:"is parent of"},{id:"b",source:"c1",target:"c3",label:"custom label"},{id:"d",source:"c1",target:"c2",label:"custom label"},{id:"e",source:"c1",target:"c4",label:"custom label"},{id:"f",source:"c2",target:"c5",label:"custom label"},{id:"g",source:"c5",target:"c3",label:"custom label"},{id:"h",source:"c5",target:"c6",label:"custom label"},{id:"i",source:"c6",target:"c7",label:"custom label"},{id:"j",source:"c7",target:"c8",label:"custom label"},{id:"k",source:"c8",target:"c4",label:"custom label"},{id:"l",source:"c3",target:"c1",label:"custom label"},{id:"m",source:"c5",target:"c9",label:"custom label"},{id:"n",source:"c9",target:"c1",label:"custom label"},{id:"o",source:"c5",target:"c1",label:"custom label"}]}}[n])}setDataYoutubers(n){this.dataYoutubers$.next({angular:{nodes:[{id:"c1",label:"C1",data:{title:"Go ANGULAR!",img:"https://i.imgur.com/Ajzts77.png",text:"<b>Angular</b> es un framework opensource desarrollado por Google para facilitar la creaci\xf3n y programaci\xf3n de aplicaciones web de una sola p\xe1gina, las webs SPA (Single Page Application)."}},{id:"c2",label:"C2",data:{title:"TS \u{1f918}",img:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/4c/Typescript_logo_2020.svg/1200px-Typescript_logo_2020.svg.png",text:"Learn one way to build applications with Angular and reuse your code and abilities to build apps for any deployment target. For web, mobile web."}},{id:"c3",label:"C3",data:{title:"Alan \u{1f918}",img:"https://cdn.iconscout.com/icon/free/png-256/javascript-2752148-2284965.png",text:"Learn one way to build applications with Angular"}}],links:[{id:"a",source:"first",target:"c1",label:"is parent of"},{id:"b",source:"c1",target:"c3",label:"custom label"},{id:"d",source:"c1",target:"c2",label:"custom label"},{id:"e",source:"c2",target:"c3",label:"first link"}]},ts:{nodes:[{id:"ts1",label:"TS1",data:{title:"Go ANGULAR!",img:"https://alan-buscaglia-portfolio.netlify.app/static/media/who_am_i_2.2b08c9ab.jpg",text:"<b>Angular</b> es un framework opensource desarrollado por Google para facilitar la creaci\xf3n y programaci\xf3n de aplicaciones web de una sola p\xe1gina, las webs SPA (Single Page Application)."}},{id:"ts2",label:"TS2",data:{title:"Go ANGULAR!",img:"https://avatars.githubusercontent.com/u/7414771?v=4",text:"<b>Angular</b> es un framework opensource desarrollado por Google para facilitar la creaci\xf3n y programaci\xf3n de aplicaciones web de una sola p\xe1gina, las webs SPA (Single Page Application)."}}],links:[{id:"t1",source:"c2",target:"ts1",label:"is parent of"},{id:"t2",source:"c2",target:"ts2",label:"is parent of"}]}}[n])}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Cu=(()=>{class t{constructor(){this.flowChartService=(0,e.WQX)(Nn)}ngOnInit(){}callChilds(n,s){"youtubers"===s?this.flowChartService.setDataYoutubers(n):this.flowChartService.setDataFromChild(n)}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-flow-card-node"]],inputs:{dataIn:"dataIn"},standalone:!0,features:[e.aNF],decls:9,vars:1,consts:[[1,"wrapper-node","animate__animated","animate__bounceIn"],[1,"node-template"],[1,"w-full","cursor-pointer","bg-card","flex","flex-col","items-start","justify-center","p-2","rounded-md","hover:bg-background",2,"height","70px"],[1,"text","text-xs","text-foreground"],[1,"border-dashed","border-border","w-full"],[1,"flex","flex-row","flex-wrap","gap-1","py-1"],[1,"focus-visible:ring-ring","inline-flex","h-6","items-center","justify-start","whitespace-nowrap","rounded-md","border","border-primary","bg-background","px-3","text-xs","font-medium","text-primary","shadow-sm","transition-colors","focus-visible:outline-none","focus-visible:ring-1","disabled:pointer-events-none","disabled:opacity-50"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.k0s(),e.nrm(5,"hr",4),e.j41(6,"div",5)(7,"div",6),e.EFF(8," Inicio "),e.k0s()()()()()),2&s&&(e.R7$(4),e.JRh(null==v.dataIn||null==v.dataIn.data?null:v.dataIn.data.text))},dependencies:[f.MD]})}return t})();function rn(t,i){this._context=t,this._t=i}rn.prototype={areaStart(){this._line=0},areaEnd(){this._line=NaN},lineStart(){this._x=this._y=NaN,this._point=0},lineEnd(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{let n,s,v,b;if(this._t<=0)n=.25*Math.abs(t-this._x),s=.25*Math.abs(i-this._y),v=this._y<i?this._y+s:this._y-s,b=this._y>i?i+s:i-s,this._context.quadraticCurveTo(this._x,this._y,this._x,v),this._context.lineTo(this._x,b),this._context.quadraticCurveTo(this._x,i,this._x+n,i),this._context.lineTo(t-n,i);else{const _=this._x*(1-this._t)+t*this._t;n=.25*Math.abs(t-_),s=.25*Math.abs(i-this._y),v=this._y<i?this._y+s:this._y-s,b=this._y>i?i+s:i-s,this._context.quadraticCurveTo(_,this._y,_,v),this._context.lineTo(_,b),this._context.quadraticCurveTo(_,i,_+n,i),this._context.lineTo(t-n,i)}break}}this._x=t,this._y=i}};const Tu=function(t){return new rn(t,1)},Mu=["myChart"];function Au(t,i){if(1&t&&(e.qSk(),e.j41(0,"g",5)(1,"foreignObject",6),e.joV(),e.j41(2,"div",7),e.nrm(3,"app-flow-card-node",8),e.k0s()()()),2&t){const n=i.$implicit;e.R7$(3),e.Y8G("dataIn",n)}}function Su(t,i){1&t&&(e.qSk(),e.j41(0,"g",9),e.nrm(1,"path",10)(2,"text",11),e.k0s())}function Nu(t,i){if(1&t&&(e.j41(0,"ngx-graph",4,0),e.DNE(2,Au,4,1,"ng-template",null,1,e.C5r)(4,Su,3,0,"ng-template",null,2,e.C5r),e.k0s()),2&t){const n=e.XpG();e.Y8G("view",n.dimensions)("links",n.dataLink)("nodes",n.dataNode)("curve",n.curve)("layoutSettings",n.layoutSettings)}}let Kr=(()=>{class t{constructor(n,s){this.flowChartService=n,this.cd=s,this.dimensions=[0,0],this.showRender=!1,this.dataNode=[],this.dataLink=[],this.curve=Tu,this.layoutSettings={orientation:"LR"},this.layout=new Xr}ngOnInit(){this.flowChartService.zoneDimensions$.subscribe(([n,s])=>{let b=s;s<200&&(b=200),n&&s&&(this.dimensions=[n,b],this.showRender=!0,this.cd.detectChanges(),this.callAfterLoad())}),this.flowChartService.data$.subscribe(n=>{n&&(this.dataNode=[n])}),this.flowChartService.dataChild$.subscribe(n=>{n&&(this.dataNode=[...this.dataNode,...n.nodes],this.dataLink=[...this.dataLink,...n.links],this.cd.detectChanges(),this.callAfterLoad())})}callAfterLoad(){console.log("Modificaciones"),this.child.layout.updateEdge=function(n,s){const v=n.nodes.find(G=>G.id===s.source),b=n.nodes.find(G=>G.id===s.target),T={x:v.position.x-v.dimension.height/2*-1,i:!0,y:v.position.y},O={x:b.position.x-b.dimension.height/2*-1-100,i:!0,y:b.position.y};return s.points=[T,O],console.log([T,O]),n},this.child.generateLine=function(n){return Vn().x(v=>{let b=0;return void 0===v.i&&(b=0),v.x+b}).y(v=>v.y).curve(this.curve)(n)}}static#t=this.\u0275fac=function(s){return new(s||t)(e.rXU(Nn),e.rXU(e.gRc))};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-view-flow"]],viewQuery:function(s,v){if(1&s&&e.GBs(Mu,5),2&s){let b;e.mGM(b=e.lsd())&&(v.child=b.first)}},standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["myChart",""],["nodeTemplate",""],["linkTemplate",""],["class","bg-background ","layout","dagreCluster",3,"view","links","nodes","curve","layoutSettings",4,"ngIf"],["layout","dagreCluster",1,"bg-background",3,"view","links","nodes","curve","layoutSettings"],[1,"node"],["width","180","height","70"],["xmlns","http://www.w3.org/1999/xhtml"],[3,"dataIn"],[1,"edge"],["stroke-width","2","marker-end","url(#arrow)",1,"line"],["text-anchor","middle",1,"edge-label"]],template:function(s,v){1&s&&e.DNE(0,Nu,6,5,"ngx-graph",3),2&s&&e.Y8G("ngIf",v.showRender)},dependencies:[f.MD,f.bT,_u,wu,Cu]})}return t})();var Qr=r(6903);let Zr=(()=>{class t{close(){this.sidebarOrderListener?.close()}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-node-flow"]],inputs:{sidebarOrderListener:"sidebarOrderListener"},standalone:!0,features:[e.aNF],decls:52,vars:0,consts:[[1,"flex","w-screen","md:w-96","bg-background","h-full","overflow-auto","gap-2","px-3","flex-col","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],[1,"sticky","top-0","flex","flex-col","bg-background"],[1,"flex","relative","flex-row","items-center","gap-2","py-3","justify-start"],[1,"text-lg","text-foreground"],[1,"absolute","cursor-pointer","right-0","inline-flex","w-fit","justify-center","rounded-md","bg-background","px-3","py-2","text-sm","font-semibold","text-foreground","shadow-sm","ring-1","ring-inset","ring-foreground","hover:bg-card","sm:mt-0","sm:w-fit",3,"click"],[1,"border-dashed","border-border"],[1,"w-full","mx-auto"],[1,"flex","w-full","overflow-auto","scrollbar-thumb-rounded","scrollbar-track-rounded","grow","scrollbar-thin","scrollbar-track-transparent","scrollbar-thumb-muted"],["onclick","selectTab('tab1')","id","tab1-btn",1,"py-2","px-4","text-sm","font-medium","text-primary","border-b-2","border-primary","hover:border-primary","hover:text-primary","focus:outline-none","active-tab"],["onclick","selectTab('tab2')","id","tab2-btn",1,"py-2","px-4","text-sm","font-medium","text-muted-foreground","border-b-2","border-transparent","hover:border-primary","hover:text-primary","focus:outline-none"],["onclick","selectTab('tab3')","id","tab3-btn",1,"py-2","px-4","text-sm","font-medium","text-muted-foreground","border-b-2","border-transparent","hover:border-primary","hover:text-primary","focus:outline-none"],[1,"flex","py-2","flex-col","gap-2"],[1,"text-xs","text-foreground"],[1,"text-xs","text-muted-foreground"],["type","text"],[1,"w-full","bg-primary","text-white","p-2","rounded-md"],[1,"w-full","bg-red-600","text-white","p-2","rounded-md"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),e.EFF(4,"Nuevo Nodo"),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return v.close()}),e.EFF(6," X "),e.k0s()(),e.nrm(7,"hr",5),e.k0s(),e.j41(8,"div",6)(9,"div",7)(10,"button",8),e.EFF(11," Seleccion "),e.k0s(),e.j41(12,"button",9),e.EFF(13," Informativo "),e.k0s(),e.j41(14,"button",9),e.EFF(15," Lista Agregar "),e.k0s(),e.j41(16,"button",10),e.EFF(17," Lista Mostrar "),e.k0s(),e.j41(18,"button",10),e.EFF(19," Lista Eliminar "),e.k0s(),e.j41(20,"button",10),e.EFF(21," Seleccion "),e.k0s(),e.j41(22,"button",10),e.EFF(23," Pregunta "),e.k0s(),e.j41(24,"button",10),e.EFF(25," Fin "),e.k0s()(),e.nrm(26,"hr",5),e.j41(27,"div",11)(28,"span",12),e.EFF(29,"Seleccion"),e.k0s(),e.j41(30,"span",13),e.EFF(31,"Nodo que muestra un listado de opciones en la cual deriva a siguientes nodos"),e.k0s(),e.nrm(32,"hr",5),e.j41(33,"span",13),e.EFF(34,"Nombre de Nodo"),e.k0s(),e.nrm(35,"input",14)(36,"hr",5),e.j41(37,"span",12),e.EFF(38,"Lista de opciones"),e.k0s(),e.j41(39,"span",13),e.EFF(40,"Vacia"),e.k0s(),e.nrm(41,"hr",5),e.j41(42,"span",12),e.EFF(43,"Lista de conexiones"),e.k0s(),e.j41(44,"span",13),e.EFF(45,"Vacia"),e.k0s()(),e.nrm(46,"hr",5),e.j41(47,"div",11)(48,"button",15),e.EFF(49," Generar Cambios "),e.k0s(),e.j41(50,"button",16),e.EFF(51," Cancelar Cambios "),e.k0s()()()())},dependencies:[f.MD],encapsulation:2})}return t})(),Ou=(()=>{class t{constructor(){this.forms=[]}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-modal-beta"]],inputs:{forms:"forms",data:"data"},standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[[1,"flex","flex-col","items-center","justify-start","w-full"],[1,"flex","justify-center","items-center","w-full"],["src","assets/icons/heroicons/outline/information-circle.svg",3,"svgClass"],[1,"text-foreground"]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",1),e.nrm(2,"svg-icon",2),e.k0s(),e.j41(3,"span",3),e.EFF(4,"Ejemplo de la interfaz que se va a llegar a usar, el flujo no es editable aun"),e.k0s()()),2&s&&(e.R7$(2),e.Y8G("svgClass","h-20 w-20 text-red-600"))},dependencies:[f.MD,h.DM],encapsulation:2})}return t})();function ku(t,i){}const Lu=[{path:"",component:(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-warehouse"]],standalone:!0,features:[e.aNF],decls:1,vars:0,template:function(s,v){1&s&&e.nrm(0,"router-outlet")},dependencies:[g.n3],encapsulation:2})}return t})(),children:[{path:"list",component:w},{path:"item",component:(()=>{class t{constructor(){this.onShowItem=!1,this.activatedRouter=(0,e.WQX)(g.nX),this.flowChartService=(0,e.WQX)(Nn),this.cdr=(0,e.WQX)(e.gRc),this.id=null,this.modalService=(0,e.WQX)(l.B),this.sidebarOrderListener={close:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.cdr.detectChanges();const n=this.viewFlowElementRef?.nativeElement;this.flowChartService.calculateDimensions(n),this.cdr.detectChanges()},submit:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.cdr.detectChanges();const n=this.viewFlowElementRef?.nativeElement;this.flowChartService.calculateDimensions(n),this.cdr.detectChanges()},cancel:()=>{this.dcWrapper.viewContainerRef.clear(),this.onShowItem=!1,this.cdr.detectChanges();const n=this.viewFlowElementRef?.nativeElement;this.flowChartService.calculateDimensions(n),this.cdr.detectChanges()}}}ngOnInit(){const n=this.activatedRouter.snapshot.queryParams;this.id=n.id?n.id:null,this.modalService.open(Ou,{title:"Alerta",size:"sm",forms:null,data:null,icon:"assets/icons/heroicons/outline/information-circle.svg",actions:[]})}ngAfterViewInit(){const n=this.dcWrapper.viewContainerRef;n.clear(),n.createComponent(Zr).instance.sidebarOrderListener=this.sidebarOrderListener,this.onShowItem=!0;const v=this.viewFlowElementRef?.nativeElement;this.flowChartService.calculateDimensions(v),this.flowChartService.setDataFrom("angular"),this.flowChartService.setDataFromChild("angular"),this.cdr.detectChanges()}onOrderSelected(){const n=this.dcWrapper.viewContainerRef;n.clear(),n.createComponent(Zr).instance.sidebarOrderListener=this.sidebarOrderListener,this.onShowItem=!0}static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275cmp=e.VBU({type:t,selectors:[["app-item"]],viewQuery:function(s,v){if(1&s&&(e.GBs(Kr,5,e.aKT),e.GBs(Qr.l,5)),2&s){let b;e.mGM(b=e.lsd())&&(v.viewFlowElementRef=b.first),e.mGM(b=e.lsd())&&(v.dcWrapper=b.first)}},standalone:!0,features:[e.aNF],decls:7,vars:2,consts:[[3,"classList"],[1,"flex","flex-col","md:flex-row","gap-5","justify-between"],[1,"w-full"],[1,"w-full","bg-muted"],["dcWrapper",""]],template:function(s,v){1&s&&(e.j41(0,"div",0)(1,"div",0),e.nrm(2,"app-item-header"),e.j41(3,"div",1),e.nrm(4,"app-flow-detail",2)(5,"app-view-flow",3),e.k0s()(),e.DNE(6,ku,0,0,"ng-template",4),e.k0s()),2&s&&(e.Y8G("classList",v.onShowItem?"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-auto  h-full ":"mx-auto flex flex-col md:flex-row  px-0 justify-between md:w-full overflow-hidden  h-full "),e.R7$(),e.Y8G("classList",v.onShowItem?" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-0 md:py-4":" flex-col px-4  sm:px-8 overflow-auto scrollbar-thumb-rounded scrollbar-track-rounded grow  scrollbar-thin scrollbar-track-transparent scrollbar-thumb-muted py-4"))},dependencies:[f.MD,C,M,Kr,Qr.l],encapsulation:2})}return t})()},{path:"",redirectTo:"list",pathMatch:"full"}]},{path:"**",redirectTo:"errors/404"}];let Iu=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275mod=e.$C({type:t});static#n=this.\u0275inj=e.G2t({imports:[g.iI.forChild(Lu),g.iI]})}return t})(),Fu=(()=>{class t{static#t=this.\u0275fac=function(s){return new(s||t)};static#e=this.\u0275mod=e.$C({type:t});static#n=this.\u0275inj=e.G2t({imports:[Iu]})}return t})()},9881:(y,E,r)=>{y.exports={graphlib:r(1986),layout:r(7363),debug:r(7022),util:{time:r(2361).time,notime:r(2361).notime},version:r(9233)}},3833:(y,E,r)=>{"use strict";var o=r(8128),m=r(3802);y.exports={run:function p(e){var u="greedy"===e.graph().acyclicer?m(e,function a(c){return function(l){return c.edge(l).weight}}(e)):function g(e){var u=[],a={},c={};return o.forEach(e.nodes(),function l(h){o.has(c,h)||(c[h]=!0,a[h]=!0,o.forEach(e.outEdges(h),function(d){o.has(a,d.w)?u.push(d):l(d.w)}),delete a[h])}),u}(e);o.forEach(u,function(c){var l=e.edge(c);e.removeEdge(c),l.forwardName=c.name,l.reversed=!0,e.setEdge(c.w,c.v,l,o.uniqueId("rev"))})},undo:function f(e){o.forEach(e.edges(),function(u){var a=e.edge(u);if(a.reversed){e.removeEdge(u);var c=a.forwardName;delete a.reversed,delete a.forwardName,e.setEdge(u.w,u.v,a,c)}})}}},1716:(y,E,r)=>{var o=r(8128),m=r(2361);function g(f,e,u,a,c,l){var d=c[e][l-1],x=m.addDummyNode(f,"border",{width:0,height:0,rank:l,borderType:e},u);c[e][l]=x,f.setParent(x,a),d&&f.setEdge(d,x,{weight:1})}y.exports=function p(f){o.forEach(f.children(),function e(u){var a=f.children(u),c=f.node(u);if(a.length&&o.forEach(a,e),o.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var l=c.minRank,h=c.maxRank+1;l<h;++l)g(f,"borderLeft","_bl",u,c,l),g(f,"borderRight","_br",u,c,l)}})}},1469:(y,E,r)=>{"use strict";var o=r(8128);function g(l){o.forEach(l.nodes(),function(h){f(l.node(h))}),o.forEach(l.edges(),function(h){f(l.edge(h))})}function f(l){var h=l.width;l.width=l.height,l.height=h}function u(l){l.y=-l.y}function c(l){var h=l.x;l.x=l.y,l.y=h}y.exports={adjust:function m(l){var h=l.graph().rankdir.toLowerCase();("lr"===h||"rl"===h)&&g(l)},undo:function p(l){var h=l.graph().rankdir.toLowerCase();("bt"===h||"rl"===h)&&function e(l){o.forEach(l.nodes(),function(h){u(l.node(h))}),o.forEach(l.edges(),function(h){var d=l.edge(h);o.forEach(d.points,u),o.has(d,"y")&&u(d)})}(l),("lr"===h||"rl"===h)&&(function a(l){o.forEach(l.nodes(),function(h){c(l.node(h))}),o.forEach(l.edges(),function(h){var d=l.edge(h);o.forEach(d.points,c),o.has(d,"x")&&c(d)})}(l),g(l))}}},3676:y=>{function E(){var m={};m._next=m._prev=m,this._sentinel=m}function r(m){m._prev._next=m._next,m._next._prev=m._prev,delete m._next,delete m._prev}function o(m,p){if("_next"!==m&&"_prev"!==m)return p}y.exports=E,E.prototype.dequeue=function(){var m=this._sentinel,p=m._prev;if(p!==m)return r(p),p},E.prototype.enqueue=function(m){var p=this._sentinel;m._prev&&m._next&&r(m),m._next=p._next,p._next._prev=m,p._next=m,m._prev=p},E.prototype.toString=function(){for(var m=[],p=this._sentinel,g=p._prev;g!==p;)m.push(JSON.stringify(g,o)),g=g._prev;return"["+m.join(", ")+"]"}},7022:(y,E,r)=>{var o=r(8128),m=r(2361),p=r(1986).Graph;y.exports={debugOrdering:function g(f){var e=m.buildLayerMatrix(f),u=new p({compound:!0,multigraph:!0}).setGraph({});return o.forEach(f.nodes(),function(a){u.setNode(a,{label:a}),u.setParent(a,"layer"+f.node(a).rank)}),o.forEach(f.edges(),function(a){u.setEdge(a.v,a.w,{},a.name)}),o.forEach(e,function(a,c){u.setNode("layer"+c,{rank:"same"}),o.reduce(a,function(h,d){return u.setEdge(h,d,{style:"invis"}),d})}),u}}},1986:(y,E,r)=>{var o;try{o=r(9031)}catch{}o||(o=window.graphlib),y.exports=o},3802:(y,E,r)=>{var o=r(8128),m=r(1986).Graph,p=r(3676);y.exports=function f(l,h){if(l.nodeCount()<=1)return[];var d=function a(l,h){var d=new m,x=0,w=0;o.forEach(l.nodes(),function(A){d.setNode(A,{v:A,in:0,out:0})}),o.forEach(l.edges(),function(A){var N=d.edge(A.v,A.w)||0,S=h(A);d.setEdge(A.v,A.w,N+S),w=Math.max(w,d.node(A.v).out+=S),x=Math.max(x,d.node(A.w).in+=S)});var C=o.range(w+x+3).map(function(){return new p}),M=x+1;return o.forEach(d.nodes(),function(A){c(C,M,d.node(A))}),{graph:d,buckets:C,zeroIdx:M}}(l,h||g),x=function e(l,h,d){for(var M,x=[],w=h[h.length-1],C=h[0];l.nodeCount();){for(;M=C.dequeue();)u(l,h,d,M);for(;M=w.dequeue();)u(l,h,d,M);if(l.nodeCount())for(var A=h.length-2;A>0;--A)if(M=h[A].dequeue()){x=x.concat(u(l,h,d,M,!0));break}}return x}(d.graph,d.buckets,d.zeroIdx);return o.flatten(o.map(x,function(w){return l.outEdges(w.v,w.w)}),!0)};var g=o.constant(1);function u(l,h,d,x,w){var C=w?[]:void 0;return o.forEach(l.inEdges(x.v),function(M){var A=l.edge(M),N=l.node(M.v);w&&C.push({v:M.v,w:M.w}),N.out-=A,c(h,d,N)}),o.forEach(l.outEdges(x.v),function(M){var A=l.edge(M),S=l.node(M.w);S.in-=A,c(h,d,S)}),l.removeNode(x.v),C}function c(l,h,d){d.out?d.in?l[d.out-d.in+h].enqueue(d):l[l.length-1].enqueue(d):l[0].enqueue(d)}},7363:(y,E,r)=>{"use strict";var o=r(8128),m=r(3833),p=r(1778),g=r(1660),f=r(2361).normalizeRanks,e=r(4883),u=r(2361).removeEmptyRanks,a=r(5274),c=r(1716),l=r(1469),h=r(8902),d=r(1949),x=r(2361),w=r(1986).Graph;y.exports=function C(W,Z){var nt=Z&&Z.debugTiming?x.time:x.notime;nt("layout",function(){var at=nt("  buildLayoutGraph",function(){return function L(W){var Z=new w({multigraph:!0,compound:!0}),nt=pt(W.graph());return Z.setGraph(o.merge({},S,ut(nt,N),o.pick(nt,P))),o.forEach(W.nodes(),function(at){var lt=pt(W.node(at));Z.setNode(at,o.defaults(ut(lt,$),V)),Z.setParent(at,W.parent(at))}),o.forEach(W.edges(),function(at){var lt=pt(W.edge(at));Z.setEdge(at,o.merge({},X,ut(lt,j),o.pick(lt,k)))}),Z}(W)});nt("  runLayout",function(){!function M(W,Z){Z("    makeSpaceForEdgeLabels",function(){!function I(W){var Z=W.graph();Z.ranksep/=2,o.forEach(W.edges(),function(nt){var at=W.edge(nt);at.minlen*=2,"c"!==at.labelpos.toLowerCase()&&("TB"===Z.rankdir||"BT"===Z.rankdir?at.width+=at.labeloffset:at.height+=at.labeloffset)})}(W)}),Z("    removeSelfEdges",function(){!function it(W){o.forEach(W.edges(),function(Z){if(Z.v===Z.w){var nt=W.node(Z.v);nt.selfEdges||(nt.selfEdges=[]),nt.selfEdges.push({e:Z,label:W.edge(Z)}),W.removeEdge(Z)}})}(W)}),Z("    acyclic",function(){m.run(W)}),Z("    nestingGraph.run",function(){a.run(W)}),Z("    rank",function(){g(x.asNonCompoundGraph(W))}),Z("    injectEdgeLabelProxies",function(){!function F(W){o.forEach(W.edges(),function(Z){var nt=W.edge(Z);if(nt.width&&nt.height){var at=W.node(Z.v),lt=W.node(Z.w);x.addDummyNode(W,"edge-proxy",{rank:(lt.rank-at.rank)/2+at.rank,e:Z},"_ep")}})}(W)}),Z("    removeEmptyRanks",function(){u(W)}),Z("    nestingGraph.cleanup",function(){a.cleanup(W)}),Z("    normalizeRanks",function(){f(W)}),Z("    assignRankMinMax",function(){!function D(W){var Z=0;o.forEach(W.nodes(),function(nt){var at=W.node(nt);at.borderTop&&(at.minRank=W.node(at.borderTop).rank,at.maxRank=W.node(at.borderBottom).rank,Z=o.max(Z,at.maxRank))}),W.graph().maxRank=Z}(W)}),Z("    removeEdgeLabelProxies",function(){!function Y(W){o.forEach(W.nodes(),function(Z){var nt=W.node(Z);"edge-proxy"===nt.dummy&&(W.edge(nt.e).labelRank=nt.rank,W.removeNode(Z))})}(W)}),Z("    normalize.run",function(){p.run(W)}),Z("    parentDummyChains",function(){e(W)}),Z("    addBorderSegments",function(){c(W)}),Z("    order",function(){h(W)}),Z("    insertSelfEdges",function(){!function tt(W){var Z=x.buildLayerMatrix(W);o.forEach(Z,function(nt){var at=0;o.forEach(nt,function(lt,ct){var gt=W.node(lt);gt.order=ct+at,o.forEach(gt.selfEdges,function(yt){x.addDummyNode(W,"selfedge",{width:yt.label.width,height:yt.label.height,rank:gt.rank,order:ct+ ++at,e:yt.e,label:yt.label},"_se")}),delete gt.selfEdges})})}(W)}),Z("    adjustCoordinateSystem",function(){l.adjust(W)}),Z("    position",function(){d(W)}),Z("    positionSelfEdges",function(){!function ot(W){o.forEach(W.nodes(),function(Z){var nt=W.node(Z);if("selfedge"===nt.dummy){var at=W.node(nt.e.v),lt=at.x+at.width/2,ct=at.y,gt=nt.x-lt,yt=at.height/2;W.setEdge(nt.e,nt.label),W.removeNode(Z),nt.label.points=[{x:lt+2*gt/3,y:ct-yt},{x:lt+5*gt/6,y:ct-yt},{x:lt+gt,y:ct},{x:lt+5*gt/6,y:ct+yt},{x:lt+2*gt/3,y:ct+yt}],nt.label.x=nt.x,nt.label.y=nt.y}})}(W)}),Z("    removeBorderNodes",function(){!function Q(W){o.forEach(W.nodes(),function(Z){if(W.children(Z).length){var nt=W.node(Z),at=W.node(nt.borderTop),lt=W.node(nt.borderBottom),ct=W.node(o.last(nt.borderLeft)),gt=W.node(o.last(nt.borderRight));nt.width=Math.abs(gt.x-ct.x),nt.height=Math.abs(lt.y-at.y),nt.x=ct.x+nt.width/2,nt.y=at.y+nt.height/2}}),o.forEach(W.nodes(),function(Z){"border"===W.node(Z).dummy&&W.removeNode(Z)})}(W)}),Z("    normalize.undo",function(){p.undo(W)}),Z("    fixupEdgeLabelCoords",function(){!function R(W){o.forEach(W.edges(),function(Z){var nt=W.edge(Z);if(o.has(nt,"x"))switch(("l"===nt.labelpos||"r"===nt.labelpos)&&(nt.width-=nt.labeloffset),nt.labelpos){case"l":nt.x-=nt.width/2+nt.labeloffset;break;case"r":nt.x+=nt.width/2+nt.labeloffset}})}(W)}),Z("    undoCoordinateSystem",function(){l.undo(W)}),Z("    translateGraph",function(){!function J(W){var Z=Number.POSITIVE_INFINITY,nt=0,at=Number.POSITIVE_INFINITY,lt=0,ct=W.graph(),gt=ct.marginx||0,yt=ct.marginy||0;function Ft(bt){var _t=bt.x,vt=bt.y,$t=bt.width,mt=bt.height;Z=Math.min(Z,_t-$t/2),nt=Math.max(nt,_t+$t/2),at=Math.min(at,vt-mt/2),lt=Math.max(lt,vt+mt/2)}o.forEach(W.nodes(),function(bt){Ft(W.node(bt))}),o.forEach(W.edges(),function(bt){var _t=W.edge(bt);o.has(_t,"x")&&Ft(_t)}),Z-=gt,at-=yt,o.forEach(W.nodes(),function(bt){var _t=W.node(bt);_t.x-=Z,_t.y-=at}),o.forEach(W.edges(),function(bt){var _t=W.edge(bt);o.forEach(_t.points,function(vt){vt.x-=Z,vt.y-=at}),o.has(_t,"x")&&(_t.x-=Z),o.has(_t,"y")&&(_t.y-=at)}),ct.width=nt-Z+gt,ct.height=lt-at+yt}(W)}),Z("    assignNodeIntersects",function(){!function B(W){o.forEach(W.edges(),function(Z){var ct,gt,nt=W.edge(Z),at=W.node(Z.v),lt=W.node(Z.w);nt.points?(ct=nt.points[0],gt=nt.points[nt.points.length-1]):(nt.points=[],ct=lt,gt=at),nt.points.unshift(x.intersectRect(at,ct)),nt.points.push(x.intersectRect(lt,gt))})}(W)}),Z("    reversePoints",function(){!function K(W){o.forEach(W.edges(),function(Z){var nt=W.edge(Z);nt.reversed&&nt.points.reverse()})}(W)}),Z("    acyclic.undo",function(){m.undo(W)})}(at,nt)}),nt("  updateInputGraph",function(){!function A(W,Z){o.forEach(W.nodes(),function(nt){var at=W.node(nt),lt=Z.node(nt);at&&(at.x=lt.x,at.y=lt.y,Z.children(nt).length&&(at.width=lt.width,at.height=lt.height))}),o.forEach(W.edges(),function(nt){var at=W.edge(nt),lt=Z.edge(nt);at.points=lt.points,o.has(lt,"x")&&(at.x=lt.x,at.y=lt.y)}),W.graph().width=Z.graph().width,W.graph().height=Z.graph().height}(W,at)})})};var N=["nodesep","edgesep","ranksep","marginx","marginy"],S={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},P=["acyclicer","ranker","rankdir","align"],$=["width","height"],V={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],X={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"];function ut(W,Z){return o.mapValues(o.pick(W,Z),Number)}function pt(W){var Z={};return o.forEach(W,function(nt,at){Z[at.toLowerCase()]=nt}),Z}},8128:(y,E,r)=>{var o;try{o={cloneDeep:r(4418),constant:r(6205),defaults:r(1931),each:r(3572),filter:r(5155),find:r(7838),flatten:r(7651),forEach:r(1091),forIn:r(4181),has:r(2789),isUndefined:r(9261),last:r(5649),map:r(339),mapValues:r(9221),max:r(5147),merge:r(3413),min:r(2665),minBy:r(9924),now:r(501),pick:r(9176),range:r(700),reduce:r(9687),sortBy:r(9136),uniqueId:r(9519),values:r(7127),zipObject:r(785)}}catch{}o||(o=window._),y.exports=o},5274:(y,E,r)=>{var o=r(8128),m=r(2361);function g(a,c,l,h,d,x,w){var C=a.children(w);if(C.length){var M=m.addBorderNode(a,"_bt"),A=m.addBorderNode(a,"_bb"),N=a.node(w);a.setParent(M,w),N.borderTop=M,a.setParent(A,w),N.borderBottom=A,o.forEach(C,function(S){g(a,c,l,h,d,x,S);var P=a.node(S),$=P.borderTop?P.borderTop:S,V=P.borderBottom?P.borderBottom:S,j=P.borderTop?h:2*h,X=$!==V?1:d-x[w]+1;a.setEdge(M,$,{weight:j,minlen:X,nestingEdge:!0}),a.setEdge(V,A,{weight:j,minlen:X,nestingEdge:!0})}),a.parent(w)||a.setEdge(c,M,{weight:0,minlen:d+x[w]})}else w!==c&&a.setEdge(c,w,{weight:0,minlen:l})}y.exports={run:function p(a){var c=m.addDummyNode(a,"root",{},"_root"),l=function f(a){var c={};function l(h,d){var x=a.children(h);x&&x.length&&o.forEach(x,function(w){l(w,d+1)}),c[h]=d}return o.forEach(a.children(),function(h){l(h,1)}),c}(a),h=o.max(o.values(l))-1,d=2*h+1;a.graph().nestingRoot=c,o.forEach(a.edges(),function(w){a.edge(w).minlen*=d});var x=function e(a){return o.reduce(a.edges(),function(c,l){return c+a.edge(l).weight},0)}(a)+1;o.forEach(a.children(),function(w){g(a,c,d,x,h,l,w)}),a.graph().nodeRankFactor=d},cleanup:function u(a){var c=a.graph();a.removeNode(c.nestingRoot),delete c.nestingRoot,o.forEach(a.edges(),function(l){a.edge(l).nestingEdge&&a.removeEdge(l)})}}},1778:(y,E,r)=>{"use strict";var o=r(8128),m=r(2361);y.exports={run:function p(e){e.graph().dummyChains=[],o.forEach(e.edges(),function(u){!function g(e,u){var a=u.v,c=e.node(a).rank,l=u.w,h=e.node(l).rank,d=u.name,x=e.edge(u),w=x.labelRank;if(h!==c+1){var C,M,A;for(e.removeEdge(u),A=0,++c;c<h;++A,++c)x.points=[],C=m.addDummyNode(e,"edge",M={width:0,height:0,edgeLabel:x,edgeObj:u,rank:c},"_d"),c===w&&(M.width=x.width,M.height=x.height,M.dummy="edge-label",M.labelpos=x.labelpos),e.setEdge(a,C,{weight:x.weight},d),0===A&&e.graph().dummyChains.push(C),a=C;e.setEdge(a,l,{weight:x.weight},d)}}(e,u)})},undo:function f(e){o.forEach(e.graph().dummyChains,function(u){var l,a=e.node(u),c=a.edgeLabel;for(e.setEdge(a.edgeObj,c);a.dummy;)l=e.successors(u)[0],e.removeNode(u),c.points.push({x:a.x,y:a.y}),"edge-label"===a.dummy&&(c.x=a.x,c.y=a.y,c.width=a.width,c.height=a.height),a=e.node(u=l)})}}},8589:(y,E,r)=>{var o=r(8128);y.exports=function m(p,g,f){var u,e={};o.forEach(f,function(a){for(var l,h,c=p.parent(a);c;){if((l=p.parent(c))?(h=e[l],e[l]=c):(h=u,u=c),h&&h!==c)return void g.setEdge(h,c);c=l}})}},553:(y,E,r)=>{var o=r(8128);y.exports=function m(p,g){return o.map(g,function(f){var e=p.inEdges(f);if(e.length){var u=o.reduce(e,function(a,c){var l=p.edge(c),h=p.node(c.v);return{sum:a.sum+l.weight*h.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:f,barycenter:u.sum/u.weight,weight:u.weight}}return{v:f}})}},2131:(y,E,r)=>{var o=r(8128),m=r(1986).Graph;y.exports=function p(f,e,u){var a=function g(f){for(var e;f.hasNode(e=o.uniqueId("_root")););return e}(f),c=new m({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(l){return f.node(l)});return o.forEach(f.nodes(),function(l){var h=f.node(l),d=f.parent(l);(h.rank===e||h.minRank<=e&&e<=h.maxRank)&&(c.setNode(l),c.setParent(l,d||a),o.forEach(f[u](l),function(x){var w=x.v===l?x.w:x.v,C=c.edge(w,l),M=o.isUndefined(C)?0:C.weight;c.setEdge(w,l,{weight:f.edge(x).weight+M})}),o.has(h,"minRank")&&c.setNode(l,{borderLeft:h.borderLeft[e],borderRight:h.borderRight[e]}))}),c}},6580:(y,E,r)=>{"use strict";var o=r(8128);function p(g,f,e){for(var u=o.zipObject(e,o.map(e,function(x,w){return w})),a=o.flatten(o.map(f,function(x){return o.sortBy(o.map(g.outEdges(x),function(w){return{pos:u[w.w],weight:g.edge(w).weight}}),"pos")}),!0),c=1;c<e.length;)c<<=1;var l=2*c-1;c-=1;var h=o.map(new Array(l),function(){return 0}),d=0;return o.forEach(a.forEach(function(x){var w=x.pos+c;h[w]+=x.weight;for(var C=0;w>0;)w%2&&(C+=h[w+1]),h[w=w-1>>1]+=x.weight;d+=x.weight*C})),d}y.exports=function m(g,f){for(var e=0,u=1;u<f.length;++u)e+=p(g,f[u-1],f[u]);return e}},8902:(y,E,r)=>{"use strict";var o=r(8128),m=r(2827),p=r(6580),g=r(7743),f=r(2131),e=r(8589),u=r(1986).Graph,a=r(2361);function l(x,w,C){return o.map(w,function(M){return f(x,M,C)})}function h(x,w){var C=new u;o.forEach(x,function(M){var A=M.graph().root,N=g(M,A,C,w);o.forEach(N.vs,function(S,P){M.node(S).order=P}),e(M,C,N.vs)})}function d(x,w){o.forEach(w,function(C){o.forEach(C,function(M,A){x.node(M).order=A})})}y.exports=function c(x){var w=a.maxRank(x),C=l(x,o.range(1,w+1),"inEdges"),M=l(x,o.range(w-1,-1,-1),"outEdges"),A=m(x);d(x,A);for(var S,N=Number.POSITIVE_INFINITY,P=0,$=0;$<4;++P,++$){h(P%2?C:M,P%4>=2),A=a.buildLayerMatrix(x);var V=p(x,A);V<N&&($=0,S=o.cloneDeep(A),N=V)}d(x,S)}},2827:(y,E,r)=>{"use strict";var o=r(8128);y.exports=function m(p){var g={},f=o.filter(p.nodes(),function(l){return!p.children(l).length}),e=o.max(o.map(f,function(l){return p.node(l).rank})),u=o.map(o.range(e+1),function(){return[]}),c=o.sortBy(f,function(l){return p.node(l).rank});return o.forEach(c,function a(l){if(!o.has(g,l)){g[l]=!0;var h=p.node(l);u[h.rank].push(l),o.forEach(p.successors(l),a)}}),u}},5260:(y,E,r)=>{"use strict";var o=r(8128);y.exports=function m(f,e){var u={};return o.forEach(f,function(c,l){var h=u[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:l};o.isUndefined(c.barycenter)||(h.barycenter=c.barycenter,h.weight=c.weight)}),o.forEach(e.edges(),function(c){var l=u[c.v],h=u[c.w];!o.isUndefined(l)&&!o.isUndefined(h)&&(h.indegree++,l.out.push(u[c.w]))}),function p(f){var e=[];function u(l){return function(h){h.merged||(o.isUndefined(h.barycenter)||o.isUndefined(l.barycenter)||h.barycenter>=l.barycenter)&&function g(f,e){var u=0,a=0;f.weight&&(u+=f.barycenter*f.weight,a+=f.weight),e.weight&&(u+=e.barycenter*e.weight,a+=e.weight),f.vs=e.vs.concat(f.vs),f.barycenter=u/a,f.weight=a,f.i=Math.min(e.i,f.i),e.merged=!0}(l,h)}}function a(l){return function(h){h.in.push(l),0==--h.indegree&&f.push(h)}}for(;f.length;){var c=f.pop();e.push(c),o.forEach(c.in.reverse(),u(c)),o.forEach(c.out,a(c))}return o.map(o.filter(e,function(l){return!l.merged}),function(l){return o.pick(l,["vs","i","barycenter","weight"])})}(o.filter(u,function(c){return!c.indegree}))}},7743:(y,E,r)=>{var o=r(8128),m=r(553),p=r(5260),g=r(6980);y.exports=function f(a,c,l,h){var d=a.children(c),x=a.node(c),w=x?x.borderLeft:void 0,C=x?x.borderRight:void 0,M={};w&&(d=o.filter(d,function(V){return V!==w&&V!==C}));var A=m(a,d);o.forEach(A,function(V){if(a.children(V.v).length){var j=f(a,V.v,l,h);M[V.v]=j,o.has(j,"barycenter")&&function u(a,c){o.isUndefined(a.barycenter)?(a.barycenter=c.barycenter,a.weight=c.weight):(a.barycenter=(a.barycenter*a.weight+c.barycenter*c.weight)/(a.weight+c.weight),a.weight+=c.weight)}(V,j)}});var N=p(A,l);!function e(a,c){o.forEach(a,function(l){l.vs=o.flatten(l.vs.map(function(h){return c[h]?c[h].vs:h}),!0)})}(N,M);var S=g(N,h);if(w&&(S.vs=o.flatten([w,S.vs,C],!0),a.predecessors(w).length)){var P=a.node(a.predecessors(w)[0]),$=a.node(a.predecessors(C)[0]);o.has(S,"barycenter")||(S.barycenter=0,S.weight=0),S.barycenter=(S.barycenter*S.weight+P.order+$.order)/(S.weight+2),S.weight+=2}return S}},6980:(y,E,r)=>{var o=r(8128),m=r(2361);function g(e,u,a){for(var c;u.length&&(c=o.last(u)).i<=a;)u.pop(),e.push(c.vs),a++;return a}y.exports=function p(e,u){var a=m.partition(e,function(M){return o.has(M,"barycenter")}),c=a.lhs,l=o.sortBy(a.rhs,function(M){return-M.i}),h=[],d=0,x=0,w=0;c.sort(function f(e){return function(u,a){return u.barycenter<a.barycenter?-1:u.barycenter>a.barycenter?1:e?a.i-u.i:u.i-a.i}}(!!u)),w=g(h,l,w),o.forEach(c,function(M){w+=M.vs.length,h.push(M.vs),d+=M.barycenter*M.weight,x+=M.weight,w=g(h,l,w)});var C={vs:o.flatten(h,!0)};return x&&(C.barycenter=d/x,C.weight=x),C}},4883:(y,E,r)=>{var o=r(8128);y.exports=function m(f){var e=function g(f){var e={},u=0;return o.forEach(f.children(),function a(c){var l=u;o.forEach(f.children(c),a),e[c]={low:l,lim:u++}}),e}(f);o.forEach(f.graph().dummyChains,function(u){for(var a=f.node(u),c=a.edgeObj,l=function p(f,e,u,a){var x,w,c=[],l=[],h=Math.min(e[u].low,e[a].low),d=Math.max(e[u].lim,e[a].lim);x=u;do{x=f.parent(x),c.push(x)}while(x&&(e[x].low>h||d>e[x].lim));for(w=x,x=a;(x=f.parent(x))!==w;)l.push(x);return{path:c.concat(l.reverse()),lca:w}}(f,e,c.v,c.w),h=l.path,d=l.lca,x=0,w=h[x],C=!0;u!==c.w;){if(a=f.node(u),C){for(;(w=h[x])!==d&&f.node(w).maxRank<a.rank;)x++;w===d&&(C=!1)}if(!C){for(;x<h.length-1&&f.node(w=h[x+1]).minRank<=a.rank;)x++;w=h[x]}f.setParent(u,w),u=f.successors(u)[0]}})}},5046:(y,E,r)=>{"use strict";var o=r(8128),m=r(1986).Graph,p=r(2361);function g(N,S){var P={};return o.reduce(S,function $(V,j){var X=0,k=0,L=V.length,I=o.last(j);return o.forEach(j,function(F,D){var Y=function e(N,S){if(N.node(S).dummy)return o.find(N.predecessors(S),function(P){return N.node(P).dummy})}(N,F),J=Y?N.node(Y).order:L;(Y||F===I)&&(o.forEach(j.slice(k,D+1),function(B){o.forEach(N.predecessors(B),function(R){var K=N.node(R),Q=K.order;(Q<X||J<Q)&&(!K.dummy||!N.node(B).dummy)&&u(P,R,B)})}),k=D+1,X=J)}),j}),P}function f(N,S){var P={};function $(j,X,k,L,I){var F;o.forEach(o.range(X,k),function(D){N.node(F=j[D]).dummy&&o.forEach(N.predecessors(F),function(Y){var J=N.node(Y);J.dummy&&(J.order<L||J.order>I)&&u(P,Y,F)})})}return o.reduce(S,function V(j,X){var L,k=-1,I=0;return o.forEach(X,function(F,D){if("border"===N.node(F).dummy){var Y=N.predecessors(F);Y.length&&(L=N.node(Y[0]).order,$(X,I,D,k,L),I=D,k=L)}$(X,I,X.length,L,j.length)}),X}),P}function u(N,S,P){if(S>P){var $=S;S=P,P=$}var V=N[S];V||(N[S]=V={}),V[P]=!0}function a(N,S,P){if(S>P){var $=S;S=P,P=$}return o.has(N[S],P)}function c(N,S,P,$){var V={},j={},X={};return o.forEach(S,function(k){o.forEach(k,function(L,I){V[L]=L,j[L]=L,X[L]=I})}),o.forEach(S,function(k){var L=-1;o.forEach(k,function(I){var F=$(I);if(F.length)for(var D=((F=o.sortBy(F,function(R){return X[R]})).length-1)/2,Y=Math.floor(D),J=Math.ceil(D);Y<=J;++Y){var B=F[Y];j[I]===I&&L<X[B]&&!a(P,I,B)&&(j[B]=I,j[I]=V[I]=V[B],L=X[B])}})}),{root:V,align:j}}function l(N,S,P,$,V){var j={},X=function h(N,S,P,$){var V=new m,j=N.graph(),X=function M(N,S,P){return function($,V,j){var I,X=$.node(V),k=$.node(j),L=0;if(L+=X.width/2,o.has(X,"labelpos"))switch(X.labelpos.toLowerCase()){case"l":I=-X.width/2;break;case"r":I=X.width/2}if(I&&(L+=P?I:-I),I=0,L+=(X.dummy?S:N)/2,L+=(k.dummy?S:N)/2,L+=k.width/2,o.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":I=k.width/2;break;case"r":I=-k.width/2}return I&&(L+=P?I:-I),I=0,L}}(j.nodesep,j.edgesep,$);return o.forEach(S,function(k){var L;o.forEach(k,function(I){var F=P[I];if(V.setNode(F),L){var D=P[L],Y=V.edge(D,F);V.setEdge(D,F,Math.max(X(N,I,L),Y||0))}L=I})}),V}(N,S,P,V),k=V?"borderLeft":"borderRight";function L(D,Y){for(var J=X.nodes(),B=J.pop(),R={};B;)R[B]?D(B):(R[B]=!0,J.push(B),J=J.concat(Y(B))),B=J.pop()}return L(function I(D){j[D]=X.inEdges(D).reduce(function(Y,J){return Math.max(Y,j[J.v]+X.edge(J))},0)},X.predecessors.bind(X)),L(function F(D){var Y=X.outEdges(D).reduce(function(B,R){return Math.min(B,j[R.w]-X.edge(R))},Number.POSITIVE_INFINITY),J=N.node(D);Y!==Number.POSITIVE_INFINITY&&J.borderType!==k&&(j[D]=Math.max(j[D],Y))},X.successors.bind(X)),o.forEach($,function(D){j[D]=j[P[D]]}),j}function d(N,S){return o.minBy(o.values(S),function(P){var $=Number.NEGATIVE_INFINITY,V=Number.POSITIVE_INFINITY;return o.forIn(P,function(j,X){var k=function A(N,S){return N.node(S).width}(N,X)/2;$=Math.max(j+k,$),V=Math.min(j-k,V)}),$-V})}function x(N,S){var P=o.values(S),$=o.min(P),V=o.max(P);o.forEach(["u","d"],function(j){o.forEach(["l","r"],function(X){var I,k=j+X,L=N[k];if(L!==S){var F=o.values(L);(I="l"===X?$-o.min(F):V-o.max(F))&&(N[k]=o.mapValues(L,function(D){return D+I}))}})})}function w(N,S){return o.mapValues(N.ul,function(P,$){if(S)return N[S.toLowerCase()][$];var V=o.sortBy(o.map(N,$));return(V[1]+V[2])/2})}y.exports={positionX:function C(N){var V,S=p.buildLayerMatrix(N),P=o.merge(g(N,S),f(N,S)),$={};o.forEach(["u","d"],function(X){V="u"===X?S:o.values(S).reverse(),o.forEach(["l","r"],function(k){"r"===k&&(V=o.map(V,function(D){return o.values(D).reverse()}));var L=("u"===X?N.predecessors:N.successors).bind(N),I=c(0,V,P,L),F=l(N,V,I.root,I.align,"r"===k);"r"===k&&(F=o.mapValues(F,function(D){return-D})),$[X+k]=F})});var j=d(N,$);return x($,j),w($,N.graph().align)},findType1Conflicts:g,findType2Conflicts:f,addConflict:u,hasConflict:a,verticalAlignment:c,horizontalCompaction:l,alignCoordinates:x,findSmallestWidthAlignment:d,balance:w}},1949:(y,E,r)=>{"use strict";var o=r(8128),m=r(2361),p=r(5046).positionX;y.exports=function g(e){(function f(e){var u=m.buildLayerMatrix(e),a=e.graph().ranksep,c=0;o.forEach(u,function(l){var h=o.max(o.map(l,function(d){return e.node(d).height}));o.forEach(l,function(d){e.node(d).y=c+h/2}),c+=h+a})})(e=m.asNonCompoundGraph(e)),o.forEach(p(e),function(u,a){e.node(a).x=u})}},1360:(y,E,r)=>{"use strict";var o=r(8128),m=r(1986).Graph,p=r(6558).slack;function f(a,c){return o.forEach(a.nodes(),function l(h){o.forEach(c.nodeEdges(h),function(d){var x=d.v,w=h===x?d.w:x;!a.hasNode(w)&&!p(c,d)&&(a.setNode(w,{}),a.setEdge(h,w,{}),l(w))})}),a.nodeCount()}function e(a,c){return o.minBy(c.edges(),function(l){if(a.hasNode(l.v)!==a.hasNode(l.w))return p(c,l)})}function u(a,c,l){o.forEach(a.nodes(),function(h){c.node(h).rank+=l})}y.exports=function g(a){var d,x,c=new m({directed:!1}),l=a.nodes()[0],h=a.nodeCount();for(c.setNode(l,{});f(c,a)<h;)d=e(c,a),x=c.hasNode(d.v)?p(a,d):-p(a,d),u(c,a,x);return c}},1660:(y,E,r)=>{"use strict";var m=r(6558).longestPath,p=r(1360),g=r(4149);y.exports=function f(c){switch(c.graph().ranker){case"network-simplex":default:!function a(c){g(c)}(c);break;case"tight-tree":!function u(c){m(c),p(c)}(c);break;case"longest-path":e(c)}};var e=m},4149:(y,E,r)=>{"use strict";var o=r(8128),m=r(1360),p=r(6558).slack,g=r(6558).longestPath,f=r(1986).alg.preorder,e=r(1986).alg.postorder,u=r(2361).simplify;function a(P){P=u(P),g(P);var V,$=m(P);for(d($),c($,P);V=w($);)M($,P,V,C($,P,V))}function c(P,$){var V=e(P,P.nodes());V=V.slice(0,V.length-1),o.forEach(V,function(j){!function l(P,$,V){var j=P.node(V);P.edge(V,j.parent).cutvalue=h(P,$,V)}(P,$,j)})}function h(P,$,V){var X=P.node(V).parent,k=!0,L=$.edge(V,X),I=0;return L||(k=!1,L=$.edge(X,V)),I=L.weight,o.forEach($.nodeEdges(V),function(F){var D=F.v===V,Y=D?F.w:F.v;if(Y!==X){var J=D===k,B=$.edge(F).weight;if(I+=J?B:-B,function N(P,$,V){return P.hasEdge($,V)}(P,V,Y)){var R=P.edge(V,Y).cutvalue;I+=J?-R:R}}}),I}function d(P,$){arguments.length<2&&($=P.nodes()[0]),x(P,{},1,$)}function x(P,$,V,j,X){var k=V,L=P.node(j);return $[j]=!0,o.forEach(P.neighbors(j),function(I){o.has($,I)||(V=x(P,$,V,I,j))}),L.low=k,L.lim=V++,X?L.parent=X:delete L.parent,V}function w(P){return o.find(P.edges(),function($){return P.edge($).cutvalue<0})}function C(P,$,V){var j=V.v,X=V.w;$.hasEdge(j,X)||(j=V.w,X=V.v);var k=P.node(j),L=P.node(X),I=k,F=!1;k.lim>L.lim&&(I=L,F=!0);var D=o.filter($.edges(),function(Y){return F===S(0,P.node(Y.v),I)&&F!==S(0,P.node(Y.w),I)});return o.minBy(D,function(Y){return p($,Y)})}function M(P,$,V,j){P.removeEdge(V.v,V.w),P.setEdge(j.v,j.w,{}),d(P),c(P,$),function A(P,$){var V=o.find(P.nodes(),function(X){return!$.node(X).parent}),j=f(P,V);j=j.slice(1),o.forEach(j,function(X){var k=P.node(X).parent,L=$.edge(X,k),I=!1;L||(L=$.edge(k,X),I=!0),$.node(X).rank=$.node(k).rank+(I?L.minlen:-L.minlen)})}(P,$)}function S(P,$,V){return V.low<=$.lim&&$.lim<=V.lim}y.exports=a,a.initLowLimValues=d,a.initCutValues=c,a.calcCutValue=h,a.leaveEdge=w,a.enterEdge=C,a.exchangeEdges=M},6558:(y,E,r)=>{"use strict";var o=r(8128);y.exports={longestPath:function m(g){var f={};o.forEach(g.sources(),function e(u){var a=g.node(u);if(o.has(f,u))return a.rank;f[u]=!0;var c=o.min(o.map(g.outEdges(u),function(l){return e(l.w)-g.edge(l).minlen}));return(c===Number.POSITIVE_INFINITY||null==c)&&(c=0),a.rank=c})},slack:function p(g,f){return g.node(f.w).rank-g.node(f.v).rank-g.edge(f).minlen}}},2361:(y,E,r)=>{"use strict";var o=r(8128),m=r(1986).Graph;function p(A,N,S,P){var $;do{$=o.uniqueId(P)}while(A.hasNode($));return S.dummy=N,A.setNode($,S),$}function x(A){return o.max(o.map(A.nodes(),function(N){var S=A.node(N).rank;if(!o.isUndefined(S))return S}))}y.exports={addDummyNode:p,simplify:function g(A){var N=(new m).setGraph(A.graph());return o.forEach(A.nodes(),function(S){N.setNode(S,A.node(S))}),o.forEach(A.edges(),function(S){var P=N.edge(S.v,S.w)||{weight:0,minlen:1},$=A.edge(S);N.setEdge(S.v,S.w,{weight:P.weight+$.weight,minlen:Math.max(P.minlen,$.minlen)})}),N},asNonCompoundGraph:function f(A){var N=new m({multigraph:A.isMultigraph()}).setGraph(A.graph());return o.forEach(A.nodes(),function(S){A.children(S).length||N.setNode(S,A.node(S))}),o.forEach(A.edges(),function(S){N.setEdge(S,A.edge(S))}),N},successorWeights:function e(A){var N=o.map(A.nodes(),function(S){var P={};return o.forEach(A.outEdges(S),function($){P[$.w]=(P[$.w]||0)+A.edge($).weight}),P});return o.zipObject(A.nodes(),N)},predecessorWeights:function u(A){var N=o.map(A.nodes(),function(S){var P={};return o.forEach(A.inEdges(S),function($){P[$.v]=(P[$.v]||0)+A.edge($).weight}),P});return o.zipObject(A.nodes(),N)},intersectRect:function a(A,N){var k,L,S=A.x,P=A.y,$=N.x-S,V=N.y-P,j=A.width/2,X=A.height/2;if(!$&&!V)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(V)*j>Math.abs($)*X?(V<0&&(X=-X),k=X*$/V,L=X):($<0&&(j=-j),k=j,L=j*V/$),{x:S+k,y:P+L}},buildLayerMatrix:function c(A){var N=o.map(o.range(x(A)+1),function(){return[]});return o.forEach(A.nodes(),function(S){var P=A.node(S),$=P.rank;o.isUndefined($)||(N[$][P.order]=S)}),N},normalizeRanks:function l(A){var N=o.min(o.map(A.nodes(),function(S){return A.node(S).rank}));o.forEach(A.nodes(),function(S){var P=A.node(S);o.has(P,"rank")&&(P.rank-=N)})},removeEmptyRanks:function h(A){var N=o.min(o.map(A.nodes(),function(V){return A.node(V).rank})),S=[];o.forEach(A.nodes(),function(V){var j=A.node(V).rank-N;S[j]||(S[j]=[]),S[j].push(V)});var P=0,$=A.graph().nodeRankFactor;o.forEach(S,function(V,j){o.isUndefined(V)&&j%$!=0?--P:P&&o.forEach(V,function(X){A.node(X).rank+=P})})},addBorderNode:function d(A,N,S,P){var $={width:0,height:0};return arguments.length>=4&&($.rank=S,$.order=P),p(A,"border",$,N)},maxRank:x,partition:function w(A,N){var S={lhs:[],rhs:[]};return o.forEach(A,function(P){N(P)?S.lhs.push(P):S.rhs.push(P)}),S},time:function C(A,N){var S=o.now();try{return N()}finally{console.log(A+" time: "+(o.now()-S)+"ms")}},notime:function M(A,N){return N()}}},9233:y=>{y.exports="0.8.5"},9031:(y,E,r)=>{var o=r(3527);y.exports={Graph:o.Graph,json:r(5801),alg:r(8934),version:o.version}},4392:(y,E,r)=>{var o=r(4758);y.exports=function m(p){var e,g={},f=[];function u(a){o.has(g,a)||(g[a]=!0,e.push(a),o.each(p.successors(a),u),o.each(p.predecessors(a),u))}return o.each(p.nodes(),function(a){e=[],u(a),e.length&&f.push(e)}),f}},5661:(y,E,r)=>{var o=r(4758);function p(g,f,e,u,a,c){o.has(u,f)||(u[f]=!0,e||c.push(f),o.each(a(f),function(l){p(g,l,e,u,a,c)}),e&&c.push(f))}y.exports=function m(g,f,e){o.isArray(f)||(f=[f]);var u=(g.isDirected()?g.successors:g.neighbors).bind(g),a=[],c={};return o.each(f,function(l){if(!g.hasNode(l))throw new Error("Graph does not have node: "+l);p(g,l,"post"===e,c,u,a)}),a}},5584:(y,E,r)=>{var o=r(4606),m=r(4758);y.exports=function p(g,f,e){return m.transform(g.nodes(),function(u,a){u[a]=o(g,a,f,e)},{})}},4606:(y,E,r)=>{var o=r(4758),m=r(4172);y.exports=function g(e,u,a,c){return function f(e,u,a,c){var d,x,l={},h=new m,w=function(C){var M=C.v!==d?C.v:C.w,A=l[M],N=a(C),S=x.distance+N;if(N<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+C+" Weight: "+N);S<A.distance&&(A.distance=S,A.predecessor=d,h.decrease(M,S))};for(e.nodes().forEach(function(C){var M=C===u?0:Number.POSITIVE_INFINITY;l[C]={distance:M},h.add(C,M)});h.size()>0&&(d=h.removeMin(),(x=l[d]).distance!==Number.POSITIVE_INFINITY);)c(d).forEach(w);return l}(e,String(u),a||p,c||function(l){return e.outEdges(l)})};var p=o.constant(1)},5495:(y,E,r)=>{var o=r(4758),m=r(7352);y.exports=function p(g){return o.filter(m(g),function(f){return f.length>1||1===f.length&&g.hasEdge(f[0],f[0])})}},1521:(y,E,r)=>{var o=r(4758);y.exports=function p(f,e,u){return function g(f,e,u){var a={},c=f.nodes();return c.forEach(function(l){a[l]={},a[l][l]={distance:0},c.forEach(function(h){l!==h&&(a[l][h]={distance:Number.POSITIVE_INFINITY})}),u(l).forEach(function(h){var d=h.v===l?h.w:h.v,x=e(h);a[l][d]={distance:x,predecessor:l}})}),c.forEach(function(l){var h=a[l];c.forEach(function(d){var x=a[d];c.forEach(function(w){var M=h[w],A=x[w],N=x[l].distance+M.distance;N<A.distance&&(A.distance=N,A.predecessor=M.predecessor)})})}),a}(f,e||m,u||function(a){return f.outEdges(a)})};var m=o.constant(1)},8934:(y,E,r)=>{y.exports={components:r(4392),dijkstra:r(4606),dijkstraAll:r(5584),findCycles:r(5495),floydWarshall:r(1521),isAcyclic:r(1313),postorder:r(2872),preorder:r(9599),prim:r(6640),tarjan:r(7352),topsort:r(8113)}},1313:(y,E,r)=>{var o=r(8113);y.exports=function m(p){try{o(p)}catch(g){if(g instanceof o.CycleException)return!1;throw g}return!0}},2872:(y,E,r)=>{var o=r(5661);y.exports=function m(p,g){return o(p,g,"post")}},9599:(y,E,r)=>{var o=r(5661);y.exports=function m(p,g){return o(p,g,"pre")}},6640:(y,E,r)=>{var o=r(4758),m=r(623),p=r(4172);y.exports=function g(f,e){var l,u=new m,a={},c=new p;function h(x){var w=x.v===l?x.w:x.v,C=c.priority(w);if(void 0!==C){var M=e(x);M<C&&(a[w]=l,c.decrease(w,M))}}if(0===f.nodeCount())return u;o.each(f.nodes(),function(x){c.add(x,Number.POSITIVE_INFINITY),u.setNode(x)}),c.decrease(f.nodes()[0],0);for(var d=!1;c.size()>0;){if(l=c.removeMin(),o.has(a,l))u.setEdge(l,a[l]);else{if(d)throw new Error("Input graph is not connected: "+f);d=!0}f.nodeEdges(l).forEach(h)}return u}},7352:(y,E,r)=>{var o=r(4758);y.exports=function m(p){var g=0,f=[],e={},u=[];function a(c){var l=e[c]={onStack:!0,lowlink:g,index:g++};if(f.push(c),p.successors(c).forEach(function(x){o.has(e,x)?e[x].onStack&&(l.lowlink=Math.min(l.lowlink,e[x].index)):(a(x),l.lowlink=Math.min(l.lowlink,e[x].lowlink))}),l.lowlink===l.index){var d,h=[];do{d=f.pop(),e[d].onStack=!1,h.push(d)}while(c!==d);u.push(h)}}return p.nodes().forEach(function(c){o.has(e,c)||a(c)}),u}},8113:(y,E,r)=>{var o=r(4758);function m(g){var f={},e={},u=[];if(o.each(g.sinks(),function a(c){if(o.has(e,c))throw new p;o.has(f,c)||(e[c]=!0,f[c]=!0,o.each(g.predecessors(c),a),delete e[c],u.push(c))}),o.size(f)!==g.nodeCount())throw new p;return u}function p(){}y.exports=m,m.CycleException=p,p.prototype=new Error},4172:(y,E,r)=>{var o=r(4758);function m(){this._arr=[],this._keyIndices={}}y.exports=m,m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(p){return p.key})},m.prototype.has=function(p){return o.has(this._keyIndices,p)},m.prototype.priority=function(p){var g=this._keyIndices[p];if(void 0!==g)return this._arr[g].priority},m.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(p,g){var f=this._keyIndices;if(p=String(p),!o.has(f,p)){var e=this._arr,u=e.length;return f[p]=u,e.push({key:p,priority:g}),this._decrease(u),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var p=this._arr.pop();return delete this._keyIndices[p.key],this._heapify(0),p.key},m.prototype.decrease=function(p,g){var f=this._keyIndices[p];if(g>this._arr[f].priority)throw new Error("New priority is greater than current priority. Key: "+p+" Old: "+this._arr[f].priority+" New: "+g);this._arr[f].priority=g,this._decrease(f)},m.prototype._heapify=function(p){var g=this._arr,f=2*p,e=f+1,u=p;f<g.length&&(u=g[f].priority<g[u].priority?f:u,e<g.length&&(u=g[e].priority<g[u].priority?e:u),u!==p&&(this._swap(p,u),this._heapify(u)))},m.prototype._decrease=function(p){for(var e,g=this._arr,f=g[p].priority;0!==p&&!(g[e=p>>1].priority<f);)this._swap(p,e),p=e},m.prototype._swap=function(p,g){var f=this._arr,e=this._keyIndices,u=f[p],a=f[g];f[p]=a,f[g]=u,e[a.key]=p,e[u.key]=g}},623:(y,E,r)=>{"use strict";var o=r(4758);y.exports=f;var m="\0",p="\0",g="\x01";function f(h){this._isDirected=!o.has(h,"directed")||h.directed,this._isMultigraph=!!o.has(h,"multigraph")&&h.multigraph,this._isCompound=!!o.has(h,"compound")&&h.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[p]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function e(h,d){h[d]?h[d]++:h[d]=1}function u(h,d){--h[d]||delete h[d]}function a(h,d,x,w){var C=""+d,M=""+x;if(!h&&C>M){var A=C;C=M,M=A}return C+g+M+g+(o.isUndefined(w)?m:w)}function l(h,d){return a(h,d.v,d.w,d.name)}f.prototype._nodeCount=0,f.prototype._edgeCount=0,f.prototype.isDirected=function(){return this._isDirected},f.prototype.isMultigraph=function(){return this._isMultigraph},f.prototype.isCompound=function(){return this._isCompound},f.prototype.setGraph=function(h){return this._label=h,this},f.prototype.graph=function(){return this._label},f.prototype.setDefaultNodeLabel=function(h){return o.isFunction(h)||(h=o.constant(h)),this._defaultNodeLabelFn=h,this},f.prototype.nodeCount=function(){return this._nodeCount},f.prototype.nodes=function(){return o.keys(this._nodes)},f.prototype.sources=function(){var h=this;return o.filter(this.nodes(),function(d){return o.isEmpty(h._in[d])})},f.prototype.sinks=function(){var h=this;return o.filter(this.nodes(),function(d){return o.isEmpty(h._out[d])})},f.prototype.setNodes=function(h,d){var x=arguments,w=this;return o.each(h,function(C){x.length>1?w.setNode(C,d):w.setNode(C)}),this},f.prototype.setNode=function(h,d){return o.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=d),this):(this._nodes[h]=arguments.length>1?d:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=p,this._children[h]={},this._children[p][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},f.prototype.node=function(h){return this._nodes[h]},f.prototype.hasNode=function(h){return o.has(this._nodes,h)},f.prototype.removeNode=function(h){var d=this;if(o.has(this._nodes,h)){var x=function(w){d.removeEdge(d._edgeObjs[w])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],o.each(this.children(h),function(w){d.setParent(w)}),delete this._children[h]),o.each(o.keys(this._in[h]),x),delete this._in[h],delete this._preds[h],o.each(o.keys(this._out[h]),x),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},f.prototype.setParent=function(h,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(d))d=p;else{for(var x=d+="";!o.isUndefined(x);x=this.parent(x))if(x===h)throw new Error("Setting "+d+" as parent of "+h+" would create a cycle");this.setNode(d)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=d,this._children[d][h]=!0,this},f.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},f.prototype.parent=function(h){if(this._isCompound){var d=this._parent[h];if(d!==p)return d}},f.prototype.children=function(h){if(o.isUndefined(h)&&(h=p),this._isCompound){var d=this._children[h];if(d)return o.keys(d)}else{if(h===p)return this.nodes();if(this.hasNode(h))return[]}},f.prototype.predecessors=function(h){var d=this._preds[h];if(d)return o.keys(d)},f.prototype.successors=function(h){var d=this._sucs[h];if(d)return o.keys(d)},f.prototype.neighbors=function(h){var d=this.predecessors(h);if(d)return o.union(d,this.successors(h))},f.prototype.isLeaf=function(h){return 0===(this.isDirected()?this.successors(h):this.neighbors(h)).length},f.prototype.filterNodes=function(h){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var x=this;o.each(this._nodes,function(M,A){h(A)&&d.setNode(A,M)}),o.each(this._edgeObjs,function(M){d.hasNode(M.v)&&d.hasNode(M.w)&&d.setEdge(M,x.edge(M))});var w={};function C(M){var A=x.parent(M);return void 0===A||d.hasNode(A)?(w[M]=A,A):A in w?w[A]:C(A)}return this._isCompound&&o.each(d.nodes(),function(M){d.setParent(M,C(M))}),d},f.prototype.setDefaultEdgeLabel=function(h){return o.isFunction(h)||(h=o.constant(h)),this._defaultEdgeLabelFn=h,this},f.prototype.edgeCount=function(){return this._edgeCount},f.prototype.edges=function(){return o.values(this._edgeObjs)},f.prototype.setPath=function(h,d){var x=this,w=arguments;return o.reduce(h,function(C,M){return w.length>1?x.setEdge(C,M,d):x.setEdge(C,M),M}),this},f.prototype.setEdge=function(){var h,d,x,w,C=!1,M=arguments[0];"object"==typeof M&&null!==M&&"v"in M?(h=M.v,d=M.w,x=M.name,2===arguments.length&&(w=arguments[1],C=!0)):(h=M,d=arguments[1],x=arguments[3],arguments.length>2&&(w=arguments[2],C=!0)),h=""+h,d=""+d,o.isUndefined(x)||(x=""+x);var A=a(this._isDirected,h,d,x);if(o.has(this._edgeLabels,A))return C&&(this._edgeLabels[A]=w),this;if(!o.isUndefined(x)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(d),this._edgeLabels[A]=C?w:this._defaultEdgeLabelFn(h,d,x);var N=function c(h,d,x,w){var C=""+d,M=""+x;if(!h&&C>M){var A=C;C=M,M=A}var N={v:C,w:M};return w&&(N.name=w),N}(this._isDirected,h,d,x);return h=N.v,d=N.w,Object.freeze(N),this._edgeObjs[A]=N,e(this._preds[d],h),e(this._sucs[h],d),this._in[d][A]=N,this._out[h][A]=N,this._edgeCount++,this},f.prototype.edge=function(h,d,x){var w=1===arguments.length?l(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return this._edgeLabels[w]},f.prototype.hasEdge=function(h,d,x){var w=1===arguments.length?l(this._isDirected,arguments[0]):a(this._isDirected,h,d,x);return o.has(this._edgeLabels,w)},f.prototype.removeEdge=function(h,d,x){var w=1===arguments.length?l(this._isDirected,arguments[0]):a(this._isDirected,h,d,x),C=this._edgeObjs[w];return C&&(h=C.v,d=C.w,delete this._edgeLabels[w],delete this._edgeObjs[w],u(this._preds[d],h),u(this._sucs[h],d),delete this._in[d][w],delete this._out[h][w],this._edgeCount--),this},f.prototype.inEdges=function(h,d){var x=this._in[h];if(x){var w=o.values(x);return d?o.filter(w,function(C){return C.v===d}):w}},f.prototype.outEdges=function(h,d){var x=this._out[h];if(x){var w=o.values(x);return d?o.filter(w,function(C){return C.w===d}):w}},f.prototype.nodeEdges=function(h,d){var x=this.inEdges(h,d);if(x)return x.concat(this.outEdges(h,d))}},3527:(y,E,r)=>{y.exports={Graph:r(623),version:r(9703)}},5801:(y,E,r)=>{var o=r(4758),m=r(623);function g(u){return o.map(u.nodes(),function(a){var c=u.node(a),l=u.parent(a),h={v:a};return o.isUndefined(c)||(h.value=c),o.isUndefined(l)||(h.parent=l),h})}function f(u){return o.map(u.edges(),function(a){var c=u.edge(a),l={v:a.v,w:a.w};return o.isUndefined(a.name)||(l.name=a.name),o.isUndefined(c)||(l.value=c),l})}y.exports={write:function p(u){var a={options:{directed:u.isDirected(),multigraph:u.isMultigraph(),compound:u.isCompound()},nodes:g(u),edges:f(u)};return o.isUndefined(u.graph())||(a.value=o.clone(u.graph())),a},read:function e(u){var a=new m(u.options).setGraph(u.value);return o.each(u.nodes,function(c){a.setNode(c.v,c.value),c.parent&&a.setParent(c.v,c.parent)}),o.each(u.edges,function(c){a.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),a}}},4758:(y,E,r)=>{var o;try{o={clone:r(1132),constant:r(6205),each:r(3572),filter:r(5155),has:r(2789),isArray:r(9812),isEmpty:r(5488),isFunction:r(8653),isUndefined:r(9261),keys:r(2561),map:r(339),reduce:r(9687),size:r(120),transform:r(5341),union:r(8898),values:r(7127)}}catch{}o||(o=window._),y.exports=o},9703:y=>{y.exports="2.1.8"},5013:(y,E,r)=>{var p=r(4385)(r(1464),"DataView");y.exports=p},3028:(y,E,r)=>{var o=r(6399),m=r(1483),p=r(3434),g=r(5230),f=r(3718);function e(u){var a=-1,c=null==u?0:u.length;for(this.clear();++a<c;){var l=u[a];this.set(l[0],l[1])}}e.prototype.clear=o,e.prototype.delete=m,e.prototype.get=p,e.prototype.has=g,e.prototype.set=f,y.exports=e},5752:(y,E,r)=>{var o=r(3643),m=r(7103),p=r(62),g=r(1610),f=r(1090);function e(u){var a=-1,c=null==u?0:u.length;for(this.clear();++a<c;){var l=u[a];this.set(l[0],l[1])}}e.prototype.clear=o,e.prototype.delete=m,e.prototype.get=p,e.prototype.has=g,e.prototype.set=f,y.exports=e},1012:(y,E,r)=>{var p=r(4385)(r(1464),"Map");y.exports=p},752:(y,E,r)=>{var o=r(1891),m=r(2759),p=r(7766),g=r(322),f=r(7258);function e(u){var a=-1,c=null==u?0:u.length;for(this.clear();++a<c;){var l=u[a];this.set(l[0],l[1])}}e.prototype.clear=o,e.prototype.delete=m,e.prototype.get=p,e.prototype.has=g,e.prototype.set=f,y.exports=e},1339:(y,E,r)=>{var p=r(4385)(r(1464),"Promise");y.exports=p},7814:(y,E,r)=>{var p=r(4385)(r(1464),"Set");y.exports=p},342:(y,E,r)=>{var o=r(752),m=r(4643),p=r(2768);function g(f){var e=-1,u=null==f?0:f.length;for(this.__data__=new o;++e<u;)this.add(f[e])}g.prototype.add=g.prototype.push=m,g.prototype.has=p,y.exports=g},6898:(y,E,r)=>{var o=r(5752),m=r(8945),p=r(8425),g=r(5280),f=r(324),e=r(4516);function u(a){var c=this.__data__=new o(a);this.size=c.size}u.prototype.clear=m,u.prototype.delete=p,u.prototype.get=g,u.prototype.has=f,u.prototype.set=e,y.exports=u},8516:(y,E,r)=>{var o=r(1464);y.exports=o.Symbol},2737:(y,E,r)=>{var o=r(1464);y.exports=o.Uint8Array},2248:(y,E,r)=>{var p=r(4385)(r(1464),"WeakMap");y.exports=p},1458:y=>{y.exports=function E(r,o,m){switch(m.length){case 0:return r.call(o);case 1:return r.call(o,m[0]);case 2:return r.call(o,m[0],m[1]);case 3:return r.call(o,m[0],m[1],m[2])}return r.apply(o,m)}},3177:y=>{y.exports=function E(r,o){for(var m=-1,p=null==r?0:r.length;++m<p&&!1!==o(r[m],m,r););return r}},2873:y=>{y.exports=function E(r,o){for(var m=-1,p=null==r?0:r.length,g=0,f=[];++m<p;){var e=r[m];o(e,m,r)&&(f[g++]=e)}return f}},5306:(y,E,r)=>{var o=r(5300);y.exports=function m(p,g){return!(null==p||!p.length)&&o(p,g,0)>-1}},5878:y=>{y.exports=function E(r,o,m){for(var p=-1,g=null==r?0:r.length;++p<g;)if(m(o,r[p]))return!0;return!1}},8548:(y,E,r)=>{var o=r(9695),m=r(6265),p=r(9812),g=r(3151),f=r(8426),e=r(1028),a=Object.prototype.hasOwnProperty;y.exports=function c(l,h){var d=p(l),x=!d&&m(l),w=!d&&!x&&g(l),C=!d&&!x&&!w&&e(l),M=d||x||w||C,A=M?o(l.length,String):[],N=A.length;for(var S in l)(h||a.call(l,S))&&(!M||!("length"==S||w&&("offset"==S||"parent"==S)||C&&("buffer"==S||"byteLength"==S||"byteOffset"==S)||f(S,N)))&&A.push(S);return A}},2757:y=>{y.exports=function E(r,o){for(var m=-1,p=null==r?0:r.length,g=Array(p);++m<p;)g[m]=o(r[m],m,r);return g}},6319:y=>{y.exports=function E(r,o){for(var m=-1,p=o.length,g=r.length;++m<p;)r[g+m]=o[m];return r}},7325:y=>{y.exports=function E(r,o,m,p){var g=-1,f=null==r?0:r.length;for(p&&f&&(m=r[++g]);++g<f;)m=o(m,r[g],g,r);return m}},7371:y=>{y.exports=function E(r,o){for(var m=-1,p=null==r?0:r.length;++m<p;)if(o(r[m],m,r))return!0;return!1}},8916:(y,E,r)=>{var m=r(1740)("length");y.exports=m},732:(y,E,r)=>{var o=r(4399),m=r(2651);y.exports=function p(g,f,e){(void 0!==e&&!m(g[f],e)||void 0===e&&!(f in g))&&o(g,f,e)}},9220:(y,E,r)=>{var o=r(4399),m=r(2651),g=Object.prototype.hasOwnProperty;y.exports=function f(e,u,a){var c=e[u];(!g.call(e,u)||!m(c,a)||void 0===a&&!(u in e))&&o(e,u,a)}},6316:(y,E,r)=>{var o=r(2651);y.exports=function m(p,g){for(var f=p.length;f--;)if(o(p[f][0],g))return f;return-1}},8336:(y,E,r)=>{var o=r(3190),m=r(2561);y.exports=function p(g,f){return g&&o(f,m(f),g)}},6303:(y,E,r)=>{var o=r(3190),m=r(7674);y.exports=function p(g,f){return g&&o(f,m(f),g)}},4399:(y,E,r)=>{var o=r(4678);y.exports=function m(p,g,f){"__proto__"==g&&o?o(p,g,{configurable:!0,enumerable:!0,value:f,writable:!0}):p[g]=f}},5052:(y,E,r)=>{var o=r(6898),m=r(3177),p=r(9220),g=r(8336),f=r(6303),e=r(7697),u=r(5820),a=r(5308),c=r(7491),l=r(3539),h=r(9088),d=r(828),x=r(9900),w=r(9686),C=r(2870),M=r(9812),A=r(3151),N=r(6879),S=r(3278),P=r(4257),$=r(2561),V=r(7674),L="[object Arguments]",J="[object Function]",Q="[object Object]",vt={};vt[L]=vt["[object Array]"]=vt["[object ArrayBuffer]"]=vt["[object DataView]"]=vt["[object Boolean]"]=vt["[object Date]"]=vt["[object Float32Array]"]=vt["[object Float64Array]"]=vt["[object Int8Array]"]=vt["[object Int16Array]"]=vt["[object Int32Array]"]=vt["[object Map]"]=vt["[object Number]"]=vt[Q]=vt["[object RegExp]"]=vt["[object Set]"]=vt["[object String]"]=vt["[object Symbol]"]=vt["[object Uint8Array]"]=vt["[object Uint8ClampedArray]"]=vt["[object Uint16Array]"]=vt["[object Uint32Array]"]=!0,vt["[object Error]"]=vt[J]=vt["[object WeakMap]"]=!1,y.exports=function $t(mt,Wt,Kt,sn,oe,Lt){var Mt,zt=1&Wt,ae=2&Wt,on=4&Wt;if(Kt&&(Mt=oe?Kt(mt,sn,oe,Lt):Kt(mt)),void 0!==Mt)return Mt;if(!S(mt))return mt;var Ne=M(mt);if(Ne){if(Mt=x(mt),!zt)return u(mt,Mt)}else{var Qt=d(mt),Oe=Qt==J||"[object GeneratorFunction]"==Qt;if(A(mt))return e(mt,zt);if(Qt==Q||Qt==L||Oe&&!oe){if(Mt=ae||Oe?{}:C(mt),!zt)return ae?c(mt,f(Mt,mt)):a(mt,g(Mt,mt))}else{if(!vt[Qt])return oe?mt:{};Mt=w(mt,Qt,zt)}}Lt||(Lt=new o);var ke=Lt.get(mt);if(ke)return ke;Lt.set(mt,Mt),P(mt)?mt.forEach(function(Rt){Mt.add($t(Rt,Wt,Kt,Rt,mt,Lt))}):N(mt)&&mt.forEach(function(Rt,Vt){Mt.set(Vt,$t(Rt,Wt,Kt,Vt,mt,Lt))});var ge=Ne?void 0:(on?ae?h:l:ae?V:$)(mt);return m(ge||mt,function(Rt,Vt){ge&&(Rt=mt[Vt=Rt]),p(Mt,Vt,$t(Rt,Wt,Kt,Vt,mt,Lt))}),Mt}},9593:(y,E,r)=>{var o=r(3278),m=Object.create;y.exports=function(){function g(){}return function(f){if(!o(f))return{};if(m)return m(f);g.prototype=f;var e=new g;return g.prototype=void 0,e}}()},868:(y,E,r)=>{var o=r(3432),p=r(5892)(o);y.exports=p},6350:(y,E,r)=>{var o=r(5153);y.exports=function m(p,g,f){for(var e=-1,u=p.length;++e<u;){var a=p[e],c=g(a);if(null!=c&&(void 0===l?c==c&&!o(c):f(c,l)))var l=c,h=a}return h}},2755:(y,E,r)=>{var o=r(868);y.exports=function m(p,g){var f=[];return o(p,function(e,u,a){g(e,u,a)&&f.push(e)}),f}},5736:y=>{y.exports=function E(r,o,m,p){for(var g=r.length,f=m+(p?1:-1);p?f--:++f<g;)if(o(r[f],f,r))return f;return-1}},3091:(y,E,r)=>{var o=r(6319),m=r(8892);y.exports=function p(g,f,e,u,a){var c=-1,l=g.length;for(e||(e=m),a||(a=[]);++c<l;){var h=g[c];f>0&&e(h)?f>1?p(h,f-1,e,u,a):o(a,h):u||(a[a.length]=h)}return a}},2898:(y,E,r)=>{var m=r(9602)();y.exports=m},3432:(y,E,r)=>{var o=r(2898),m=r(2561);y.exports=function p(g,f){return g&&o(g,f,m)}},8137:(y,E,r)=>{var o=r(3916),m=r(8130);y.exports=function p(g,f){for(var e=0,u=(f=o(f,g)).length;null!=g&&e<u;)g=g[m(f[e++])];return e&&e==u?g:void 0}},9926:(y,E,r)=>{var o=r(6319),m=r(9812);y.exports=function p(g,f,e){var u=f(g);return m(g)?u:o(u,e(g))}},1057:(y,E,r)=>{var o=r(8516),m=r(8488),p=r(3327),e=o?o.toStringTag:void 0;y.exports=function u(a){return null==a?void 0===a?"[object Undefined]":"[object Null]":e&&e in Object(a)?m(a):p(a)}},9770:y=>{y.exports=function E(r,o){return r>o}},4165:y=>{var r=Object.prototype.hasOwnProperty;y.exports=function o(m,p){return null!=m&&r.call(m,p)}},1398:y=>{y.exports=function E(r,o){return null!=r&&o in Object(r)}},5300:(y,E,r)=>{var o=r(5736),m=r(9636),p=r(5220);y.exports=function g(f,e,u){return e==e?p(f,e,u):o(f,m,u)}},8313:(y,E,r)=>{var o=r(1057),m=r(7433);y.exports=function g(f){return m(f)&&"[object Arguments]"==o(f)}},2925:(y,E,r)=>{var o=r(9471),m=r(7433);y.exports=function p(g,f,e,u,a){return g===f||(null==g||null==f||!m(g)&&!m(f)?g!=g&&f!=f:o(g,f,e,u,p,a))}},9471:(y,E,r)=>{var o=r(6898),m=r(2900),p=r(7987),g=r(7880),f=r(828),e=r(9812),u=r(3151),a=r(1028),l="[object Arguments]",h="[object Array]",d="[object Object]",w=Object.prototype.hasOwnProperty;y.exports=function C(M,A,N,S,P,$){var V=e(M),j=e(A),X=V?h:f(M),k=j?h:f(A),L=(X=X==l?d:X)==d,I=(k=k==l?d:k)==d,F=X==k;if(F&&u(M)){if(!u(A))return!1;V=!0,L=!1}if(F&&!L)return $||($=new o),V||a(M)?m(M,A,N,S,P,$):p(M,A,X,N,S,P,$);if(!(1&N)){var D=L&&w.call(M,"__wrapped__"),Y=I&&w.call(A,"__wrapped__");if(D||Y){var J=D?M.value():M,B=Y?A.value():A;return $||($=new o),P(J,B,N,S,$)}}return!!F&&($||($=new o),g(M,A,N,S,P,$))}},6095:(y,E,r)=>{var o=r(828),m=r(7433);y.exports=function g(f){return m(f)&&"[object Map]"==o(f)}},2692:(y,E,r)=>{var o=r(6898),m=r(2925);y.exports=function f(e,u,a,c){var l=a.length,h=l,d=!c;if(null==e)return!h;for(e=Object(e);l--;){var x=a[l];if(d&&x[2]?x[1]!==e[x[0]]:!(x[0]in e))return!1}for(;++l<h;){var w=(x=a[l])[0],C=e[w],M=x[1];if(d&&x[2]){if(void 0===C&&!(w in e))return!1}else{var A=new o;if(c)var N=c(C,M,w,e,u,A);if(!(void 0===N?m(M,C,3,c,A):N))return!1}}return!0}},9636:y=>{y.exports=function E(r){return r!=r}},298:(y,E,r)=>{var o=r(8653),m=r(8401),p=r(3278),g=r(8020),e=/^\[object .+?Constructor\]$/,h=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");y.exports=function d(x){return!(!p(x)||m(x))&&(o(x)?h:e).test(g(x))}},1889:(y,E,r)=>{var o=r(828),m=r(7433);y.exports=function g(f){return m(f)&&"[object Set]"==o(f)}},8068:(y,E,r)=>{var o=r(1057),m=r(8845),p=r(7433),F={};F["[object Float32Array]"]=F["[object Float64Array]"]=F["[object Int8Array]"]=F["[object Int16Array]"]=F["[object Int32Array]"]=F["[object Uint8Array]"]=F["[object Uint8ClampedArray]"]=F["[object Uint16Array]"]=F["[object Uint32Array]"]=!0,F["[object Arguments]"]=F["[object Array]"]=F["[object ArrayBuffer]"]=F["[object Boolean]"]=F["[object DataView]"]=F["[object Date]"]=F["[object Error]"]=F["[object Function]"]=F["[object Map]"]=F["[object Number]"]=F["[object Object]"]=F["[object RegExp]"]=F["[object Set]"]=F["[object String]"]=F["[object WeakMap]"]=!1,y.exports=function D(Y){return p(Y)&&m(Y.length)&&!!F[o(Y)]}},2344:(y,E,r)=>{var o=r(7432),m=r(1669),p=r(9631),g=r(9812),f=r(5788);y.exports=function e(u){return"function"==typeof u?u:null==u?p:"object"==typeof u?g(u)?m(u[0],u[1]):o(u):f(u)}},3809:(y,E,r)=>{var o=r(3164),m=r(6199),g=Object.prototype.hasOwnProperty;y.exports=function f(e){if(!o(e))return m(e);var u=[];for(var a in Object(e))g.call(e,a)&&"constructor"!=a&&u.push(a);return u}},1194:(y,E,r)=>{var o=r(3278),m=r(3164),p=r(908),f=Object.prototype.hasOwnProperty;y.exports=function e(u){if(!o(u))return p(u);var a=m(u),c=[];for(var l in u)"constructor"==l&&(a||!f.call(u,l))||c.push(l);return c}},1181:y=>{y.exports=function E(r,o){return r<o}},5619:(y,E,r)=>{var o=r(868),m=r(7291);y.exports=function p(g,f){var e=-1,u=m(g)?Array(g.length):[];return o(g,function(a,c,l){u[++e]=f(a,c,l)}),u}},7432:(y,E,r)=>{var o=r(2692),m=r(613),p=r(2878);y.exports=function g(f){var e=m(f);return 1==e.length&&e[0][2]?p(e[0][0],e[0][1]):function(u){return u===f||o(u,f,e)}}},1669:(y,E,r)=>{var o=r(2925),m=r(6681),p=r(9830),g=r(2562),f=r(4745),e=r(2878),u=r(8130);y.exports=function l(h,d){return g(h)&&f(d)?e(u(h),d):function(x){var w=m(x,h);return void 0===w&&w===d?p(x,h):o(d,w,3)}}},5765:(y,E,r)=>{var o=r(6898),m=r(732),p=r(2898),g=r(1239),f=r(3278),e=r(7674),u=r(3609);y.exports=function a(c,l,h,d,x){c!==l&&p(l,function(w,C){if(x||(x=new o),f(w))g(c,l,C,h,a,d,x);else{var M=d?d(u(c,C),w,C+"",c,l,x):void 0;void 0===M&&(M=w),m(c,C,M)}},e)}},1239:(y,E,r)=>{var o=r(732),m=r(7697),p=r(1334),g=r(5820),f=r(2870),e=r(6265),u=r(9812),a=r(5152),c=r(3151),l=r(8653),h=r(3278),d=r(9970),x=r(1028),w=r(3609),C=r(6729);y.exports=function M(A,N,S,P,$,V,j){var X=w(A,S),k=w(N,S),L=j.get(k);if(L)o(A,S,L);else{var I=V?V(X,k,S+"",A,N,j):void 0,F=void 0===I;if(F){var D=u(k),Y=!D&&c(k),J=!D&&!Y&&x(k);I=k,D||Y||J?u(X)?I=X:a(X)?I=g(X):Y?(F=!1,I=m(k,!0)):J?(F=!1,I=p(k,!0)):I=[]:d(k)||e(k)?(I=X,e(X)?I=C(X):(!h(X)||l(X))&&(I=f(k))):F=!1}F&&(j.set(k,I),$(I,k,P,V,j),j.delete(k)),o(A,S,I)}}},2168:(y,E,r)=>{var o=r(2757),m=r(8137),p=r(2344),g=r(5619),f=r(480),e=r(2502),u=r(1653),a=r(9631),c=r(9812);y.exports=function l(h,d,x){d=d.length?o(d,function(M){return c(M)?function(A){return m(A,1===M.length?M[0]:M)}:M}):[a];var w=-1;d=o(d,e(p));var C=g(h,function(M,A,N){return{criteria:o(d,function(P){return P(M)}),index:++w,value:M}});return f(C,function(M,A){return u(M,A,x)})}},424:(y,E,r)=>{var o=r(4697),m=r(9830);y.exports=function p(g,f){return o(g,f,function(e,u){return m(g,u)})}},4697:(y,E,r)=>{var o=r(8137),m=r(3821),p=r(3916);y.exports=function g(f,e,u){for(var a=-1,c=e.length,l={};++a<c;){var h=e[a],d=o(f,h);u(d,h)&&m(l,p(h,f),d)}return l}},1740:y=>{y.exports=function E(r){return function(o){return o?.[r]}}},5058:(y,E,r)=>{var o=r(8137);y.exports=function m(p){return function(g){return o(g,p)}}},3404:y=>{var E=Math.ceil,r=Math.max;y.exports=function o(m,p,g,f){for(var e=-1,u=r(E((p-m)/(g||1)),0),a=Array(u);u--;)a[f?u:++e]=m,m+=g;return a}},4087:y=>{y.exports=function E(r,o,m,p,g){return g(r,function(f,e,u){m=p?(p=!1,f):o(m,f,e,u)}),m}},8591:(y,E,r)=>{var o=r(9631),m=r(8452),p=r(1230);y.exports=function g(f,e){return p(m(f,e,o),f+"")}},3821:(y,E,r)=>{var o=r(9220),m=r(3916),p=r(8426),g=r(3278),f=r(8130);y.exports=function e(u,a,c,l){if(!g(u))return u;for(var h=-1,d=(a=m(a,u)).length,x=d-1,w=u;null!=w&&++h<d;){var C=f(a[h]),M=c;if("__proto__"===C||"constructor"===C||"prototype"===C)return u;if(h!=x){var A=w[C];void 0===(M=l?l(A,C,w):void 0)&&(M=g(A)?A:p(a[h+1])?[]:{})}o(w,C,M),w=w[C]}return u}},8565:(y,E,r)=>{var o=r(6205),m=r(4678),p=r(9631);y.exports=m?function(f,e){return m(f,"toString",{configurable:!0,enumerable:!1,value:o(e),writable:!0})}:p},480:y=>{y.exports=function E(r,o){var m=r.length;for(r.sort(o);m--;)r[m]=r[m].value;return r}},9695:y=>{y.exports=function E(r,o){for(var m=-1,p=Array(r);++m<r;)p[m]=o(m);return p}},7005:(y,E,r)=>{var o=r(8516),m=r(2757),p=r(9812),g=r(5153),f=1/0,e=o?o.prototype:void 0,u=e?e.toString:void 0;y.exports=function a(c){if("string"==typeof c)return c;if(p(c))return m(c,a)+"";if(g(c))return u?u.call(c):"";var l=c+"";return"0"==l&&1/c==-f?"-0":l}},5461:(y,E,r)=>{var o=r(7327),m=/^\s+/;y.exports=function p(g){return g&&g.slice(0,o(g)+1).replace(m,"")}},2502:y=>{y.exports=function E(r){return function(o){return r(o)}}},3136:(y,E,r)=>{var o=r(342),m=r(5306),p=r(5878),g=r(1890),f=r(7366),e=r(3578);y.exports=function a(c,l,h){var d=-1,x=m,w=c.length,C=!0,M=[],A=M;if(h)C=!1,x=p;else if(w>=200){var N=l?null:f(c);if(N)return e(N);C=!1,x=g,A=new o}else A=l?[]:M;t:for(;++d<w;){var S=c[d],P=l?l(S):S;if(S=h||0!==S?S:0,C&&P==P){for(var $=A.length;$--;)if(A[$]===P)continue t;l&&A.push(P),M.push(S)}else x(A,P,h)||(A!==M&&A.push(P),M.push(S))}return M}},55:(y,E,r)=>{var o=r(2757);y.exports=function m(p,g){return o(g,function(f){return p[f]})}},1489:y=>{y.exports=function E(r,o,m){for(var p=-1,g=r.length,f=o.length,e={};++p<g;)m(e,r[p],p<f?o[p]:void 0);return e}},1890:y=>{y.exports=function E(r,o){return r.has(o)}},3479:(y,E,r)=>{var o=r(9631);y.exports=function m(p){return"function"==typeof p?p:o}},3916:(y,E,r)=>{var o=r(9812),m=r(2562),p=r(2447),g=r(4717);y.exports=function f(e,u){return o(e)?e:m(e,u)?[e]:p(g(e))}},6220:(y,E,r)=>{var o=r(2737);y.exports=function m(p){var g=new p.constructor(p.byteLength);return new o(g).set(new o(p)),g}},7697:(y,E,r)=>{y=r.nmd(y);var o=r(1464),m=E&&!E.nodeType&&E,p=m&&y&&!y.nodeType&&y,f=p&&p.exports===m?o.Buffer:void 0,e=f?f.allocUnsafe:void 0;y.exports=function u(a,c){if(c)return a.slice();var l=a.length,h=e?e(l):new a.constructor(l);return a.copy(h),h}},5942:(y,E,r)=>{var o=r(6220);y.exports=function m(p,g){var f=g?o(p.buffer):p.buffer;return new p.constructor(f,p.byteOffset,p.byteLength)}},8466:y=>{var E=/\w*$/;y.exports=function r(o){var m=new o.constructor(o.source,E.exec(o));return m.lastIndex=o.lastIndex,m}},4511:(y,E,r)=>{var o=r(8516),m=o?o.prototype:void 0,p=m?m.valueOf:void 0;y.exports=function g(f){return p?Object(p.call(f)):{}}},1334:(y,E,r)=>{var o=r(6220);y.exports=function m(p,g){var f=g?o(p.buffer):p.buffer;return new p.constructor(f,p.byteOffset,p.length)}},4967:(y,E,r)=>{var o=r(5153);y.exports=function m(p,g){if(p!==g){var f=void 0!==p,e=null===p,u=p==p,a=o(p),c=void 0!==g,l=null===g,h=g==g,d=o(g);if(!l&&!d&&!a&&p>g||a&&c&&h&&!l&&!d||e&&c&&h||!f&&h||!u)return 1;if(!e&&!a&&!d&&p<g||d&&f&&u&&!e&&!a||l&&f&&u||!c&&u||!h)return-1}return 0}},1653:(y,E,r)=>{var o=r(4967);y.exports=function m(p,g,f){for(var e=-1,u=p.criteria,a=g.criteria,c=u.length,l=f.length;++e<c;){var h=o(u[e],a[e]);if(h)return e>=l?h:h*("desc"==f[e]?-1:1)}return p.index-g.index}},5820:y=>{y.exports=function E(r,o){var m=-1,p=r.length;for(o||(o=Array(p));++m<p;)o[m]=r[m];return o}},3190:(y,E,r)=>{var o=r(9220),m=r(4399);y.exports=function p(g,f,e,u){var a=!e;e||(e={});for(var c=-1,l=f.length;++c<l;){var h=f[c],d=u?u(e[h],g[h],h,e,g):void 0;void 0===d&&(d=g[h]),a?m(e,h,d):o(e,h,d)}return e}},5308:(y,E,r)=>{var o=r(3190),m=r(181);y.exports=function p(g,f){return o(g,m(g),f)}},7491:(y,E,r)=>{var o=r(3190),m=r(5254);y.exports=function p(g,f){return o(g,m(g),f)}},336:(y,E,r)=>{var o=r(1464);y.exports=o["__core-js_shared__"]},7530:(y,E,r)=>{var o=r(8591),m=r(2721);y.exports=function p(g){return o(function(f,e){var u=-1,a=e.length,c=a>1?e[a-1]:void 0,l=a>2?e[2]:void 0;for(c=g.length>3&&"function"==typeof c?(a--,c):void 0,l&&m(e[0],e[1],l)&&(c=a<3?void 0:c,a=1),f=Object(f);++u<a;){var h=e[u];h&&g(f,h,u,c)}return f})}},5892:(y,E,r)=>{var o=r(7291);y.exports=function m(p,g){return function(f,e){if(null==f)return f;if(!o(f))return p(f,e);for(var u=f.length,a=g?u:-1,c=Object(f);(g?a--:++a<u)&&!1!==e(c[a],a,c););return f}}},9602:y=>{y.exports=function E(r){return function(o,m,p){for(var g=-1,f=Object(o),e=p(o),u=e.length;u--;){var a=e[r?u:++g];if(!1===m(f[a],a,f))break}return o}}},3595:(y,E,r)=>{var o=r(2344),m=r(7291),p=r(2561);y.exports=function g(f){return function(e,u,a){var c=Object(e);if(!m(e)){var l=o(u,3);e=p(e),u=function(d){return l(c[d],d,c)}}var h=f(e,u,a);return h>-1?c[l?e[h]:h]:void 0}}},819:(y,E,r)=>{var o=r(3404),m=r(2721),p=r(8263);y.exports=function g(f){return function(e,u,a){return a&&"number"!=typeof a&&m(e,u,a)&&(u=a=void 0),e=p(e),void 0===u?(u=e,e=0):u=p(u),a=void 0===a?e<u?1:-1:p(a),o(e,u,a,f)}}},7366:(y,E,r)=>{var o=r(7814),m=r(8145),p=r(3578),f=o&&1/p(new o([,-0]))[1]==1/0?function(e){return new o(e)}:m;y.exports=f},4678:(y,E,r)=>{var o=r(4385),m=function(){try{var p=o(Object,"defineProperty");return p({},"",{}),p}catch{}}();y.exports=m},2900:(y,E,r)=>{var o=r(342),m=r(7371),p=r(1890);y.exports=function e(u,a,c,l,h,d){var x=1&c,w=u.length,C=a.length;if(w!=C&&!(x&&C>w))return!1;var M=d.get(u),A=d.get(a);if(M&&A)return M==a&&A==u;var N=-1,S=!0,P=2&c?new o:void 0;for(d.set(u,a),d.set(a,u);++N<w;){var $=u[N],V=a[N];if(l)var j=x?l(V,$,N,a,u,d):l($,V,N,u,a,d);if(void 0!==j){if(j)continue;S=!1;break}if(P){if(!m(a,function(X,k){if(!p(P,k)&&($===X||h($,X,c,l,d)))return P.push(k)})){S=!1;break}}else if($!==V&&!h($,V,c,l,d)){S=!1;break}}return d.delete(u),d.delete(a),S}},7987:(y,E,r)=>{var o=r(8516),m=r(2737),p=r(2651),g=r(2900),f=r(7152),e=r(3578),P=o?o.prototype:void 0,$=P?P.valueOf:void 0;y.exports=function V(j,X,k,L,I,F,D){switch(k){case"[object DataView]":if(j.byteLength!=X.byteLength||j.byteOffset!=X.byteOffset)return!1;j=j.buffer,X=X.buffer;case"[object ArrayBuffer]":return!(j.byteLength!=X.byteLength||!F(new m(j),new m(X)));case"[object Boolean]":case"[object Date]":case"[object Number]":return p(+j,+X);case"[object Error]":return j.name==X.name&&j.message==X.message;case"[object RegExp]":case"[object String]":return j==X+"";case"[object Map]":var Y=f;case"[object Set]":if(Y||(Y=e),j.size!=X.size&&!(1&L))return!1;var B=D.get(j);if(B)return B==X;L|=2,D.set(j,X);var R=g(Y(j),Y(X),L,I,F,D);return D.delete(j),R;case"[object Symbol]":if($)return $.call(j)==$.call(X)}return!1}},7880:(y,E,r)=>{var o=r(3539),g=Object.prototype.hasOwnProperty;y.exports=function f(e,u,a,c,l,h){var d=1&a,x=o(e),w=x.length;if(w!=o(u).length&&!d)return!1;for(var A=w;A--;){var N=x[A];if(!(d?N in u:g.call(u,N)))return!1}var S=h.get(e),P=h.get(u);if(S&&P)return S==u&&P==e;var $=!0;h.set(e,u),h.set(u,e);for(var V=d;++A<w;){var j=e[N=x[A]],X=u[N];if(c)var k=d?c(X,j,N,u,e,h):c(j,X,N,e,u,h);if(!(void 0===k?j===X||l(j,X,a,c,h):k)){$=!1;break}V||(V="constructor"==N)}if($&&!V){var L=e.constructor,I=u.constructor;L!=I&&"constructor"in e&&"constructor"in u&&!("function"==typeof L&&L instanceof L&&"function"==typeof I&&I instanceof I)&&($=!1)}return h.delete(e),h.delete(u),$}},7409:(y,E,r)=>{var o=r(7651),m=r(8452),p=r(1230);y.exports=function g(f){return p(m(f,void 0,o),f+"")}},8657:y=>{var E="object"==typeof global&&global&&global.Object===Object&&global;y.exports=E},3539:(y,E,r)=>{var o=r(9926),m=r(181),p=r(2561);y.exports=function g(f){return o(f,p,m)}},9088:(y,E,r)=>{var o=r(9926),m=r(5254),p=r(7674);y.exports=function g(f){return o(f,p,m)}},9038:(y,E,r)=>{var o=r(3329);y.exports=function m(p,g){var f=p.__data__;return o(g)?f["string"==typeof g?"string":"hash"]:f.map}},613:(y,E,r)=>{var o=r(4745),m=r(2561);y.exports=function p(g){for(var f=m(g),e=f.length;e--;){var u=f[e],a=g[u];f[e]=[u,a,o(a)]}return f}},4385:(y,E,r)=>{var o=r(298),m=r(8737);y.exports=function p(g,f){var e=m(g,f);return o(e)?e:void 0}},6902:(y,E,r)=>{var m=r(2852)(Object.getPrototypeOf,Object);y.exports=m},8488:(y,E,r)=>{var o=r(8516),m=Object.prototype,p=m.hasOwnProperty,g=m.toString,f=o?o.toStringTag:void 0;y.exports=function e(u){var a=p.call(u,f),c=u[f];try{u[f]=void 0;var l=!0}catch{}var h=g.call(u);return l&&(a?u[f]=c:delete u[f]),h}},181:(y,E,r)=>{var o=r(2873),m=r(2260),g=Object.prototype.propertyIsEnumerable,f=Object.getOwnPropertySymbols;y.exports=f?function(u){return null==u?[]:(u=Object(u),o(f(u),function(a){return g.call(u,a)}))}:m},5254:(y,E,r)=>{var o=r(6319),m=r(6902),p=r(181),g=r(2260);y.exports=Object.getOwnPropertySymbols?function(u){for(var a=[];u;)o(a,p(u)),u=m(u);return a}:g},828:(y,E,r)=>{var o=r(5013),m=r(1012),p=r(1339),g=r(7814),f=r(2248),e=r(1057),u=r(8020),a="[object Map]",l="[object Promise]",h="[object Set]",d="[object WeakMap]",x="[object DataView]",w=u(o),C=u(m),M=u(p),A=u(g),N=u(f),S=e;(o&&S(new o(new ArrayBuffer(1)))!=x||m&&S(new m)!=a||p&&S(p.resolve())!=l||g&&S(new g)!=h||f&&S(new f)!=d)&&(S=function(P){var $=e(P),V="[object Object]"==$?P.constructor:void 0,j=V?u(V):"";if(j)switch(j){case w:return x;case C:return a;case M:return l;case A:return h;case N:return d}return $}),y.exports=S},8737:y=>{y.exports=function E(r,o){return r?.[o]}},5121:(y,E,r)=>{var o=r(3916),m=r(6265),p=r(9812),g=r(8426),f=r(8845),e=r(8130);y.exports=function u(a,c,l){for(var h=-1,d=(c=o(c,a)).length,x=!1;++h<d;){var w=e(c[h]);if(!(x=null!=a&&l(a,w)))break;a=a[w]}return x||++h!=d?x:!!(d=null==a?0:a.length)&&f(d)&&g(w,d)&&(p(a)||m(a))}},9191:y=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");y.exports=function u(a){return e.test(a)}},6399:(y,E,r)=>{var o=r(8247);y.exports=function m(){this.__data__=o?o(null):{},this.size=0}},1483:y=>{y.exports=function E(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}},3434:(y,E,r)=>{var o=r(8247),g=Object.prototype.hasOwnProperty;y.exports=function f(e){var u=this.__data__;if(o){var a=u[e];return"__lodash_hash_undefined__"===a?void 0:a}return g.call(u,e)?u[e]:void 0}},5230:(y,E,r)=>{var o=r(8247),p=Object.prototype.hasOwnProperty;y.exports=function g(f){var e=this.__data__;return o?void 0!==e[f]:p.call(e,f)}},3718:(y,E,r)=>{var o=r(8247);y.exports=function p(g,f){var e=this.__data__;return this.size+=this.has(g)?0:1,e[g]=o&&void 0===f?"__lodash_hash_undefined__":f,this}},9900:y=>{var r=Object.prototype.hasOwnProperty;y.exports=function o(m){var p=m.length,g=new m.constructor(p);return p&&"string"==typeof m[0]&&r.call(m,"index")&&(g.index=m.index,g.input=m.input),g}},9686:(y,E,r)=>{var o=r(6220),m=r(5942),p=r(8466),g=r(4511),f=r(1334);y.exports=function k(L,I,F){var D=L.constructor;switch(I){case"[object ArrayBuffer]":return o(L);case"[object Boolean]":case"[object Date]":return new D(+L);case"[object DataView]":return m(L,F);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return f(L,F);case"[object Map]":case"[object Set]":return new D;case"[object Number]":case"[object String]":return new D(L);case"[object RegExp]":return p(L);case"[object Symbol]":return g(L)}}},2870:(y,E,r)=>{var o=r(9593),m=r(6902),p=r(3164);y.exports=function g(f){return"function"!=typeof f.constructor||p(f)?{}:o(m(f))}},8892:(y,E,r)=>{var o=r(8516),m=r(6265),p=r(9812),g=o?o.isConcatSpreadable:void 0;y.exports=function f(e){return p(e)||m(e)||!!(g&&e&&e[g])}},8426:y=>{var r=/^(?:0|[1-9]\d*)$/;y.exports=function o(m,p){var g=typeof m;return!!(p=p??9007199254740991)&&("number"==g||"symbol"!=g&&r.test(m))&&m>-1&&m%1==0&&m<p}},2721:(y,E,r)=>{var o=r(2651),m=r(7291),p=r(8426),g=r(3278);y.exports=function f(e,u,a){if(!g(a))return!1;var c=typeof u;return!!("number"==c?m(a)&&p(u,a.length):"string"==c&&u in a)&&o(a[u],e)}},2562:(y,E,r)=>{var o=r(9812),m=r(5153),p=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,g=/^\w*$/;y.exports=function f(e,u){if(o(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!m(e))||g.test(e)||!p.test(e)||null!=u&&e in Object(u)}},3329:y=>{y.exports=function E(r){var o=typeof r;return"string"==o||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r}},8401:(y,E,r)=>{var g,o=r(336),m=(g=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";y.exports=function p(g){return!!m&&m in g}},3164:y=>{var E=Object.prototype;y.exports=function r(o){var m=o&&o.constructor;return o===("function"==typeof m&&m.prototype||E)}},4745:(y,E,r)=>{var o=r(3278);y.exports=function m(p){return p==p&&!o(p)}},3643:y=>{y.exports=function E(){this.__data__=[],this.size=0}},7103:(y,E,r)=>{var o=r(6316),p=Array.prototype.splice;y.exports=function g(f){var e=this.__data__,u=o(e,f);return!(u<0||(u==e.length-1?e.pop():p.call(e,u,1),--this.size,0))}},62:(y,E,r)=>{var o=r(6316);y.exports=function m(p){var g=this.__data__,f=o(g,p);return f<0?void 0:g[f][1]}},1610:(y,E,r)=>{var o=r(6316);y.exports=function m(p){return o(this.__data__,p)>-1}},1090:(y,E,r)=>{var o=r(6316);y.exports=function m(p,g){var f=this.__data__,e=o(f,p);return e<0?(++this.size,f.push([p,g])):f[e][1]=g,this}},1891:(y,E,r)=>{var o=r(3028),m=r(5752),p=r(1012);y.exports=function g(){this.size=0,this.__data__={hash:new o,map:new(p||m),string:new o}}},2759:(y,E,r)=>{var o=r(9038);y.exports=function m(p){var g=o(this,p).delete(p);return this.size-=g?1:0,g}},7766:(y,E,r)=>{var o=r(9038);y.exports=function m(p){return o(this,p).get(p)}},322:(y,E,r)=>{var o=r(9038);y.exports=function m(p){return o(this,p).has(p)}},7258:(y,E,r)=>{var o=r(9038);y.exports=function m(p,g){var f=o(this,p),e=f.size;return f.set(p,g),this.size+=f.size==e?0:1,this}},7152:y=>{y.exports=function E(r){var o=-1,m=Array(r.size);return r.forEach(function(p,g){m[++o]=[g,p]}),m}},2878:y=>{y.exports=function E(r,o){return function(m){return null!=m&&m[r]===o&&(void 0!==o||r in Object(m))}}},8339:(y,E,r)=>{var o=r(9605);y.exports=function p(g){var f=o(g,function(u){return 500===e.size&&e.clear(),u}),e=f.cache;return f}},8247:(y,E,r)=>{var m=r(4385)(Object,"create");y.exports=m},6199:(y,E,r)=>{var m=r(2852)(Object.keys,Object);y.exports=m},908:y=>{y.exports=function E(r){var o=[];if(null!=r)for(var m in Object(r))o.push(m);return o}},512:(y,E,r)=>{y=r.nmd(y);var o=r(8657),m=E&&!E.nodeType&&E,p=m&&y&&!y.nodeType&&y,f=p&&p.exports===m&&o.process,e=function(){try{return p&&p.require&&p.require("util").types||f&&f.binding&&f.binding("util")}catch{}}();y.exports=e},3327:y=>{var r=Object.prototype.toString;y.exports=function o(m){return r.call(m)}},2852:y=>{y.exports=function E(r,o){return function(m){return r(o(m))}}},8452:(y,E,r)=>{var o=r(1458),m=Math.max;y.exports=function p(g,f,e){return f=m(void 0===f?g.length-1:f,0),function(){for(var u=arguments,a=-1,c=m(u.length-f,0),l=Array(c);++a<c;)l[a]=u[f+a];a=-1;for(var h=Array(f+1);++a<f;)h[a]=u[a];return h[f]=e(l),o(g,this,h)}}},1464:(y,E,r)=>{var o=r(8657),m="object"==typeof self&&self&&self.Object===Object&&self,p=o||m||Function("return this")();y.exports=p},3609:y=>{y.exports=function E(r,o){if(("constructor"!==o||"function"!=typeof r[o])&&"__proto__"!=o)return r[o]}},4643:y=>{y.exports=function r(o){return this.__data__.set(o,"__lodash_hash_undefined__"),this}},2768:y=>{y.exports=function E(r){return this.__data__.has(r)}},3578:y=>{y.exports=function E(r){var o=-1,m=Array(r.size);return r.forEach(function(p){m[++o]=p}),m}},1230:(y,E,r)=>{var o=r(8565),p=r(2770)(o);y.exports=p},2770:y=>{var o=Date.now;y.exports=function m(p){var g=0,f=0;return function(){var e=o(),u=16-(e-f);if(f=e,u>0){if(++g>=800)return arguments[0]}else g=0;return p.apply(void 0,arguments)}}},8945:(y,E,r)=>{var o=r(5752);y.exports=function m(){this.__data__=new o,this.size=0}},8425:y=>{y.exports=function E(r){var o=this.__data__,m=o.delete(r);return this.size=o.size,m}},5280:y=>{y.exports=function E(r){return this.__data__.get(r)}},324:y=>{y.exports=function E(r){return this.__data__.has(r)}},4516:(y,E,r)=>{var o=r(5752),m=r(1012),p=r(752);y.exports=function f(e,u){var a=this.__data__;if(a instanceof o){var c=a.__data__;if(!m||c.length<199)return c.push([e,u]),this.size=++a.size,this;a=this.__data__=new p(c)}return a.set(e,u),this.size=a.size,this}},5220:y=>{y.exports=function E(r,o,m){for(var p=m-1,g=r.length;++p<g;)if(r[p]===o)return p;return-1}},8800:(y,E,r)=>{var o=r(8916),m=r(9191),p=r(2320);y.exports=function g(f){return m(f)?p(f):o(f)}},2447:(y,E,r)=>{var o=r(8339),m=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p=/\\(\\)?/g,g=o(function(f){var e=[];return 46===f.charCodeAt(0)&&e.push(""),f.replace(m,function(u,a,c,l){e.push(c?l.replace(p,"$1"):a||u)}),e});y.exports=g},8130:(y,E,r)=>{var o=r(5153),m=1/0;y.exports=function p(g){if("string"==typeof g||o(g))return g;var f=g+"";return"0"==f&&1/g==-m?"-0":f}},8020:y=>{var r=Function.prototype.toString;y.exports=function o(m){if(null!=m){try{return r.call(m)}catch{}try{return m+""}catch{}}return""}},7327:y=>{var E=/\s/;y.exports=function r(o){for(var m=o.length;m--&&E.test(o.charAt(m)););return m}},2320:y=>{var E="\\ud800-\\udfff",f="["+E+"]",e="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",u="\\ud83c[\\udffb-\\udfff]",c="[^"+E+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",x="(?:"+e+"|"+u+")?",w="[\\ufe0e\\ufe0f]?",M=w+x+"(?:\\u200d(?:"+[c,l,h].join("|")+")"+w+x+")*",A="(?:"+[c+e+"?",e,l,h,f].join("|")+")",N=RegExp(u+"(?="+u+")|"+A+M,"g");y.exports=function S(P){for(var $=N.lastIndex=0;N.test(P);)++$;return $}},1132:(y,E,r)=>{var o=r(5052);y.exports=function p(g){return o(g,4)}},4418:(y,E,r)=>{var o=r(5052);y.exports=function g(f){return o(f,5)}},6205:y=>{y.exports=function E(r){return function(){return r}}},1931:(y,E,r)=>{var o=r(8591),m=r(2651),p=r(2721),g=r(7674),f=Object.prototype,e=f.hasOwnProperty,u=o(function(a,c){a=Object(a);var l=-1,h=c.length,d=h>2?c[2]:void 0;for(d&&p(c[0],c[1],d)&&(h=1);++l<h;)for(var x=c[l],w=g(x),C=-1,M=w.length;++C<M;){var A=w[C],N=a[A];(void 0===N||m(N,f[A])&&!e.call(a,A))&&(a[A]=x[A])}return a});y.exports=u},3572:(y,E,r)=>{y.exports=r(1091)},2651:y=>{y.exports=function E(r,o){return r===o||r!=r&&o!=o}},5155:(y,E,r)=>{var o=r(2873),m=r(2755),p=r(2344),g=r(9812);y.exports=function f(e,u){return(g(e)?o:m)(e,p(u,3))}},7838:(y,E,r)=>{var p=r(3595)(r(8376));y.exports=p},8376:(y,E,r)=>{var o=r(5736),m=r(2344),p=r(1284),g=Math.max;y.exports=function f(e,u,a){var c=null==e?0:e.length;if(!c)return-1;var l=null==a?0:p(a);return l<0&&(l=g(c+l,0)),o(e,m(u,3),l)}},7651:(y,E,r)=>{var o=r(3091);y.exports=function m(p){return null!=p&&p.length?o(p,1):[]}},1091:(y,E,r)=>{var o=r(3177),m=r(868),p=r(3479),g=r(9812);y.exports=function f(e,u){return(g(e)?o:m)(e,p(u))}},4181:(y,E,r)=>{var o=r(2898),m=r(3479),p=r(7674);y.exports=function g(f,e){return null==f?f:o(f,m(e),p)}},6681:(y,E,r)=>{var o=r(8137);y.exports=function m(p,g,f){var e=null==p?void 0:o(p,g);return void 0===e?f:e}},2789:(y,E,r)=>{var o=r(4165),m=r(5121);y.exports=function p(g,f){return null!=g&&m(g,f,o)}},9830:(y,E,r)=>{var o=r(1398),m=r(5121);y.exports=function p(g,f){return null!=g&&m(g,f,o)}},9631:y=>{y.exports=function E(r){return r}},6265:(y,E,r)=>{var o=r(8313),m=r(7433),p=Object.prototype,g=p.hasOwnProperty,f=p.propertyIsEnumerable,e=o(function(){return arguments}())?o:function(u){return m(u)&&g.call(u,"callee")&&!f.call(u,"callee")};y.exports=e},9812:y=>{y.exports=Array.isArray},7291:(y,E,r)=>{var o=r(8653),m=r(8845);y.exports=function p(g){return null!=g&&m(g.length)&&!o(g)}},5152:(y,E,r)=>{var o=r(7291),m=r(7433);y.exports=function p(g){return m(g)&&o(g)}},3151:(y,E,r)=>{y=r.nmd(y);var o=r(1464),m=r(5710),p=E&&!E.nodeType&&E,g=p&&y&&!y.nodeType&&y,e=g&&g.exports===p?o.Buffer:void 0;y.exports=(e?e.isBuffer:void 0)||m},5488:(y,E,r)=>{var o=r(3809),m=r(828),p=r(6265),g=r(9812),f=r(7291),e=r(3151),u=r(3164),a=r(1028),d=Object.prototype.hasOwnProperty;y.exports=function x(w){if(null==w)return!0;if(f(w)&&(g(w)||"string"==typeof w||"function"==typeof w.splice||e(w)||a(w)||p(w)))return!w.length;var C=m(w);if("[object Map]"==C||"[object Set]"==C)return!w.size;if(u(w))return!o(w).length;for(var M in w)if(d.call(w,M))return!1;return!0}},8653:(y,E,r)=>{var o=r(1057),m=r(3278);y.exports=function u(a){if(!m(a))return!1;var c=o(a);return"[object Function]"==c||"[object GeneratorFunction]"==c||"[object AsyncFunction]"==c||"[object Proxy]"==c}},8845:y=>{y.exports=function r(o){return"number"==typeof o&&o>-1&&o%1==0&&o<=9007199254740991}},6879:(y,E,r)=>{var o=r(6095),m=r(2502),p=r(512),g=p&&p.isMap,f=g?m(g):o;y.exports=f},3278:y=>{y.exports=function E(r){var o=typeof r;return null!=r&&("object"==o||"function"==o)}},7433:y=>{y.exports=function E(r){return null!=r&&"object"==typeof r}},9970:(y,E,r)=>{var o=r(1057),m=r(6902),p=r(7433),u=Function.prototype.toString,a=Object.prototype.hasOwnProperty,c=u.call(Object);y.exports=function l(h){if(!p(h)||"[object Object]"!=o(h))return!1;var d=m(h);if(null===d)return!0;var x=a.call(d,"constructor")&&d.constructor;return"function"==typeof x&&x instanceof x&&u.call(x)==c}},4257:(y,E,r)=>{var o=r(1889),m=r(2502),p=r(512),g=p&&p.isSet,f=g?m(g):o;y.exports=f},8124:(y,E,r)=>{var o=r(1057),m=r(9812),p=r(7433);y.exports=function f(e){return"string"==typeof e||!m(e)&&p(e)&&"[object String]"==o(e)}},5153:(y,E,r)=>{var o=r(1057),m=r(7433);y.exports=function g(f){return"symbol"==typeof f||m(f)&&"[object Symbol]"==o(f)}},1028:(y,E,r)=>{var o=r(8068),m=r(2502),p=r(512),g=p&&p.isTypedArray,f=g?m(g):o;y.exports=f},9261:y=>{y.exports=function E(r){return void 0===r}},2561:(y,E,r)=>{var o=r(8548),m=r(3809),p=r(7291);y.exports=function g(f){return p(f)?o(f):m(f)}},7674:(y,E,r)=>{var o=r(8548),m=r(1194),p=r(7291);y.exports=function g(f){return p(f)?o(f,!0):m(f)}},5649:y=>{y.exports=function E(r){var o=null==r?0:r.length;return o?r[o-1]:void 0}},339:(y,E,r)=>{var o=r(2757),m=r(2344),p=r(5619),g=r(9812);y.exports=function f(e,u){return(g(e)?o:p)(e,m(u,3))}},9221:(y,E,r)=>{var o=r(4399),m=r(3432),p=r(2344);y.exports=function g(f,e){var u={};return e=p(e,3),m(f,function(a,c,l){o(u,c,e(a,c,l))}),u}},5147:(y,E,r)=>{var o=r(6350),m=r(9770),p=r(9631);y.exports=function g(f){return f&&f.length?o(f,p,m):void 0}},9605:(y,E,r)=>{var o=r(752);function p(g,f){if("function"!=typeof g||null!=f&&"function"!=typeof f)throw new TypeError("Expected a function");var e=function(){var u=arguments,a=f?f.apply(this,u):u[0],c=e.cache;if(c.has(a))return c.get(a);var l=g.apply(this,u);return e.cache=c.set(a,l)||c,l};return e.cache=new(p.Cache||o),e}p.Cache=o,y.exports=p},3413:(y,E,r)=>{var o=r(5765),p=r(7530)(function(g,f,e){o(g,f,e)});y.exports=p},2665:(y,E,r)=>{var o=r(6350),m=r(1181),p=r(9631);y.exports=function g(f){return f&&f.length?o(f,p,m):void 0}},9924:(y,E,r)=>{var o=r(6350),m=r(2344),p=r(1181);y.exports=function g(f,e){return f&&f.length?o(f,m(e,2),p):void 0}},8145:y=>{y.exports=function E(){}},501:(y,E,r)=>{var o=r(1464);y.exports=function(){return o.Date.now()}},9176:(y,E,r)=>{var o=r(424),p=r(7409)(function(g,f){return null==g?{}:o(g,f)});y.exports=p},5788:(y,E,r)=>{var o=r(1740),m=r(5058),p=r(2562),g=r(8130);y.exports=function f(e){return p(e)?o(g(e)):m(e)}},700:(y,E,r)=>{var m=r(819)();y.exports=m},9687:(y,E,r)=>{var o=r(7325),m=r(868),p=r(2344),g=r(4087),f=r(9812);y.exports=function e(u,a,c){var l=f(u)?o:g,h=arguments.length<3;return l(u,p(a,4),c,h,m)}},120:(y,E,r)=>{var o=r(3809),m=r(828),p=r(7291),g=r(8124),f=r(8800);y.exports=function a(c){if(null==c)return 0;if(p(c))return g(c)?f(c):c.length;var l=m(c);return"[object Map]"==l||"[object Set]"==l?c.size:o(c).length}},9136:(y,E,r)=>{var o=r(3091),m=r(2168),p=r(8591),g=r(2721),f=p(function(e,u){if(null==e)return[];var a=u.length;return a>1&&g(e,u[0],u[1])?u=[]:a>2&&g(u[0],u[1],u[2])&&(u=[u[0]]),m(e,o(u,1),[])});y.exports=f},2260:y=>{y.exports=function E(){return[]}},5710:y=>{y.exports=function E(){return!1}},8263:(y,E,r)=>{var o=r(3521),m=1/0;y.exports=function g(f){return f?(f=o(f))===m||f===-m?17976931348623157e292*(f<0?-1:1):f==f?f:0:0===f?f:0}},1284:(y,E,r)=>{var o=r(8263);y.exports=function m(p){var g=o(p),f=g%1;return g==g?f?g-f:g:0}},3521:(y,E,r)=>{var o=r(5461),m=r(3278),p=r(5153),f=/^[-+]0x[0-9a-f]+$/i,e=/^0b[01]+$/i,u=/^0o[0-7]+$/i,a=parseInt;y.exports=function c(l){if("number"==typeof l)return l;if(p(l))return NaN;if(m(l)){var h="function"==typeof l.valueOf?l.valueOf():l;l=m(h)?h+"":h}if("string"!=typeof l)return 0===l?l:+l;l=o(l);var d=e.test(l);return d||u.test(l)?a(l.slice(2),d?2:8):f.test(l)?NaN:+l}},6729:(y,E,r)=>{var o=r(3190),m=r(7674);y.exports=function p(g){return o(g,m(g))}},4717:(y,E,r)=>{var o=r(7005);y.exports=function m(p){return null==p?"":o(p)}},5341:(y,E,r)=>{var o=r(3177),m=r(9593),p=r(3432),g=r(2344),f=r(6902),e=r(9812),u=r(3151),a=r(8653),c=r(3278),l=r(1028);y.exports=function h(d,x,w){var C=e(d),M=C||u(d)||l(d);if(x=g(x,4),null==w){var A=d&&d.constructor;w=M?C?new A:[]:c(d)&&a(A)?m(f(d)):{}}return(M?o:p)(d,function(N,S,P){return x(w,N,S,P)}),w}},8898:(y,E,r)=>{var o=r(3091),m=r(8591),p=r(3136),g=r(5152),f=m(function(e){return p(o(e,1,g,!0))});y.exports=f},9519:(y,E,r)=>{var o=r(4717),m=0;y.exports=function p(g){var f=++m;return o(g)+f}},7127:(y,E,r)=>{var o=r(55),m=r(2561);y.exports=function p(g){return null==g?[]:o(g,m(g))}},785:(y,E,r)=>{var o=r(9220),m=r(1489);y.exports=function p(g,f){return m(g||[],f||[],o)}},6728:(y,E,r)=>{"use strict";function o(m){for(var p in m)E.hasOwnProperty(p)||(E[p]=m[p])}Object.defineProperty(E,"__esModule",{value:!0}),o(r(7200)),o(r(3519)),o(r(5823)),o(r(1133)),o(r(4976)),o(r(6167)),o(r(9251)),o(r(8792)),o(r(9524)),o(r(4106)),o(r(1066)),o(r(3733)),o(r(7840)),o(r(8551)),o(r(5213)),o(r(713))},7200:function(y,E,r){"use strict";var o=this&&this.__extends||function(){var f=function(e,u){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)c.hasOwnProperty(l)&&(a[l]=c[l])})(e,u)};return function(e,u){function a(){this.constructor=e}f(e,u),e.prototype=null===u?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(E,"__esModule",{value:!0});var m=r(9251),p=function(f){function e(u){var a=f.call(this)||this,l=u;return l.trigger&&(a.trigger=l.trigger),l.kick&&(a.kick=l.kick),l.drag&&(a.drag=l.drag),l.on&&(a.on=l.on),a.dragstart=a.dragStart=m.Layout.dragStart,a.dragend=a.dragEnd=m.Layout.dragEnd,a}return o(e,f),e.prototype.trigger=function(u){},e.prototype.kick=function(){},e.prototype.drag=function(){},e.prototype.on=function(u,a){return this},e}(m.Layout);E.LayoutAdaptor=p,E.adaptor=function g(f){return new p(f)}},713:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=r(9251),m=r(4976);E.gridify=function p(e,u,a,c){return e.cola.start(0,0,0,10,!1),function g(e,u,a,c){e.forEach(function(h){h.routerNode={name:h.name,bounds:h.bounds.inflate(-a)}}),u.forEach(function(h){h.routerNode={bounds:h.bounds.inflate(-c),children:(typeof h.groups<"u"?h.groups.map(function(d){return e.length+d.id}):[]).concat(typeof h.leaves<"u"?h.leaves.map(function(d){return d.index}):[])}});var l=e.concat(u).map(function(h,d){return h.routerNode.id=d,h.routerNode});return new m.GridRouter(l,{getChildren:function(h){return h.children},getBounds:function(h){return h.bounds}},a-c)}(e.cola.nodes(),e.cola.groups(),a,c).routeEdges(e.powerGraph.powerEdges,u,function(h){return h.source.routerNode.id},function(h){return h.target.routerNode.id})},E.powerGraphGridLayout=function f(e,u,a){var c;e.nodes.forEach(function(x,w){return x.index=w}),(new o.Layout).avoidOverlaps(!1).nodes(e.nodes).links(e.links).powerGraphGroups(function(x){(c=x).groups.forEach(function(w){return w.padding=a})});var l=e.nodes.length,h=[],d=e.nodes.slice(0);return d.forEach(function(x,w){return x.index=w}),c.groups.forEach(function(x){var w=x.index=x.id+l;d.push(x),typeof x.leaves<"u"&&x.leaves.forEach(function(C){return h.push({source:w,target:C.index})}),typeof x.groups<"u"&&x.groups.forEach(function(C){return h.push({source:w,target:C.id+l})})}),c.powerEdges.forEach(function(x){h.push({source:x.source.index,target:x.target.index})}),(new o.Layout).size(u).nodes(d).links(h).avoidOverlaps(!1).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,!1),{cola:(new o.Layout).convergenceThreshold(.001).size(u).avoidOverlaps(!0).nodes(e.nodes).links(e.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(x){(c=x).groups.forEach(function(w){w.padding=a})}).start(50,0,100,0,!1),powerGraph:c}}},3519:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=r(3002),m=r(5085);E.d3adaptor=function p(f){return!f||function g(f){return f.version&&null!==f.version.match(/^3\./)}(f)?new o.D3StyleLayoutAdaptor:new m.D3StyleLayoutAdaptor(f)}},3002:function(y,E,r){"use strict";var o=this&&this.__extends||function(){var f=function(e,u){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)c.hasOwnProperty(l)&&(a[l]=c[l])})(e,u)};return function(e,u){function a(){this.constructor=e}f(e,u),e.prototype=null===u?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(E,"__esModule",{value:!0});var m=r(9251),p=function(f){function e(){var u=f.call(this)||this;u.event=d3.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=u;return u.drag=function(){if(!l)var l=d3.behavior.drag().origin(m.Layout.dragOrigin).on("dragstart.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,d3.event),a.resume()}).on("dragend.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return l;this.call(l)},u}return o(e,f),e.prototype.trigger=function(u){var a={type:m.EventType[u.type],alpha:u.alpha,stress:u.stress};this.event[a.type](a)},e.prototype.kick=function(){var u=this;d3.timer(function(){return f.prototype.tick.call(u)})},e.prototype.on=function(u,a){return this.event.on("string"==typeof u?u:m.EventType[u],a),this},e}(m.Layout);E.D3StyleLayoutAdaptor=p,E.d3adaptor=function g(){return new p}},5085:function(y,E,r){"use strict";var o=this&&this.__extends||function(){var g=function(f,e){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,a){u.__proto__=a}||function(u,a){for(var c in a)a.hasOwnProperty(c)&&(u[c]=a[c])})(f,e)};return function(f,e){function u(){this.constructor=f}g(f,e),f.prototype=null===e?Object.create(e):(u.prototype=e.prototype,new u)}}();Object.defineProperty(E,"__esModule",{value:!0});var m=r(9251),p=function(g){function f(e){var u=g.call(this)||this;u.d3Context=e,u.event=e.dispatch(m.EventType[m.EventType.start],m.EventType[m.EventType.tick],m.EventType[m.EventType.end]);var a=u;return u.drag=function(){if(!l)var l=e.drag().subject(m.Layout.dragOrigin).on("start.d3adaptor",m.Layout.dragStart).on("drag.d3adaptor",function(h){m.Layout.drag(h,e.event),a.resume()}).on("end.d3adaptor",m.Layout.dragEnd);if(!arguments.length)return l;arguments[0].call(l)},u}return o(f,g),f.prototype.trigger=function(e){var u={type:m.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event.call(u.type,u)},f.prototype.kick=function(){var e=this,u=this.d3Context.timer(function(){return g.prototype.tick.call(e)&&u.stop()})},f.prototype.on=function(e,u){return this.event.on("string"==typeof e?e:m.EventType[e],u),this},f}(m.Layout);E.D3StyleLayoutAdaptor=p},5823:(y,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=function(){function p(){this.locks={}}return p.prototype.add=function(g,f){this.locks[g]=f},p.prototype.clear=function(){this.locks={}},p.prototype.isEmpty=function(){for(var g in this.locks)return!1;return!0},p.prototype.apply=function(g){for(var f in this.locks)g(Number(f),this.locks[f])},p}();E.Locks=r;var o=function(){function p(g,f,e){void 0===e&&(e=null),this.D=f,this.G=e,this.threshold=1e-4,this.numGridSnapNodes=0,this.snapGridSize=100,this.snapStrength=1e3,this.scaleSnapByMaxH=!1,this.random=new m,this.project=null,this.x=g,this.k=g.length;var u=this.n=g[0].length;this.H=new Array(this.k),this.g=new Array(this.k),this.Hd=new Array(this.k),this.a=new Array(this.k),this.b=new Array(this.k),this.c=new Array(this.k),this.d=new Array(this.k),this.e=new Array(this.k),this.ia=new Array(this.k),this.ib=new Array(this.k),this.xtmp=new Array(this.k),this.locks=new r,this.minD=Number.MAX_VALUE;for(var c,a=u;a--;)for(c=u;--c>a;){var l=f[a][c];l>0&&l<this.minD&&(this.minD=l)}for(this.minD===Number.MAX_VALUE&&(this.minD=1),a=this.k;a--;){for(this.g[a]=new Array(u),this.H[a]=new Array(u),c=u;c--;)this.H[a][c]=new Array(u);this.Hd[a]=new Array(u),this.a[a]=new Array(u),this.b[a]=new Array(u),this.c[a]=new Array(u),this.d[a]=new Array(u),this.e[a]=new Array(u),this.ia[a]=new Array(u),this.ib[a]=new Array(u),this.xtmp[a]=new Array(u)}}return p.createSquareMatrix=function(g,f){for(var e=new Array(g),u=0;u<g;++u){e[u]=new Array(g);for(var a=0;a<g;++a)e[u][a]=f(u,a)}return e},p.prototype.offsetDir=function(){for(var g=this,f=new Array(this.k),e=0,u=0;u<this.k;++u){var a=f[u]=this.random.getNextBetween(.01,1)-.5;e+=a*a}return e=Math.sqrt(e),f.map(function(c){return c*(g.minD/e)})},p.prototype.computeDerivatives=function(g){var f=this,e=this.n;if(!(e<1)){for(var u,a=new Array(this.k),c=new Array(this.k),l=new Array(this.k),h=0,d=0;d<e;++d){for(u=0;u<this.k;++u)l[u]=this.g[u][d]=0;for(var x=0;x<e;++x)if(d!==x){for(var w=e;w--;){var C=0;for(u=0;u<this.k;++u){var M=a[u]=g[u][d]-g[u][x];C+=c[u]=M*M}if(C>1e-9)break;var A=this.offsetDir();for(u=0;u<this.k;++u)g[u][x]+=A[u]}var N=Math.sqrt(C),S=this.D[d][x],P=null!=this.G?this.G[d][x]:1;if(P>1&&N>S||!isFinite(S)){for(u=0;u<this.k;++u)this.H[u][d][x]=0;continue}P>1&&(P=1);var $=S*S,V=2*P*(N-S)/($*N),j=N*N*N,X=2*-P/($*j);for(isFinite(V)||console.log(V),u=0;u<this.k;++u)this.g[u][d]+=a[u]*V,l[u]-=this.H[u][d][x]=X*(j+S*(c[u]-C)+N*C)}for(u=0;u<this.k;++u)h=Math.max(h,this.H[u][d][d]=l[u])}var k=this.snapGridSize/2,L=this.snapGridSize,F=this.snapStrength/(k*k),D=this.numGridSnapNodes;for(d=0;d<D;++d)for(u=0;u<this.k;++u){var Y=this.x[u][d],J=Y/L,B=J%1,R=J-B;-k<(M=Math.abs(B)<=.5?Y-R*L:Y>0?Y-(R+1)*L:Y-(R-1)*L)&&M<=k&&(this.scaleSnapByMaxH?(this.g[u][d]+=h*F*M,this.H[u][d][d]+=h*F):(this.g[u][d]+=F*M,this.H[u][d][d]+=F))}this.locks.isEmpty()||this.locks.apply(function(Q,it){for(u=0;u<f.k;++u)f.H[u][Q][Q]+=h,f.g[u][Q]-=h*(it[u]-g[u][Q])})}},p.dotProd=function(g,f){for(var e=0,u=g.length;u--;)e+=g[u]*f[u];return e},p.rightMultiply=function(g,f,e){for(var u=g.length;u--;)e[u]=p.dotProd(g[u],f)},p.prototype.computeStepSize=function(g){for(var f=0,e=0,u=0;u<this.k;++u)f+=p.dotProd(this.g[u],g[u]),p.rightMultiply(this.H[u],g[u],this.Hd[u]),e+=p.dotProd(g[u],this.Hd[u]);return 0!==e&&isFinite(e)?1*f/e:0},p.prototype.reduceStress=function(){this.computeDerivatives(this.x);for(var g=this.computeStepSize(this.g),f=0;f<this.k;++f)this.takeDescentStep(this.x[f],this.g[f],g);return this.computeStress()},p.copy=function(g,f){for(var e=g.length,u=f[0].length,a=0;a<e;++a)for(var c=0;c<u;++c)f[a][c]=g[a][c]},p.prototype.stepAndProject=function(g,f,e,u){p.copy(g,f),this.takeDescentStep(f[0],e[0],u),this.project&&this.project[0](g[0],g[1],f[0]),this.takeDescentStep(f[1],e[1],u),this.project&&this.project[1](f[0],g[1],f[1]);for(var a=2;a<this.k;a++)this.takeDescentStep(f[a],e[a],u)},p.mApply=function(g,f,e){for(var u=g;u-- >0;)for(var a=f;a-- >0;)e(u,a)},p.prototype.matrixApply=function(g){p.mApply(this.k,this.n,g)},p.prototype.computeNextPosition=function(g,f){var e=this;this.computeDerivatives(g);var u=this.computeStepSize(this.g);if(this.stepAndProject(g,f,this.g,u),this.project){this.matrixApply(function(c,l){return e.e[c][l]=g[c][l]-f[c][l]});var a=this.computeStepSize(this.e);a=Math.max(.2,Math.min(a,1)),this.stepAndProject(g,f,this.e,a)}},p.prototype.run=function(g){for(var f=Number.MAX_VALUE,e=!1;!e&&g-- >0;){var u=this.rungeKutta();e=Math.abs(f/u-1)<this.threshold,f=u}return f},p.prototype.rungeKutta=function(){var g=this;this.computeNextPosition(this.x,this.a),p.mid(this.x,this.a,this.ia),this.computeNextPosition(this.ia,this.b),p.mid(this.x,this.b,this.ib),this.computeNextPosition(this.ib,this.c),this.computeNextPosition(this.c,this.d);var f=0;return this.matrixApply(function(e,u){var a=(g.a[e][u]+2*g.b[e][u]+2*g.c[e][u]+g.d[e][u])/6,c=g.x[e][u]-a;f+=c*c,g.x[e][u]=a}),f},p.mid=function(g,f,e){p.mApply(g.length,g[0].length,function(u,a){return e[u][a]=g[u][a]+(f[u][a]-g[u][a])/2})},p.prototype.takeDescentStep=function(g,f,e){for(var u=0;u<this.n;++u)g[u]=g[u]-e*f[u]},p.prototype.computeStress=function(){for(var g=0,f=0,e=this.n-1;f<e;++f)for(var u=f+1,a=this.n;u<a;++u){for(var c=0,l=0;l<this.k;++l){var h=this.x[l][f]-this.x[l][u];c+=h*h}c=Math.sqrt(c);var d=this.D[f][u];if(isFinite(d)){var x=d-c;g+=x*x/(d*d)}}return g},p.zeroDistance=1e-10,p}();E.Descent=o;var m=function(){function p(g){void 0===g&&(g=1),this.seed=g,this.a=214013,this.c=2531011,this.m=2147483648,this.range=32767}return p.prototype.getNext=function(){return this.seed=(this.seed*this.a+this.c)%this.m,(this.seed>>16)/this.range},p.prototype.getNextBetween=function(g,f){return g+this.getNext()*(f-g)},p}();E.PseudoRandom=m},1133:function(y,E,r){"use strict";var o=this&&this.__extends||function(){var B=function(R,K){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,it){Q.__proto__=it}||function(Q,it){for(var tt in it)it.hasOwnProperty(tt)&&(Q[tt]=it[tt])})(R,K)};return function(R,K){function Q(){this.constructor=R}B(R,K),R.prototype=null===K?Object.create(K):(Q.prototype=K.prototype,new Q)}}();Object.defineProperty(E,"__esModule",{value:!0});var m=r(7840),p=function(){return function B(){}}();E.Point=p;var g=function(){return function B(R,K,Q,it){this.x1=R,this.y1=K,this.x2=Q,this.y2=it}}();E.LineSegment=g;var f=function(B){function R(){return null!==B&&B.apply(this,arguments)||this}return o(R,B),R}(p);function e(B,R,K){return(R.x-B.x)*(K.y-B.y)-(K.x-B.x)*(R.y-B.y)}function u(B,R,K){return e(B,R,K)>0}function a(B,R,K){return e(B,R,K)<0}function x(B,R){var K=R.slice(0);return K.push(R[0]),{rtan:w(B,K),ltan:C(B,K)}}function w(B,R){var Q,it,tt,ut,K=R.length-1;if(a(B,R[1],R[0])&&!u(B,R[K-1],R[0]))return 0;for(Q=0,it=K;;){if(it-Q==1)return u(B,R[Q],R[it])?Q:it;if((ut=a(B,R[(tt=Math.floor((Q+it)/2))+1],R[tt]))&&!u(B,R[tt-1],R[tt]))return tt;u(B,R[Q+1],R[Q])?ut||u(B,R[Q],R[tt])?it=tt:Q=tt:ut&&a(B,R[Q],R[tt])?it=tt:Q=tt}}function C(B,R){var Q,it,tt,ut,K=R.length-1;if(u(B,R[K-1],R[0])&&!a(B,R[1],R[0]))return 0;for(Q=0,it=K;;){if(it-Q==1)return a(B,R[Q],R[it])?Q:it;if(ut=a(B,R[(tt=Math.floor((Q+it)/2))+1],R[tt]),u(B,R[tt-1],R[tt])&&!ut)return tt;a(B,R[Q+1],R[Q])?ut?a(B,R[Q],R[tt])?it=tt:Q=tt:it=tt:ut?Q=tt:u(B,R[Q],R[tt])?it=tt:Q=tt}}function M(B,R,K,Q,it,tt){var ot,ut;ut=Q(B[ot=K(R[0],B)],R);for(var pt=!1;!pt;){for(pt=!0;ot===B.length-1&&(ot=0),!it(R[ut],B[ot],B[ot+1]);)++ot;for(;0===ut&&(ut=R.length-1),!tt(B[ot],R[ut],R[ut-1]);)--ut,pt=!1}return{t1:ot,t2:ut}}function N(B,R){return M(B,R,w,C,u,a)}E.PolyPoint=f,E.isLeft=e,E.ConvexHull=function c(B){var Q,R=B.slice(0).sort(function(at,lt){return at.x!==lt.x?lt.x-at.x:lt.y-at.y}),K=B.length,tt=R[0].x;for(Q=1;Q<K&&R[Q].x===tt;++Q);var ot=Q-1,ut=[];if(ut.push(R[0]),ot===K-1)R[ot].y!==R[0].y&&ut.push(R[ot]);else{var pt,W=K-1,Z=R[K-1].x;for(Q=K-2;Q>=0&&R[Q].x===Z;Q--);for(pt=Q+1,Q=ot;++Q<=pt;)if(!(e(R[0],R[pt],R[Q])>=0&&Q<pt)){for(;ut.length>1&&!(e(ut[ut.length-2],ut[ut.length-1],R[Q])>0);)ut.length-=1;0!=Q&&ut.push(R[Q])}W!=pt&&ut.push(R[W]);var nt=ut.length;for(Q=pt;--Q>=ot;)if(!(e(R[W],R[ot],R[Q])>=0&&Q>ot)){for(;ut.length>nt&&!(e(ut[ut.length-2],ut[ut.length-1],R[Q])>0);)ut.length-=1;0!=Q&&ut.push(R[Q])}}return ut},E.clockwiseRadialSweep=function l(B,R,K){R.slice(0).sort(function(Q,it){return Math.atan2(Q.y-B.y,Q.x-B.x)-Math.atan2(it.y-B.y,it.x-B.x)}).forEach(K)},E.tangent_PolyPolyC=M,E.LRtangent_PolyPolyC=function A(B,R){var K=N(R,B);return{t1:K.t2,t2:K.t1}},E.RLtangent_PolyPolyC=N,E.LLtangent_PolyPolyC=function S(B,R){return M(B,R,C,C,a,a)},E.RRtangent_PolyPolyC=function P(B,R){return M(B,R,w,w,u,u)};var $=function(){return function B(R,K){this.t1=R,this.t2=K}}();E.BiTangent=$;var V=function(){return function B(){}}();E.BiTangents=V;var j=function(B){function R(){return null!==B&&B.apply(this,arguments)||this}return o(R,B),R}(p);E.TVGPoint=j;var X=function(){return function B(R,K,Q,it){this.id=R,this.polyid=K,this.polyvertid=Q,this.p=it,it.vv=this}}();E.VisibilityVertex=X;var k=function(){function B(R,K){this.source=R,this.target=K}return B.prototype.length=function(){var R=this.source.p.x-this.target.p.x,K=this.source.p.y-this.target.p.y;return Math.sqrt(R*R+K*K)},B}();E.VisibilityEdge=k;var L=function(){function B(R,K){if(this.P=R,this.V=[],this.E=[],K)this.V=K.V.slice(0),this.E=K.E.slice(0);else{for(var Q=R.length,it=0;it<Q;it++){for(var tt=R[it],ot=0;ot<tt.length;++ot){var pt=new X(this.V.length,it,ot,tt[ot]);this.V.push(pt),ot>0&&this.E.push(new k(tt[ot-1].vv,pt))}tt.length>1&&this.E.push(new k(tt[0].vv,tt[tt.length-1].vv))}for(it=0;it<Q-1;it++){var W=R[it];for(ot=it+1;ot<Q;ot++){var Z=R[ot],nt=F(W,Z);for(var at in nt){var lt=nt[at];this.addEdgeIfVisible(W[lt.t1],Z[lt.t2],it,ot)}}}}}return B.prototype.addEdgeIfVisible=function(R,K,Q,it){this.intersectsPolys(new g(R.x,R.y,K.x,K.y),Q,it)||this.E.push(new k(R.vv,K.vv))},B.prototype.addPoint=function(R,K){var Q=this.P.length;this.V.push(new X(this.V.length,Q,0,R));for(var it=0;it<Q;++it)if(it!==K){var tt=this.P[it],ot=x(R,tt);this.addEdgeIfVisible(R,tt[ot.ltan],K,it),this.addEdgeIfVisible(R,tt[ot.rtan],K,it)}return R.vv},B.prototype.intersectsPolys=function(R,K,Q){for(var it=0,tt=this.P.length;it<tt;++it)if(it!=K&&it!=Q&&I(R,this.P[it]).length>0)return!0;return!1},B}();function I(B,R){for(var K=[],Q=1,it=R.length;Q<it;++Q){var tt=m.Rectangle.lineIntersection(B.x1,B.y1,B.x2,B.y2,R[Q-1].x,R[Q-1].y,R[Q].x,R[Q].y);tt&&K.push(tt)}return K}function F(B,R){for(var K=B.length-1,Q=R.length-1,it=new V,tt=0;tt<K;++tt)for(var ot=0;ot<Q;++ot){var ut=B[0==tt?K-1:tt-1],pt=B[tt],W=B[tt+1],Z=R[0==ot?Q-1:ot-1],nt=R[ot],at=R[ot+1],lt=e(ut,pt,nt),ct=e(pt,Z,nt),gt=e(pt,nt,at),yt=e(Z,nt,pt),Ft=e(nt,ut,pt),bt=e(nt,pt,W);lt>=0&&ct>=0&&gt<0&&yt>=0&&Ft>=0&&bt<0?it.ll=new $(tt,ot):lt<=0&&ct<=0&&gt>0&&yt<=0&&Ft<=0&&bt>0?it.rr=new $(tt,ot):lt<=0&&ct>0&&gt<=0&&yt>=0&&Ft<0&&bt>=0?it.rl=new $(tt,ot):lt>=0&&ct<0&&gt>=0&&yt<=0&&Ft>0&&bt<=0&&(it.lr=new $(tt,ot))}return it}function Y(B,R){return!B.every(function(K){return!function D(B,R){for(var K=1,Q=R.length;K<Q;++K)if(a(R[K-1],R[K],B))return!1;return!0}(K,R)})}E.TangentVisibilityGraph=L,E.tangents=F,E.polysOverlap=function J(B,R){if(Y(B,R)||Y(R,B))return!0;for(var K=1,Q=B.length;K<Q;++K){var it=B[K],tt=B[K-1];if(I(new g(tt.x,tt.y,it.x,it.y),R).length>0)return!0}return!1}},4976:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=r(7840),m=r(5213),p=r(8551),g=function(){return function a(c,l,h){this.id=c,this.rect=l,this.children=h,this.leaf=typeof h>"u"||0===h.length}}();E.NodeWrapper=g;var f=function(){return function a(c,l,h,d,x){void 0===d&&(d=null),void 0===x&&(x=null),this.id=c,this.x=l,this.y=h,this.node=d,this.line=x}}();E.Vert=f;var e=function(){function a(c,l){this.s=c,this.t=l;var h=a.findMatch(c,l),d=l.slice(0).reverse(),x=a.findMatch(c,d);h.length>=x.length?(this.length=h.length,this.si=h.si,this.ti=h.ti,this.reversed=!1):(this.length=x.length,this.si=x.si,this.ti=l.length-x.ti-x.length,this.reversed=!0)}return a.findMatch=function(c,l){for(var h=c.length,d=l.length,x={length:0,si:-1,ti:-1},w=new Array(h),C=0;C<h;C++){w[C]=new Array(d);for(var M=0;M<d;M++)if(c[C]===l[M]){var A=w[C][M]=0===C||0===M?1:w[C-1][M-1]+1;A>x.length&&(x.length=A,x.si=C-A+1,x.ti=M-A+1)}else w[C][M]=0}return x},a.prototype.getSequence=function(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[]},a}();E.LongestCommonSubsequence=e;var u=function(){function a(c,l,h){var d=this;void 0===h&&(h=12),this.originalnodes=c,this.groupPadding=h,this.leaves=null,this.nodes=c.map(function(j,X){return new g(X,l.getBounds(j),l.getChildren(j))}),this.leaves=this.nodes.filter(function(j){return j.leaf}),this.groups=this.nodes.filter(function(j){return!j.leaf}),this.cols=this.getGridLines("x"),this.rows=this.getGridLines("y"),this.groups.forEach(function(j){return j.children.forEach(function(X){return d.nodes[X].parent=j})}),this.root={children:[]},this.nodes.forEach(function(j){typeof j.parent>"u"&&(j.parent=d.root,d.root.children.push(j.id)),j.ports=[]}),this.backToFront=this.nodes.slice(0),this.backToFront.sort(function(j,X){return d.getDepth(j)-d.getDepth(X)}),this.backToFront.slice(0).reverse().filter(function(j){return!j.leaf}).forEach(function(j){var X=o.Rectangle.empty();j.children.forEach(function(k){return X=X.union(d.nodes[k].rect)}),j.rect=X.inflate(d.groupPadding)});var w=this.midPoints(this.cols.map(function(j){return j.pos})),C=this.midPoints(this.rows.map(function(j){return j.pos})),M=w[0],A=w[w.length-1],N=C[0],S=C[C.length-1],P=this.rows.map(function(j){return{x1:M,x2:A,y1:j.pos,y2:j.pos}}).concat(C.map(function(j){return{x1:M,x2:A,y1:j,y2:j}})),$=this.cols.map(function(j){return{x1:j.pos,x2:j.pos,y1:N,y2:S}}).concat(w.map(function(j){return{x1:j,x2:j,y1:N,y2:S}})),V=P.concat($);V.forEach(function(j){return j.verts=[]}),this.verts=[],this.edges=[],P.forEach(function(j){return $.forEach(function(X){var k=new f(d.verts.length,X.x1,j.y1);j.verts.push(k),X.verts.push(k),d.verts.push(k);for(var L=d.backToFront.length;L-- >0;){var I=d.backToFront[L],F=I.rect,D=Math.abs(k.x-F.cx()),Y=Math.abs(k.y-F.cy());if(D<F.width()/2&&Y<F.height()/2){k.node=I;break}}})}),V.forEach(function(j,X){d.nodes.forEach(function(Y,J){Y.rect.lineIntersections(j.x1,j.y1,j.x2,j.y2).forEach(function(B,R){var K=new f(d.verts.length,B.x,B.y,Y,j);d.verts.push(K),j.verts.push(K),Y.ports.push(K)})});var k=Math.abs(j.y1-j.y2)<.1,L=function(Y,J){return k?J.x-Y.x:J.y-Y.y};j.verts.sort(L);for(var I=1;I<j.verts.length;I++){var F=j.verts[I-1],D=j.verts[I];F.node&&F.node===D.node&&F.node.leaf||d.edges.push({source:F.id,target:D.id,length:Math.abs(L(F,D))})}})}return a.prototype.avg=function(c){return c.reduce(function(l,h){return l+h})/c.length},a.prototype.getGridLines=function(c){for(var l=[],h=this.leaves.slice(0,this.leaves.length);h.length>0;){var d=h.filter(function(w){return w.rect["overlap"+c.toUpperCase()](h[0].rect)}),x={nodes:d,pos:this.avg(d.map(function(w){return w.rect["c"+c]()}))};l.push(x),x.nodes.forEach(function(w){return h.splice(h.indexOf(w),1)})}return l.sort(function(w,C){return w.pos-C.pos}),l},a.prototype.getDepth=function(c){for(var l=0;c.parent!==this.root;)l++,c=c.parent;return l},a.prototype.midPoints=function(c){for(var l=c[1]-c[0],h=[c[0]-l/2],d=1;d<c.length;d++)h.push((c[d]+c[d-1])/2);return h.push(c[c.length-1]+l/2),h},a.prototype.findLineage=function(c){var l=[c];do{l.push(c=c.parent)}while(c!==this.root);return l.reverse()},a.prototype.findAncestorPathBetween=function(c,l){for(var h=this.findLineage(c),d=this.findLineage(l),x=0;h[x]===d[x];)x++;return{commonAncestor:h[x-1],lineages:h.slice(x).concat(d.slice(x))}},a.prototype.siblingObstacles=function(c,l){var h=this,d=this.findAncestorPathBetween(c,l),x={};d.lineages.forEach(function(C){return x[C.id]={}});var w=d.commonAncestor.children.filter(function(C){return!(C in x)});return d.lineages.filter(function(C){return C.parent!==d.commonAncestor}).forEach(function(C){return w=w.concat(C.parent.children.filter(function(M){return M!==C.id}))}),w.map(function(C){return h.nodes[C]})},a.getSegmentSets=function(c,l,h){for(var d=[],x=0;x<c.length;x++)for(var w=c[x],C=0;C<w.length;C++)(M=w[C]).edgeid=x,M.i=C,Math.abs(M[1][l]-M[0][l])<.1&&d.push(M);d.sort(function($,V){return $[0][l]-V[0][l]});for(var N=[],S=null,P=0;P<d.length;P++){var M=d[P];(!S||Math.abs(M[0][l]-S.pos)>.1)&&N.push(S={pos:M[0][l],segments:[]}),S.segments.push(M)}return N},a.nudgeSegs=function(c,l,h,d,x,w){var C=d.length;if(!(C<=1)){for(var M=d.map(function(I){return new m.Variable(I[0][c])}),A=[],N=0;N<C;N++)for(var S=0;S<C;S++)if(N!==S){var P=d[N],V=P.edgeid,j=d[S].edgeid,X=-1,k=-1;"x"==c?x(V,j)&&(P[0][l]<P[1][l]?(X=S,k=N):(X=N,k=S)):x(V,j)&&(P[0][l]<P[1][l]?(X=N,k=S):(X=S,k=N)),X>=0&&A.push(new m.Constraint(M[X],M[k],w))}new m.Solver(M,A).solve(),M.forEach(function(I,F){var D=d[F],Y=I.position();D[0][c]=D[1][c]=Y;var J=h[D.edgeid];D.i>0&&(J[D.i-1][1][c]=Y),D.i<J.length-1&&(J[D.i+1][0][c]=Y)})}},a.nudgeSegments=function(c,l,h,d,x){for(var w=a.getSegmentSets(c,l,h),C=0;C<w.length;C++){for(var M=w[C],A=[],N=0;N<M.segments.length;N++){var S=M.segments[N];A.push({type:0,s:S,pos:Math.min(S[0][h],S[1][h])}),A.push({type:1,s:S,pos:Math.max(S[0][h],S[1][h])})}A.sort(function(V,j){return V.pos-j.pos+V.type-j.type});var P=[],$=0;A.forEach(function(V){0===V.type?(P.push(V.s),$++):$--,0==$&&(a.nudgeSegs(l,h,c,P,d,x),P=[])})}},a.prototype.routeEdges=function(c,l,h,d){var x=this,w=c.map(function(A){return x.route(h(A),d(A))}),C=a.orderEdges(w),M=w.map(function(A){return a.makeSegments(A)});return a.nudgeSegments(M,"x","y",C,l),a.nudgeSegments(M,"y","x",C,l),a.unreverseEdges(M,w),M},a.unreverseEdges=function(c,l){c.forEach(function(h,d){l[d].reversed&&(h.reverse(),h.forEach(function(w){w.reverse()}))})},a.angleBetween2Lines=function(c,l){var h=Math.atan2(c[0].y-c[1].y,c[0].x-c[1].x),d=Math.atan2(l[0].y-l[1].y,l[0].x-l[1].x),x=h-d;return(x>Math.PI||x<-Math.PI)&&(x=d-h),x},a.isLeft=function(c,l,h){return(l.x-c.x)*(h.y-c.y)-(l.y-c.y)*(h.x-c.x)<=0},a.getOrder=function(c){for(var l={},h=0;h<c.length;h++){var d=c[h];typeof l[d.l]>"u"&&(l[d.l]={}),l[d.l][d.r]=!0}return function(x,w){return typeof l[x]<"u"&&l[x][w]}},a.orderEdges=function(c){for(var l=[],h=0;h<c.length-1;h++)for(var d=h+1;d<c.length;d++){var M,A,N,x=c[h],w=c[d],C=new e(x,w);if(0!==C.length){if(C.reversed&&(w.reverse(),w.reversed=!0,C=new e(x,w)),(C.si<=0||C.ti<=0)&&(C.si+C.length>=x.length||C.ti+C.length>=w.length)){l.push({l:h,r:d});continue}C.si+C.length>=x.length||C.ti+C.length>=w.length?(M=x[C.si+1],N=x[C.si-1],A=w[C.ti-1]):(M=x[C.si+C.length-2],A=x[C.si+C.length],N=w[C.ti+C.length]),a.isLeft(M,A,N)?l.push({l:d,r:h}):l.push({l:h,r:d})}}return a.getOrder(l)},a.makeSegments=function(c){function l(A){return{x:A.x,y:A.y}}for(var d=[],x=l(c[0]),w=1;w<c.length;w++){var C=l(c[w]),M=w<c.length-1?c[w+1]:null;(!M||(A=x,N=C,S=M,!(Math.abs((N.x-A.x)*(S.y-A.y)-(N.y-A.y)*(S.x-A.x))<.001)))&&(d.push([x,C]),x=C)}var A,N,S;return d},a.prototype.route=function(c,l){var h=this,d=this.nodes[c],x=this.nodes[l];this.obstacles=this.siblingObstacles(d,x);var w={};this.obstacles.forEach(function(k){return w[k.id]=k}),this.passableEdges=this.edges.filter(function(k){var L=h.verts[k.source],I=h.verts[k.target];return!(L.node&&L.node.id in w||I.node&&I.node.id in w)});for(var C=1;C<d.ports.length;C++)this.passableEdges.push({source:d.ports[0].id,target:d.ports[C].id,length:0});for(C=1;C<x.ports.length;C++)this.passableEdges.push({source:x.ports[0].id,target:x.ports[C].id,length:0});var X=new p.Calculator(this.verts.length,this.passableEdges,function(k){return k.source},function(k){return k.target},function(k){return k.length}).PathFromNodeToNodeWithPrevCost(d.ports[0].id,x.ports[0].id,function(k,L,I){var F=h.verts[k],D=h.verts[L],Y=h.verts[I],J=Math.abs(Y.x-F.x),B=Math.abs(Y.y-F.y);return F.node===d&&F.node===D.node||D.node===x&&D.node===Y.node?0:J>1&&B>1?1e3:0}).reverse().map(function(k){return h.verts[k]});return X.push(this.nodes[x.id].ports[0]),X.filter(function(k,L){return!(L<X.length-1&&X[L+1].node===d&&k.node===d||L>0&&k.node===x&&X[L-1].node===x)})},a.getRoutePath=function(c,l,h,d){var C,M,A,J,B,x={routepath:"M "+c[0][0].x+" "+c[0][0].y+" ",arrowpath:""};if(c.length>1)for(var w=0;w<c.length;w++){var N=(M=(C=c[w])[1].x)-C[0].x,S=(A=C[1].y)-C[0].y;if(w<c.length-1){Math.abs(N)>0?M-=N/Math.abs(N)*l:A-=S/Math.abs(S)*l,x.routepath+="L "+M+" "+A+" ";var P=c[w+1],$=P[0].x,V=P[0].y;N=P[1].x-$,S=P[1].y-V;var L,I,k=a.angleBetween2Lines(C,P)<0?1:0;Math.abs(N)>0?(L=$+N/Math.abs(N)*l,I=V):(L=$,I=V+S/Math.abs(S)*l);var F=Math.abs(L-M),D=Math.abs(I-A);x.routepath+="A "+F+" "+D+" 0 0 "+k+" "+L+" "+I+" "}else{var Y=[M,A];Math.abs(N)>0?(J=[M-=N/Math.abs(N)*d,A+h],B=[M,A-h]):(J=[M+h,A-=S/Math.abs(S)*d],B=[M-h,A]),x.routepath+="L "+M+" "+A+" ",d>0&&(x.arrowpath="M "+Y[0]+" "+Y[1]+" L "+J[0]+" "+J[1]+" L "+B[0]+" "+B[1])}}else N=(M=(C=c[0])[1].x)-C[0].x,S=(A=C[1].y)-C[0].y,Y=[M,A],Math.abs(N)>0?(J=[M-=N/Math.abs(N)*d,A+h],B=[M,A-h]):(J=[M+h,A-=S/Math.abs(S)*d],B=[M-h,A]),x.routepath+="L "+M+" "+A+" ",d>0&&(x.arrowpath="M "+Y[0]+" "+Y[1]+" L "+J[0]+" "+J[1]+" L "+B[0]+" "+B[1]);return x},a}();E.GridRouter=u},6167:(y,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r_GOLDEN_SECTION=(1+Math.sqrt(5))/2;E.applyPacking=function o(p,g,f,w,x,a){void 0===x&&(x=1),void 0===a&&(a=!0);var c=0,l=0,h=g,d=f,C=(x=typeof x<"u"?x:1,w=typeof w<"u"?w:0,0),M=0,A=0,N=0,S=[];function j(I,F){S=[],C=0,M=0,N=l;for(var D=0;D<I.length;D++)X(I[D],F);return Math.abs(function L(){return C/M}()-x)}function X(I,F){for(var D=void 0,Y=0;Y<S.length;Y++)if(S[Y].space_left>=I.height&&S[Y].x+S[Y].width+I.width+10-F<=1e-4){D=S[Y];break}S.push(I),void 0!==D?(I.x=D.x+D.width+10,I.y=D.bottom,I.space_left=I.height,I.bottom=I.y,D.space_left-=I.height+10,D.bottom+=I.height+10):(I.y=N,N+=I.height+10,I.x=c,I.bottom=I.y,I.space_left=I.height),I.y+I.height-M>-1e-4&&(M=I.y+I.height-l),I.x+I.width-C>-1e-4&&(C=I.x+I.width-c)}0!=p.length&&(function P(I){I.forEach(function(D){!function F(D){var Y=Number.MAX_VALUE,J=Number.MAX_VALUE,B=0,R=0;D.array.forEach(function(K){var Q=typeof K.width<"u"?K.width:w,it=typeof K.height<"u"?K.height:w;Q/=2,it/=2,B=Math.max(K.x+Q,B),Y=Math.min(K.x-Q,Y),R=Math.max(K.y+it,R),J=Math.min(K.y-it,J)}),D.width=B-Y,D.height=R-J}(D)})}(p),function V(I,F){var D=Number.POSITIVE_INFINITY,Y=0;I.sort(function(W,Z){return Z.height-W.height});for(var J=ut=A=I.reduce(function(W,Z){return W.width<Z.width?W.width:Z.width}),B=pt=function k(I){var F=0;return I.forEach(function(D){return F+=D.width+10}),F}(I),R=0,K=Number.MAX_VALUE,Q=Number.MAX_VALUE,it=-1,tt=Number.MAX_VALUE,ot=Number.MAX_VALUE;tt>A||ot>1e-4;){if(1!=it){var ut=B-(B-J)/r_GOLDEN_SECTION;K=j(I,ut)}if(0!=it){var pt=J+(B-J)/r_GOLDEN_SECTION;Q=j(I,pt)}if(tt=Math.abs(ut-pt),ot=Math.abs(K-Q),K<D&&(D=K,Y=ut),Q<D&&(D=Q,Y=pt),K>Q?(J=ut,ut=pt,K=Q,it=1):(B=pt,pt=ut,Q=K,it=0),R++>100)break}j(I,Y)}(p),a&&function $(I){I.forEach(function(F){var D={x:0,y:0};F.array.forEach(function(B){D.x+=B.x,D.y+=B.y}),D.x/=F.array.length,D.y/=F.array.length;var J_x=F.x-(D.x-F.width/2)+h/2-C/2,J_y=F.y-(D.y-F.height/2)+d/2-M/2;F.array.forEach(function(B){B.x+=J_x,B.y+=J_y})})}(p))},E.separateGraphs=function m(p,g){for(var f={},e={},u=[],a=0,c=0;c<g.length;c++){var l=g[c],h=l.source,d=l.target;e[h.index]?e[h.index].push(d):e[h.index]=[d],e[d.index]?e[d.index].push(h):e[d.index]=[h]}for(c=0;c<p.length;c++){var x=p[c];f[x.index]||w(x,!0)}function w(C,M){if(void 0===f[C.index]){M&&(a++,u.push({array:[]})),f[C.index]=a,u[a-1].array.push(C);var A=e[C.index];if(A)for(var N=0;N<A.length;N++)w(A[N],!1)}}return u}},9251:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var a,h,o=r(4106),m=r(9524),p=r(5823),g=r(7840),f=r(8551),e=r(1133),u=r(6167);function c(h){return typeof h.leaves<"u"||typeof h.groups<"u"}(h=a=E.EventType||(E.EventType={}))[h.start=0]="start",h[h.tick=1]="tick",h[h.end=2]="end";var l=function(){function h(){var d=this;this._canvasSize=[1,1],this._linkDistance=20,this._defaultNodeSize=10,this._linkLengthCalculator=null,this._linkType=null,this._avoidOverlaps=!1,this._handleDisconnected=!0,this._running=!1,this._nodes=[],this._groups=[],this._rootGroup=null,this._links=[],this._constraints=[],this._distanceMatrix=null,this._descent=null,this._directedLinkConstraints=null,this._threshold=.01,this._visibilityGraph=null,this._groupCompactness=1e-6,this.event=null,this.linkAccessor={getSourceIndex:h.getSourceIndex,getTargetIndex:h.getTargetIndex,setLength:h.setLinkLength,getType:function(x){return"function"==typeof d._linkType?d._linkType(x):0}}}return h.prototype.on=function(d,x){return this.event||(this.event={}),"string"==typeof d?this.event[a[d]]=x:this.event[d]=x,this},h.prototype.trigger=function(d){this.event&&typeof this.event[d.type]<"u"&&this.event[d.type](d)},h.prototype.kick=function(){for(;!this.tick(););},h.prototype.tick=function(){if(this._alpha<this._threshold)return this._running=!1,this.trigger({type:a.end,alpha:this._alpha=0,stress:this._lastStress}),!0;var w,C,d=this._nodes.length;for(this._descent.locks.clear(),C=0;C<d;++C)(w=this._nodes[C]).fixed&&((typeof w.px>"u"||typeof w.py>"u")&&(w.px=w.x,w.py=w.y),this._descent.locks.add(C,[w.px,w.py]));var A=this._descent.rungeKutta();return 0===A?this._alpha=0:typeof this._lastStress<"u"&&(this._alpha=A),this._lastStress=A,this.updateNodePositions(),this.trigger({type:a.tick,alpha:this._alpha,stress:this._lastStress}),!1},h.prototype.updateNodePositions=function(){for(var w,d=this._descent.x[0],x=this._descent.x[1],C=this._nodes.length;C--;)(w=this._nodes[C]).x=d[C],w.y=x[C]},h.prototype.nodes=function(d){if(!d){if(0===this._nodes.length&&this._links.length>0){var x=0;this._links.forEach(function(C){x=Math.max(x,C.source,C.target)}),this._nodes=new Array(++x);for(var w=0;w<x;++w)this._nodes[w]={}}return this._nodes}return this._nodes=d,this},h.prototype.groups=function(d){var x=this;return d?(this._groups=d,this._rootGroup={},this._groups.forEach(function(w){typeof w.padding>"u"&&(w.padding=1),typeof w.leaves<"u"&&w.leaves.forEach(function(C,M){"number"==typeof C&&((w.leaves[M]=x._nodes[C]).parent=w)}),typeof w.groups<"u"&&w.groups.forEach(function(C,M){"number"==typeof C&&((w.groups[M]=x._groups[C]).parent=w)})}),this._rootGroup.leaves=this._nodes.filter(function(w){return typeof w.parent>"u"}),this._rootGroup.groups=this._groups.filter(function(w){return typeof w.parent>"u"}),this):this._groups},h.prototype.powerGraphGroups=function(d){var x=o.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);return this.groups(x.groups),d(x),this},h.prototype.avoidOverlaps=function(d){return arguments.length?(this._avoidOverlaps=d,this):this._avoidOverlaps},h.prototype.handleDisconnected=function(d){return arguments.length?(this._handleDisconnected=d,this):this._handleDisconnected},h.prototype.flowLayout=function(d,x){return arguments.length||(d="y"),this._directedLinkConstraints={axis:d,getMinSeparation:"number"==typeof x?function(){return x}:x},this},h.prototype.links=function(d){return arguments.length?(this._links=d,this):this._links},h.prototype.constraints=function(d){return arguments.length?(this._constraints=d,this):this._constraints},h.prototype.distanceMatrix=function(d){return arguments.length?(this._distanceMatrix=d,this):this._distanceMatrix},h.prototype.size=function(d){return d?(this._canvasSize=d,this):this._canvasSize},h.prototype.defaultNodeSize=function(d){return d?(this._defaultNodeSize=d,this):this._defaultNodeSize},h.prototype.groupCompactness=function(d){return d?(this._groupCompactness=d,this):this._groupCompactness},h.prototype.linkDistance=function(d){return d?(this._linkDistance="function"==typeof d?d:+d,this._linkLengthCalculator=null,this):this._linkDistance},h.prototype.linkType=function(d){return this._linkType=d,this},h.prototype.convergenceThreshold=function(d){return d?(this._threshold="function"==typeof d?d:+d,this):this._threshold},h.prototype.alpha=function(d){return arguments.length?(d=+d,this._alpha?this._alpha=d>0?d:0:d>0&&(this._running||(this._running=!0,this.trigger({type:a.start,alpha:this._alpha=d}),this.kick())),this):this._alpha},h.prototype.getLinkLength=function(d){return"function"==typeof this._linkDistance?+this._linkDistance(d):this._linkDistance},h.setLinkLength=function(d,x){d.length=x},h.prototype.getLinkType=function(d){return"function"==typeof this._linkType?this._linkType(d):0},h.prototype.symmetricDiffLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.symmetricDiffLinkLengths(w._links,w.linkAccessor,x)},this},h.prototype.jaccardLinkLengths=function(d,x){var w=this;return void 0===x&&(x=1),this.linkDistance(function(C){return d*C.length}),this._linkLengthCalculator=function(){return m.jaccardLinkLengths(w._links,w.linkAccessor,x)},this},h.prototype.start=function(d,x,w,C,M,A){var N=this;void 0===d&&(d=0),void 0===x&&(x=0),void 0===w&&(w=0),void 0===C&&(C=0),void 0===M&&(M=!0),void 0===A&&(A=!0);var Y,$=this.nodes().length,V=$+2*this._groups.length,X=this._canvasSize[0],k=this._canvasSize[1],L=new Array(V),I=new Array(V),F=null,D=this._avoidOverlaps;this._nodes.forEach(function(tt,ot){tt.index=ot,typeof tt.x>"u"&&(tt.x=X/2,tt.y=k/2),L[ot]=tt.x,I[ot]=tt.y}),this._linkLengthCalculator&&this._linkLengthCalculator(),this._distanceMatrix?Y=this._distanceMatrix:(Y=new f.Calculator(V,this._links,h.getSourceIndex,h.getTargetIndex,function(tt){return N.getLinkLength(tt)}).DistanceMatrix(),F=p.Descent.createSquareMatrix(V,function(){return 2}),this._links.forEach(function(tt){"number"==typeof tt.source&&(tt.source=N._nodes[tt.source]),"number"==typeof tt.target&&(tt.target=N._nodes[tt.target])}),this._links.forEach(function(tt){var ot=h.getSourceIndex(tt),ut=h.getTargetIndex(tt);F[ot][ut]=F[ut][ot]=tt.weight||1}));var J=p.Descent.createSquareMatrix(V,function(tt,ot){return Y[tt][ot]});if(this._rootGroup&&typeof this._rootGroup.groups<"u"){var S=$;this._groups.forEach(function(ot){(function(ot,ut,pt,W){F[ot][ut]=F[ut][ot]=pt,J[ot][ut]=J[ut][ot]=.1})(S,S+1,N._groupCompactness),L[S]=0,I[S++]=0,L[S]=0,I[S++]=0})}else this._rootGroup={leaves:this._nodes,groups:[]};var R=this._constraints||[];for(this._directedLinkConstraints&&(this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation,R=R.concat(m.generateDirectedEdgeConstraints($,this._links,this._directedLinkConstraints.axis,this.linkAccessor))),this.avoidOverlaps(!1),this._descent=new p.Descent([L,I],J),this._descent.locks.clear(),S=0;S<$;++S){var K=this._nodes[S];K.fixed&&(K.px=K.x,K.py=K.y,this._descent.locks.add(S,[K.x,K.y]))}if(this._descent.threshold=this._threshold,this.initialLayout(d,L,I),R.length>0&&(this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,R).projectFunctions()),this._descent.run(x),this.separateOverlappingComponents(X,k,A),this.avoidOverlaps(D),D&&(this._nodes.forEach(function(tt,ot){tt.x=L[ot],tt.y=I[ot]}),this._descent.project=new g.Projection(this._nodes,this._groups,this._rootGroup,R,!0).projectFunctions(),this._nodes.forEach(function(tt,ot){L[ot]=tt.x,I[ot]=tt.y})),this._descent.G=F,this._descent.run(w),C){this._descent.snapStrength=1e3,this._descent.snapGridSize=this._nodes[0].width,this._descent.numGridSnapNodes=$,this._descent.scaleSnapByMaxH=$!=V;var it=p.Descent.createSquareMatrix(V,function(tt,ot){return tt>=$||ot>=$?F[tt][ot]:0});this._descent.G=it,this._descent.run(C)}return this.updateNodePositions(),this.separateOverlappingComponents(X,k,A),M?this.resume():this},h.prototype.initialLayout=function(d,x,w){if(this._groups.length>0&&d>0){var C=this._nodes.length,M=this._links.map(function(N){return{source:N.source.index,target:N.target.index}}),A=this._nodes.map(function(N){return{index:N.index}});this._groups.forEach(function(N,S){A.push({index:N.index=C+S})}),this._groups.forEach(function(N,S){typeof N.leaves<"u"&&N.leaves.forEach(function(P){return M.push({source:N.index,target:P.index})}),typeof N.groups<"u"&&N.groups.forEach(function(P){return M.push({source:N.index,target:P.index})})}),(new h).size(this.size()).nodes(A).links(M).avoidOverlaps(!1).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(d,0,0,0,!1),this._nodes.forEach(function(N){x[N.index]=A[N.index].x,w[N.index]=A[N.index].y})}else this._descent.run(d)},h.prototype.separateOverlappingComponents=function(d,x,w){var C=this;if(void 0===w&&(w=!0),!this._distanceMatrix&&this._handleDisconnected){var M=this._descent.x[0],A=this._descent.x[1];this._nodes.forEach(function(S,P){S.x=M[P],S.y=A[P]});var N=u.separateGraphs(this._nodes,this._links);u.applyPacking(N,d,x,this._defaultNodeSize,1,w),this._nodes.forEach(function(S,P){C._descent.x[0][P]=S.x,C._descent.x[1][P]=S.y,S.bounds&&(S.bounds.setXCentre(S.x),S.bounds.setYCentre(S.y))})}},h.prototype.resume=function(){return this.alpha(.1)},h.prototype.stop=function(){return this.alpha(0)},h.prototype.prepareEdgeRouting=function(d){void 0===d&&(d=0),this._visibilityGraph=new e.TangentVisibilityGraph(this._nodes.map(function(x){return x.bounds.inflate(-d).vertices()}))},h.prototype.routeEdge=function(d,x,w){void 0===x&&(x=5);var C=[],M=new e.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),A={x:d.source.x,y:d.source.y},N={x:d.target.x,y:d.target.y},S=M.addPoint(A,d.source.index),P=M.addPoint(N,d.target.index);M.addEdgeIfVisible(A,N,d.source.index,d.target.index),typeof w<"u"&&w(M);var k=new f.Calculator(M.V.length,M.E,function(J){return J.source.id},function(J){return J.target.id},function(J){return J.length()}).PathFromNodeToNode(S.id,P.id);if(1===k.length||k.length===M.V.length){var L=g.makeEdgeBetween(d.source.innerBounds,d.target.innerBounds,x);C=[L.sourceIntersection,L.arrowStart]}else{for(var I=k.length-2,F=M.V[k[I]].p,D=M.V[k[0]].p,Y=(C=[d.source.innerBounds.rayIntersection(F.x,F.y)],I);Y>=0;--Y)C.push(M.V[k[Y]].p);C.push(g.makeEdgeTo(D,d.target.innerBounds,x))}return C},h.getSourceIndex=function(d){return"number"==typeof d.source?d.source:d.source.index},h.getTargetIndex=function(d){return"number"==typeof d.target?d.target:d.target.index},h.linkId=function(d){return h.getSourceIndex(d)+"-"+h.getTargetIndex(d)},h.dragStart=function(d){c(d)?h.storeOffset(d,h.dragOrigin(d)):(h.stopNode(d),d.fixed|=2)},h.stopNode=function(d){d.px=d.x,d.py=d.y},h.storeOffset=function(d,x){typeof d.leaves<"u"&&d.leaves.forEach(function(w){w.fixed|=2,h.stopNode(w),w._dragGroupOffsetX=w.x-x.x,w._dragGroupOffsetY=w.y-x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return h.storeOffset(w,x)})},h.dragOrigin=function(d){return c(d)?{x:d.bounds.cx(),y:d.bounds.cy()}:d},h.drag=function(d,x){c(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(w){d.bounds.setXCentre(x.x),d.bounds.setYCentre(x.y),w.px=w._dragGroupOffsetX+x.x,w.py=w._dragGroupOffsetY+x.y}),typeof d.groups<"u"&&d.groups.forEach(function(w){return h.drag(w,x)})):(d.px=x.x,d.py=x.y)},h.dragEnd=function(d){c(d)?(typeof d.leaves<"u"&&d.leaves.forEach(function(x){h.dragEnd(x),delete x._dragGroupOffsetX,delete x._dragGroupOffsetY}),typeof d.groups<"u"&&d.groups.forEach(h.dragEnd)):d.fixed&=-7},h.mouseOver=function(d){d.fixed|=4,d.px=d.x,d.py=d.y},h.mouseOut=function(d){d.fixed&=-5},h}();E.Layout=l},8792:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=r(8551),m=r(5823),p=r(7840),g=r(9524),f=function(){function c(l,h){this.source=l,this.target=h}return c.prototype.actualLength=function(l){var h=this;return Math.sqrt(l.reduce(function(d,x){var w=x[h.target]-x[h.source];return d+w*w},0))},c}();E.Link3D=f,E.Node3D=function(){return function c(l,h,d){void 0===l&&(l=0),void 0===h&&(h=0),void 0===d&&(d=0),this.x=l,this.y=h,this.z=d}}();var u=function(){function c(l,h,d){var x=this;void 0===d&&(d=1),this.nodes=l,this.links=h,this.idealLinkLength=d,this.constraints=null,this.useJaccardLinkLengths=!0,this.result=new Array(c.k);for(var w=0;w<c.k;++w)this.result[w]=new Array(l.length);l.forEach(function(C,M){for(var A=0,N=c.dims;A<N.length;A++){var S=N[A];typeof C[S]>"u"&&(C[S]=Math.random())}x.result[0][M]=C.x,x.result[1][M]=C.y,x.result[2][M]=C.z})}return c.prototype.linkLength=function(l){return l.actualLength(this.result)},c.prototype.start=function(l){var h=this;void 0===l&&(l=100);var d=this.nodes.length,x=new a;this.useJaccardLinkLengths&&g.jaccardLinkLengths(this.links,x,1.5),this.links.forEach(function(S){return S.length*=h.idealLinkLength});var w=new o.Calculator(d,this.links,function(S){return S.source},function(S){return S.target},function(S){return S.length}).DistanceMatrix(),C=m.Descent.createSquareMatrix(d,function(S,P){return w[S][P]}),M=m.Descent.createSquareMatrix(d,function(){return 2});this.links.forEach(function(S){var P=S.source,$=S.target;return M[P][$]=M[$][P]=1}),this.descent=new m.Descent(this.result,C),this.descent.threshold=.001,this.descent.G=M,this.constraints&&(this.descent.project=new p.Projection(this.nodes,null,null,this.constraints).projectFunctions());for(var A=0;A<this.nodes.length;A++){var N=this.nodes[A];N.fixed&&this.descent.locks.add(A,[N.x,N.y,N.z])}return this.descent.run(l),this},c.prototype.tick=function(){this.descent.locks.clear();for(var l=0;l<this.nodes.length;l++){var h=this.nodes[l];h.fixed&&this.descent.locks.add(l,[h.x,h.y,h.z])}return this.descent.rungeKutta()},c.k=(c.dims=["x","y","z"]).length,c}();E.Layout3D=u;var a=function(){function c(){}return c.prototype.getSourceIndex=function(l){return l.source},c.prototype.getTargetIndex=function(l){return l.target},c.prototype.getLength=function(l){return l.length},c.prototype.setLength=function(l,h){l.length=h},c}()},9524:(y,E)=>{"use strict";function r(a,c){var l={};for(var h in a)l[h]={};for(var h in c)l[h]={};return Object.keys(l).length}function o(a,c){var l=0;for(var h in a)typeof c[h]<"u"&&++l;return l}function p(a,c,l,h){var d=function m(a,c){var l={},h=function(d,x){typeof l[d]>"u"&&(l[d]={}),l[d][x]={}};return a.forEach(function(d){var x=c.getSourceIndex(d),w=c.getTargetIndex(d);h(x,w),h(w,x)}),l}(a,h);a.forEach(function(x){var w=d[h.getSourceIndex(x)],C=d[h.getTargetIndex(x)];h.setLength(x,1+c*l(w,C))})}function u(a,c,l){var h=[],d=0,x=[],w=[];function C(k){k.index=k.lowlink=d++,x.push(k),k.onStack=!0;for(var L=0,I=k.out;L<I.length;L++){var F=I[L];typeof F.index>"u"?(C(F),k.lowlink=Math.min(k.lowlink,F.lowlink)):F.onStack&&(k.lowlink=Math.min(k.lowlink,F.index))}if(k.lowlink===k.index){for(var D=[];x.length&&((F=x.pop()).onStack=!1,D.push(F),F!==k););w.push(D.map(function(Y){return Y.id}))}}for(var M=0;M<a;M++)h.push({id:M,out:[]});for(var A=0,N=c;A<N.length;A++){var S=N[A],P=h[l.getSourceIndex(S)],$=h[l.getTargetIndex(S)];P.out.push($)}for(var V=0,j=h;V<j.length;V++){var X=j[V];typeof X.index>"u"&&C(X)}return w}Object.defineProperty(E,"__esModule",{value:!0}),E.symmetricDiffLinkLengths=function g(a,c,l){void 0===l&&(l=1),p(a,l,function(h,d){return Math.sqrt(r(h,d)-o(h,d))},c)},E.jaccardLinkLengths=function f(a,c,l){void 0===l&&(l=1),p(a,l,function(h,d){return Math.min(Object.keys(h).length,Object.keys(d).length)<1.1?0:o(h,d)/r(h,d)},c)},E.generateDirectedEdgeConstraints=function e(a,c,l,h){var d=u(a,c,h),x={};d.forEach(function(C,M){return C.forEach(function(A){return x[A]=M})});var w=[];return c.forEach(function(C){var M=h.getSourceIndex(C),A=h.getTargetIndex(C);x[M]!==x[A]&&w.push({axis:l,left:M,right:A,gap:h.getMinSeparation(C)})}),w},E.stronglyConnectedComponents=u},4106:(y,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=function(){return function c(l,h,d){this.source=l,this.target=h,this.type=d}}();E.PowerEdge=r;var o=function(){function c(l,h,d,x){var w=this;if(this.linkAccessor=d,this.modules=new Array(l),this.roots=[],x)this.initModulesFromGroup(x);else{this.roots.push(new f);for(var C=0;C<l;++C)this.roots[0].add(this.modules[C]=new p(C))}this.R=h.length,h.forEach(function(M){var A=w.modules[d.getSourceIndex(M)],N=w.modules[d.getTargetIndex(M)],S=d.getType(M);A.outgoing.add(S,N),N.incoming.add(S,A)})}return c.prototype.initModulesFromGroup=function(l){var h=new f;this.roots.push(h);for(var d=0;d<l.leaves.length;++d){var x=l.leaves[d],w=new p(x.id);this.modules[x.id]=w,h.add(w)}if(l.groups)for(var C=0;C<l.groups.length;++C){var M=l.groups[C],A={};for(var N in M)"leaves"!==N&&"groups"!==N&&M.hasOwnProperty(N)&&(A[N]=M[N]);h.add(new p(-1-C,new e,new e,this.initModulesFromGroup(M),A))}return h},c.prototype.merge=function(l,h,d){void 0===d&&(d=0);var x=l.incoming.intersection(h.incoming),w=l.outgoing.intersection(h.outgoing),C=new f;C.add(l),C.add(h);var M=new p(this.modules.length,w,x,C);this.modules.push(M);var A=function(N,S,P){N.forAll(function($,V){$.forAll(function(j){var X=j[S];X.add(V,M),X.remove(V,l),X.remove(V,h),l[P].remove(V,j),h[P].remove(V,j)})})};return A(w,"incoming","outgoing"),A(x,"outgoing","incoming"),this.R-=x.count()+w.count(),this.roots[d].remove(l),this.roots[d].remove(h),this.roots[d].add(M),M},c.prototype.rootMerges=function(l){void 0===l&&(l=0);for(var h=this.roots[l].modules(),d=h.length,x=new Array(d*(d-1)),w=0,C=0,M=d-1;C<M;++C)for(var A=C+1;A<d;++A){var N=h[C],S=h[A];x[w]={id:w,nEdges:this.nEdges(N,S),a:N,b:S},w++}return x},c.prototype.greedyMerge=function(){for(var l=0;l<this.roots.length;++l)if(!(this.roots[l].modules().length<2)){var d=this.rootMerges(l).sort(function(x,w){return x.nEdges==w.nEdges?x.id-w.id:x.nEdges-w.nEdges})[0];if(!(d.nEdges>=this.R))return this.merge(d.a,d.b,l),!0}},c.prototype.nEdges=function(l,h){var d=l.incoming.intersection(h.incoming),x=l.outgoing.intersection(h.outgoing);return this.R-d.count()-x.count()},c.prototype.getGroupHierarchy=function(l){var h=this,d=[];return m(this.roots[0],{},d),this.allEdges().forEach(function(C){var M=h.modules[C.source],A=h.modules[C.target];l.push(new r(typeof M.gid>"u"?C.source:d[M.gid],typeof A.gid>"u"?C.target:d[A.gid],C.type))}),d},c.prototype.allEdges=function(){var l=[];return c.getEdges(this.roots[0],l),l},c.getEdges=function(l,h){l.forAll(function(d){d.getEdges(h),c.getEdges(d.children,h)})},c}();function m(c,l,h){c.forAll(function(d){if(d.isLeaf())l.leaves||(l.leaves=[]),l.leaves.push(d.id);else{var x=l;if(d.gid=h.length,!d.isIsland()||d.isPredefined()){if(x={id:d.gid},d.isPredefined())for(var w in d.definition)x[w]=d.definition[w];l.groups||(l.groups=[]),l.groups.push(d.gid),h.push(x)}m(d.children,x,h)}})}E.Configuration=o;var p=function(){function c(l,h,d,x,w){void 0===h&&(h=new e),void 0===d&&(d=new e),void 0===x&&(x=new f),this.id=l,this.outgoing=h,this.incoming=d,this.children=x,this.definition=w}return c.prototype.getEdges=function(l){var h=this;this.outgoing.forAll(function(d,x){d.forAll(function(w){l.push(new r(h.id,w.id,x))})})},c.prototype.isLeaf=function(){return 0===this.children.count()},c.prototype.isIsland=function(){return 0===this.outgoing.count()&&0===this.incoming.count()},c.prototype.isPredefined=function(){return typeof this.definition<"u"},c}();E.Module=p;var f=function(){function c(){this.table={}}return c.prototype.count=function(){return Object.keys(this.table).length},c.prototype.intersection=function(l){var h=new c;return h.table=function g(c,l){var h={};for(var d in c)d in l&&(h[d]=c[d]);return h}(this.table,l.table),h},c.prototype.intersectionCount=function(l){return this.intersection(l).count()},c.prototype.contains=function(l){return l in this.table},c.prototype.add=function(l){this.table[l.id]=l},c.prototype.remove=function(l){delete this.table[l.id]},c.prototype.forAll=function(l){for(var h in this.table)l(this.table[h])},c.prototype.modules=function(){var l=[];return this.forAll(function(h){h.isPredefined()||l.push(h)}),l},c}();E.ModuleSet=f;var e=function(){function c(){this.sets={},this.n=0}return c.prototype.count=function(){return this.n},c.prototype.contains=function(l){var h=!1;return this.forAllModules(function(d){!h&&d.id==l&&(h=!0)}),h},c.prototype.add=function(l,h){(l in this.sets?this.sets[l]:this.sets[l]=new f).add(h),++this.n},c.prototype.remove=function(l,h){var d=this.sets[l];d.remove(h),0===d.count()&&delete this.sets[l],--this.n},c.prototype.forAll=function(l){for(var h in this.sets)l(this.sets[h],Number(h))},c.prototype.forAllModules=function(l){this.forAll(function(h,d){return h.forAll(l)})},c.prototype.intersection=function(l){var h=new c;return this.forAll(function(d,x){if(x in l.sets){var w=d.intersection(l.sets[x]),C=w.count();C>0&&(h.sets[x]=w,h.n+=C)}}),h},c}();E.LinkSets=e,E.getGroups=function a(c,l,h,d){for(var w=new o(c.length,l,h,d);w.greedyMerge(););var C=[],M=w.getGroupHierarchy(C);return C.forEach(function(A){var N=function(S){var P=A[S];"number"==typeof P&&(A[S]=c[P])};N("source"),N("target")}),{groups:M,powerEdges:C}}},1066:(y,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=function(){function m(p){this.elem=p,this.subheaps=[]}return m.prototype.toString=function(p){for(var g="",f=!1,e=0;e<this.subheaps.length;++e){var u=this.subheaps[e];u.elem?(f&&(g+=","),g+=u.toString(p),f=!0):f=!1}return""!==g&&(g="("+g+")"),(this.elem?p(this.elem):"")+g},m.prototype.forEach=function(p){this.empty()||(p(this.elem,this),this.subheaps.forEach(function(g){return g.forEach(p)}))},m.prototype.count=function(){return this.empty()?0:1+this.subheaps.reduce(function(p,g){return p+g.count()},0)},m.prototype.min=function(){return this.elem},m.prototype.empty=function(){return null==this.elem},m.prototype.contains=function(p){if(this===p)return!0;for(var g=0;g<this.subheaps.length;g++)if(this.subheaps[g].contains(p))return!0;return!1},m.prototype.isHeap=function(p){var g=this;return this.subheaps.every(function(f){return p(g.elem,f.elem)&&f.isHeap(p)})},m.prototype.insert=function(p,g){return this.merge(new m(p),g)},m.prototype.merge=function(p,g){return this.empty()?p:p.empty()?this:g(this.elem,p.elem)?(this.subheaps.push(p),this):(p.subheaps.push(this),p)},m.prototype.removeMin=function(p){return this.empty()?null:this.mergePairs(p)},m.prototype.mergePairs=function(p){if(0==this.subheaps.length)return new m(null);if(1==this.subheaps.length)return this.subheaps[0];var g=this.subheaps.pop().merge(this.subheaps.pop(),p),f=this.mergePairs(p);return g.merge(f,p)},m.prototype.decreaseKey=function(p,g,f,e){var u=p.removeMin(e);p.elem=u.elem,p.subheaps=u.subheaps,null!==f&&null!==u.elem&&f(p.elem,p);var a=new m(g);return null!==f&&f(g,a),this.merge(a,e)},m}();E.PairingHeap=r;var o=function(){function m(p){this.lessThan=p}return m.prototype.top=function(){return this.empty()?null:this.root.elem},m.prototype.push=function(){for(var p=[],g=0;g<arguments.length;g++)p[g]=arguments[g];for(var f,u,e=0;u=p[e];++e)f=new r(u),this.root=this.empty()?f:this.root.merge(f,this.lessThan);return f},m.prototype.empty=function(){return!this.root||!this.root.elem},m.prototype.isHeap=function(){return this.root.isHeap(this.lessThan)},m.prototype.forEach=function(p){this.root.forEach(p)},m.prototype.pop=function(){if(this.empty())return null;var p=this.root.min();return this.root=this.root.removeMin(this.lessThan),p},m.prototype.reduceKey=function(p,g,f){void 0===f&&(f=null),this.root=this.root.decreaseKey(p,g,f,this.lessThan)},m.prototype.toString=function(p){return this.root.toString(p)},m.prototype.count=function(){return this.root.count()},m}();E.PriorityQueue=o},3733:function(y,E){"use strict";var r=this&&this.__extends||function(){var f=function(e,u){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var l in c)c.hasOwnProperty(l)&&(a[l]=c[l])})(e,u)};return function(e,u){function a(){this.constructor=e}f(e,u),e.prototype=null===u?Object.create(u):(a.prototype=u.prototype,new a)}}();Object.defineProperty(E,"__esModule",{value:!0});var o=function(){function f(){this.findIter=function(e){for(var u=this._root,a=this.iterator();null!==u;){var c=this._comparator(e,u.data);if(0===c)return a._cursor=u,a;a._ancestors.push(u),u=u.get_child(c>0)}return null}}return f.prototype.clear=function(){this._root=null,this.size=0},f.prototype.find=function(e){for(var u=this._root;null!==u;){var a=this._comparator(e,u.data);if(0===a)return u.data;u=u.get_child(a>0)}return null},f.prototype.lowerBound=function(e){return this._bound(e,this._comparator)},f.prototype.upperBound=function(e){var u=this._comparator;return this._bound(e,function a(c,l){return u(l,c)})},f.prototype.min=function(){var e=this._root;if(null===e)return null;for(;null!==e.left;)e=e.left;return e.data},f.prototype.max=function(){var e=this._root;if(null===e)return null;for(;null!==e.right;)e=e.right;return e.data},f.prototype.iterator=function(){return new m(this)},f.prototype.each=function(e){for(var a,u=this.iterator();null!==(a=u.next());)e(a)},f.prototype.reach=function(e){for(var a,u=this.iterator();null!==(a=u.prev());)e(a)},f.prototype._bound=function(e,u){for(var a=this._root,c=this.iterator();null!==a;){var l=this._comparator(e,a.data);if(0===l)return c._cursor=a,c;c._ancestors.push(a),a=a.get_child(l>0)}for(var h=c._ancestors.length-1;h>=0;--h)if(u(e,(a=c._ancestors[h]).data)>0)return c._cursor=a,c._ancestors.length=h,c;return c._ancestors.length=0,c},f}();E.TreeBase=o;var m=function(){function f(e){this._tree=e,this._ancestors=[],this._cursor=null}return f.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},f.prototype.next=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._minNode(e)}else if(null===this._cursor.right){var u;do{if(u=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===u)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return null!==this._cursor?this._cursor.data:null},f.prototype.prev=function(){if(null===this._cursor){var e=this._tree._root;null!==e&&this._maxNode(e)}else if(null===this._cursor.left){var u;do{if(u=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===u)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return null!==this._cursor?this._cursor.data:null},f.prototype._minNode=function(e){for(;null!==e.left;)this._ancestors.push(e),e=e.left;this._cursor=e},f.prototype._maxNode=function(e){for(;null!==e.right;)this._ancestors.push(e),e=e.right;this._cursor=e},f}();E.Iterator=m;var p=function(){function f(e){this.data=e,this.left=null,this.right=null,this.red=!0}return f.prototype.get_child=function(e){return e?this.right:this.left},f.prototype.set_child=function(e,u){e?this.right=u:this.left=u},f}(),g=function(f){function e(u){var a=f.call(this)||this;return a._root=null,a._comparator=u,a.size=0,a}return r(e,f),e.prototype.insert=function(u){var a=!1;if(null===this._root)this._root=new p(u),a=!0,this.size++;else{var c=new p(void 0),l=!1,h=!1,d=null,x=c,w=null,C=this._root;for(x.right=this._root;;){if(null===C?(C=new p(u),w.set_child(l,C),a=!0,this.size++):e.is_red(C.left)&&e.is_red(C.right)&&(C.red=!0,C.left.red=!1,C.right.red=!1),e.is_red(C)&&e.is_red(w)){var M=x.right===d;C===w.get_child(h)?x.set_child(M,e.single_rotate(d,!h)):x.set_child(M,e.double_rotate(d,!h))}var A=this._comparator(C.data,u);if(0===A)break;h=l,null!==d&&(x=d),d=w,w=C,C=C.get_child(l=A<0)}this._root=c.right}return this._root.red=!1,a},e.prototype.remove=function(u){if(null===this._root)return!1;var a=new p(void 0),c=a;c.right=this._root;for(var l=null,h=null,d=null,x=!0;null!==c.get_child(x);){var w=x;h=l,l=c,c=c.get_child(x);var C=this._comparator(u,c.data);if(x=C>0,0===C&&(d=c),!e.is_red(c)&&!e.is_red(c.get_child(x)))if(e.is_red(c.get_child(!x))){var M=e.single_rotate(c,x);l.set_child(w,M),l=M}else if(!e.is_red(c.get_child(!x))){var A=l.get_child(!w);if(null!==A)if(e.is_red(A.get_child(!w))||e.is_red(A.get_child(w))){var N=h.right===l;e.is_red(A.get_child(w))?h.set_child(N,e.double_rotate(l,w)):e.is_red(A.get_child(!w))&&h.set_child(N,e.single_rotate(l,w));var S=h.get_child(N);S.red=!0,c.red=!0,S.left.red=!1,S.right.red=!1}else l.red=!1,A.red=!0,c.red=!0}}return null!==d&&(d.data=c.data,l.set_child(l.right===c,c.get_child(null===c.left)),this.size--),this._root=a.right,null!==this._root&&(this._root.red=!1),null!==d},e.is_red=function(u){return null!==u&&u.red},e.single_rotate=function(u,a){var c=u.get_child(!a);return u.set_child(!a,c.get_child(a)),c.set_child(a,u),u.red=!0,c.red=!1,c},e.double_rotate=function(u,a){return u.set_child(!a,e.single_rotate(u.get_child(!a),!a)),e.single_rotate(u,a)},e}(o);E.RBTree=g},7840:function(y,E,r){"use strict";var o=this&&this.__extends||function(){var k=function(L,I){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,D){F.__proto__=D}||function(F,D){for(var Y in D)D.hasOwnProperty(Y)&&(F[Y]=D[Y])})(L,I)};return function(L,I){function F(){this.constructor=L}k(L,I),L.prototype=null===I?Object.create(I):(F.prototype=I.prototype,new F)}}();Object.defineProperty(E,"__esModule",{value:!0});var m=r(5213),p=r(3733);function g(k){return k.bounds=typeof k.leaves<"u"?k.leaves.reduce(function(L,I){return I.bounds.union(L)},f.empty()):f.empty(),typeof k.groups<"u"&&(k.bounds=k.groups.reduce(function(L,I){return g(I).union(L)},k.bounds)),k.bounds=k.bounds.inflate(k.padding),k.bounds}E.computeGroupBounds=g;var f=function(){function k(L,I,F,D){this.x=L,this.X=I,this.y=F,this.Y=D}return k.empty=function(){return new k(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},k.prototype.cx=function(){return(this.x+this.X)/2},k.prototype.cy=function(){return(this.y+this.Y)/2},k.prototype.overlapX=function(L){var I=this.cx(),F=L.cx();return I<=F&&L.x<this.X?this.X-L.x:F<=I&&this.x<L.X?L.X-this.x:0},k.prototype.overlapY=function(L){var I=this.cy(),F=L.cy();return I<=F&&L.y<this.Y?this.Y-L.y:F<=I&&this.y<L.Y?L.Y-this.y:0},k.prototype.setXCentre=function(L){var I=L-this.cx();this.x+=I,this.X+=I},k.prototype.setYCentre=function(L){var I=L-this.cy();this.y+=I,this.Y+=I},k.prototype.width=function(){return this.X-this.x},k.prototype.height=function(){return this.Y-this.y},k.prototype.union=function(L){return new k(Math.min(this.x,L.x),Math.max(this.X,L.X),Math.min(this.y,L.y),Math.max(this.Y,L.Y))},k.prototype.lineIntersections=function(L,I,F,D){for(var Y=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]],J=[],B=0;B<4;++B){var R=k.lineIntersection(L,I,F,D,Y[B][0],Y[B][1],Y[B][2],Y[B][3]);null!==R&&J.push({x:R.x,y:R.y})}return J},k.prototype.rayIntersection=function(L,I){var F=this.lineIntersections(this.cx(),this.cy(),L,I);return F.length>0?F[0]:null},k.prototype.vertices=function(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y}]},k.lineIntersection=function(L,I,F,D,Y,J,B,R){var K=F-L,Q=B-Y,it=D-I,tt=R-J,ot=tt*K-Q*it;if(0==ot)return null;var ut=L-Y,pt=I-J,Z=(Q*pt-tt*ut)/ot,at=(K*pt-it*ut)/ot;return Z>=0&&Z<=1&&at>=0&&at<=1?{x:L+Z*K,y:I+Z*it}:null},k.prototype.inflate=function(L){return new k(this.x-L,this.X+L,this.y-L,this.Y+L)},k}();E.Rectangle=f,E.makeEdgeBetween=function e(k,L,I){var F=k.rayIntersection(L.cx(),L.cy())||{x:k.cx(),y:k.cy()},D=L.rayIntersection(k.cx(),k.cy())||{x:L.cx(),y:L.cy()},Y=D.x-F.x,J=D.y-F.y,B=Math.sqrt(Y*Y+J*J),R=B-I;return{sourceIntersection:F,targetIntersection:D,arrowStart:{x:F.x+R*Y/B,y:F.y+R*J/B}}},E.makeEdgeTo=function u(k,L,I){var F=L.rayIntersection(k.x,k.y);F||(F={x:L.cx(),y:L.cy()});var D=F.x-k.x,Y=F.y-k.y,J=Math.sqrt(D*D+Y*Y);return{x:F.x-I*D/J,y:F.y-I*Y/J}};var a=function(){return function k(L,I,F){this.v=L,this.r=I,this.pos=F,this.prev=h(),this.next=h()}}(),c=function(){return function k(L,I,F){this.isOpen=L,this.v=I,this.pos=F}}();function l(k,L){return k.pos>L.pos?1:k.pos<L.pos||k.isOpen?-1:L.isOpen?1:0}function h(){return new p.RBTree(function(k,L){return k.pos-L.pos})}var d={getCentre:function(k){return k.cx()},getOpen:function(k){return k.y},getClose:function(k){return k.Y},getSize:function(k){return k.width()},makeRect:function(k,L,I,F){return new f(I-F/2,I+F/2,k,L)},findNeighbours:function M(k,L){var I=function(F,D){for(var J,Y=L.findIter(k);null!==(J=Y[F]());){var B=J.r.overlapX(k.r);if((B<=0||B<=J.r.overlapY(k.r))&&(k[F].insert(J),J[D].insert(k)),B<=0)break}};I("next","prev"),I("prev","next")}},x={getCentre:function(k){return k.cy()},getOpen:function(k){return k.x},getClose:function(k){return k.X},getSize:function(k){return k.height()},makeRect:function(k,L,I,F){return new f(k,L,I-F/2,I+F/2)},findNeighbours:function A(k,L){var I=function(F,D){var Y=L.findIter(k)[F]();null!==Y&&Y.r.overlapX(k.r)>0&&(k[F].insert(Y),Y[D].insert(k))};I("next","prev"),I("prev","next")}};function w(k,L,I,F){void 0===F&&(F=!1);var D=k.padding,Y=typeof k.groups<"u"?k.groups.length:0,J=typeof k.leaves<"u"?k.leaves.length:0,B=Y?k.groups.reduce(function(ct,gt){return ct.concat(w(gt,L,I,!0))},[]):[],R=(F?2:0)+J+Y,K=new Array(R),Q=new Array(R),it=0,tt=function(ct,gt){Q[it]=ct,K[it++]=gt};if(F){var ot=k.bounds,ut=L.getCentre(ot),pt=L.getSize(ot)/2,W=L.getOpen(ot),Z=L.getClose(ot),nt=ut-pt+D/2,at=ut+pt-D/2;k.minVar.desiredPosition=nt,tt(L.makeRect(W,Z,nt,D),k.minVar),k.maxVar.desiredPosition=at,tt(L.makeRect(W,Z,at,D),k.maxVar)}J&&k.leaves.forEach(function(ct){return tt(ct.bounds,ct.variable)}),Y&&k.groups.forEach(function(ct){var gt=ct.bounds;tt(L.makeRect(L.getOpen(gt),L.getClose(gt),L.getCentre(gt),L.getSize(gt)),ct.minVar)});var lt=C(Q,K,L,I);return Y&&(K.forEach(function(ct){ct.cOut=[],ct.cIn=[]}),lt.forEach(function(ct){ct.left.cOut.push(ct),ct.right.cIn.push(ct)}),k.groups.forEach(function(ct){var gt=(ct.padding-L.getSize(ct.bounds))/2;ct.minVar.cIn.forEach(function(yt){return yt.gap+=gt}),ct.minVar.cOut.forEach(function(yt){yt.left=ct.maxVar,yt.gap+=gt})})),B.concat(lt)}function C(k,L,I,F){var D,Y=k.length,J=2*Y;console.assert(L.length>=Y);var B=new Array(J);for(D=0;D<Y;++D){var R=k[D],K=new a(L[D],R,I.getCentre(R));B[D]=new c(!0,K,I.getOpen(R)),B[D+Y]=new c(!1,K,I.getClose(R))}B.sort(l);var Q=new Array,it=h();for(D=0;D<J;++D){var tt=B[D];if(K=tt.v,tt.isOpen)it.insert(K),I.findNeighbours(K,it);else{it.remove(K);var ot=function(W,Z){var nt=(I.getSize(W.r)+I.getSize(Z.r))/2+F;Q.push(new m.Constraint(W.v,Z.v,nt))},ut=function(W,Z,nt){for(var at,lt=K[W].iterator();null!==(at=lt[W]());)nt(at,K),at[Z].remove(K)};ut("prev","next",function(W,Z){return ot(W,Z)}),ut("next","prev",function(W,Z){return ot(Z,W)})}}return console.assert(0===it.size),Q}function N(k,L){return C(k,L,d,1e-6)}function S(k,L){return C(k,L,x,1e-6)}function P(k){return w(k,d,1e-6)}function $(k){return w(k,x,1e-6)}E.generateXConstraints=N,E.generateYConstraints=S,E.generateXGroupConstraints=P,E.generateYGroupConstraints=$,E.removeOverlaps=function V(k){var L=k.map(function(D){return new m.Variable(D.cx())}),I=N(k,L),F=new m.Solver(L,I);F.solve(),L.forEach(function(D,Y){return k[Y].setXCentre(D.position())}),L=k.map(function(D){return new m.Variable(D.cy())}),I=S(k,L),(F=new m.Solver(L,I)).solve(),L.forEach(function(D,Y){return k[Y].setYCentre(D.position())})};var j=function(k){function L(I,F){var D=k.call(this,0,F)||this;return D.index=I,D}return o(L,k),L}(m.Variable);E.IndexedVariable=j;var X=function(){function k(L,I,F,D,Y){var J=this;if(void 0===F&&(F=null),void 0===D&&(D=null),void 0===Y&&(Y=!1),this.nodes=L,this.groups=I,this.rootGroup=F,this.avoidOverlaps=Y,this.variables=L.map(function(R,K){return R.variable=new j(K,1)}),D&&this.createConstraints(D),Y&&F&&typeof F.groups<"u"){L.forEach(function(R){if(R.width&&R.height){var K=R.width/2,Q=R.height/2;R.bounds=new f(R.x-K,R.x+K,R.y-Q,R.y+Q)}else R.bounds=new f(R.x,R.x,R.y,R.y)}),g(F);var B=L.length;I.forEach(function(R){J.variables[B]=R.minVar=new j(B++,typeof R.stiffness<"u"?R.stiffness:.01),J.variables[B]=R.maxVar=new j(B++,typeof R.stiffness<"u"?R.stiffness:.01)})}}return k.prototype.createSeparation=function(L){return new m.Constraint(this.nodes[L.left].variable,this.nodes[L.right].variable,L.gap,typeof L.equality<"u"&&L.equality)},k.prototype.makeFeasible=function(L){var I=this;if(this.avoidOverlaps){var F="x",D="width";"x"===L.axis&&(F="y",D="height");var Y=L.offsets.map(function(B){return I.nodes[B.node]}).sort(function(B,R){return B[F]-R[F]}),J=null;Y.forEach(function(B){if(J){var R=J[F]+J[D];R>B[F]&&(B[F]=R)}J=B})}},k.prototype.createAlignment=function(L){var I=this,F=this.nodes[L.offsets[0].node].variable;this.makeFeasible(L);var D="x"===L.axis?this.xConstraints:this.yConstraints;L.offsets.slice(1).forEach(function(Y){D.push(new m.Constraint(F,I.nodes[Y.node].variable,Y.offset,!0))})},k.prototype.createConstraints=function(L){var I=this,F=function(D){return typeof D.type>"u"||"separation"===D.type};this.xConstraints=L.filter(function(D){return"x"===D.axis&&F(D)}).map(function(D){return I.createSeparation(D)}),this.yConstraints=L.filter(function(D){return"y"===D.axis&&F(D)}).map(function(D){return I.createSeparation(D)}),L.filter(function(D){return"alignment"===D.type}).forEach(function(D){return I.createAlignment(D)})},k.prototype.setupVariablesAndBounds=function(L,I,F,D){this.nodes.forEach(function(Y,J){Y.fixed?(Y.variable.weight=Y.fixedWeight?Y.fixedWeight:1e3,F[J]=D(Y)):Y.variable.weight=1;var B=(Y.width||0)/2,R=(Y.height||0)/2,K=L[J],Q=I[J];Y.bounds=new f(K-B,K+B,Q-R,Q+R)})},k.prototype.xProject=function(L,I,F){!this.rootGroup&&!this.avoidOverlaps&&!this.xConstraints||this.project(L,I,L,F,function(D){return D.px},this.xConstraints,P,function(D){return D.bounds.setXCentre(F[D.variable.index]=D.variable.position())},function(D){var Y=F[D.minVar.index]=D.minVar.position(),J=F[D.maxVar.index]=D.maxVar.position(),B=D.padding/2;D.bounds.x=Y-B,D.bounds.X=J+B})},k.prototype.yProject=function(L,I,F){!this.rootGroup&&!this.yConstraints||this.project(L,I,I,F,function(D){return D.py},this.yConstraints,$,function(D){return D.bounds.setYCentre(F[D.variable.index]=D.variable.position())},function(D){var Y=F[D.minVar.index]=D.minVar.position(),J=F[D.maxVar.index]=D.maxVar.position(),B=D.padding/2;D.bounds.y=Y-B,D.bounds.Y=J+B})},k.prototype.projectFunctions=function(){var L=this;return[function(I,F,D){return L.xProject(I,F,D)},function(I,F,D){return L.yProject(I,F,D)}]},k.prototype.project=function(L,I,F,D,Y,J,B,R,K){this.setupVariablesAndBounds(L,I,D,Y),this.rootGroup&&this.avoidOverlaps&&(g(this.rootGroup),J=J.concat(B(this.rootGroup))),this.solve(this.variables,J,F,D),this.nodes.forEach(R),this.rootGroup&&this.avoidOverlaps&&(this.groups.forEach(K),g(this.rootGroup))},k.prototype.solve=function(L,I,F,D){var Y=new m.Solver(L,I);Y.setStartingPositions(F),Y.setDesiredPositions(D),Y.solve()},k}();E.Projection=X},8551:(y,E,r)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var o=r(1066),m=function(){return function e(u,a){this.id=u,this.distance=a}}(),p=function(){return function e(u){this.id=u,this.neighbours=[]}}(),g=function(){return function e(u,a,c){this.node=u,this.prev=a,this.d=c}}(),f=function(){function e(u,a,c,l,h){this.n=u,this.es=a,this.neighbours=new Array(this.n);for(var d=this.n;d--;)this.neighbours[d]=new p(d);for(d=this.es.length;d--;){var x=this.es[d],w=c(x),C=l(x),M=h(x);this.neighbours[w].neighbours.push(new m(C,M)),this.neighbours[C].neighbours.push(new m(w,M))}}return e.prototype.DistanceMatrix=function(){for(var u=new Array(this.n),a=0;a<this.n;++a)u[a]=this.dijkstraNeighbours(a);return u},e.prototype.DistancesFromNode=function(u){return this.dijkstraNeighbours(u)},e.prototype.PathFromNodeToNode=function(u,a){return this.dijkstraNeighbours(u,a)},e.prototype.PathFromNodeToNodeWithPrevCost=function(u,a,c){var l=new o.PriorityQueue(function($,V){return $.d<=V.d}),h=this.neighbours[u],d=new g(h,null,0),x={};for(l.push(d);!l.empty()&&(h=(d=l.pop()).node).id!==a;)for(var w=h.neighbours.length;w--;){var C=h.neighbours[w],M=this.neighbours[C.id];if(!d.prev||M.id!==d.prev.node.id){var A=M.id+","+h.id;if(!(A in x&&x[A]<=d.d)){var N=d.prev?c(d.prev.node.id,h.id,M.id):0,S=d.d+C.distance+N;x[A]=S,l.push(new g(M,d,S))}}}for(var P=[];d.prev;)P.push((d=d.prev).node.id);return P},e.prototype.dijkstraNeighbours=function(u,a){void 0===a&&(a=-1);for(var c=new o.PriorityQueue(function(N,S){return N.d<=S.d}),l=this.neighbours.length,h=new Array(l);l--;){var d=this.neighbours[l];d.d=l===u?0:Number.POSITIVE_INFINITY,d.q=c.push(d)}for(;!c.empty();){var x=c.pop();if(h[x.id]=x.d,x.id===a){for(var w=[],C=x;typeof C.prev<"u";)w.push(C.prev.id),C=C.prev;return w}for(l=x.neighbours.length;l--;){var M=x.neighbours[l],A=(C=this.neighbours[M.id],x.d+M.distance);x.d!==Number.MAX_VALUE&&C.d>A&&(C.d=A,C.prev=x,c.reduceKey(C.q,C,function(S,P){return S.q=P}))}}return h},e}();E.Calculator=f},5213:(y,E)=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});var r=function(){function u(a){this.scale=a,this.AB=0,this.AD=0,this.A2=0}return u.prototype.addVariable=function(a){var c=this.scale/a.scale,h=a.weight;this.AB+=h*c*(a.offset/a.scale),this.AD+=h*c*a.desiredPosition,this.A2+=h*c*c},u.prototype.getPosn=function(){return(this.AD-this.AB)/this.A2},u}();E.PositionStats=r;var o=function(){function u(a,c,l,h){void 0===h&&(h=!1),this.left=a,this.right=c,this.gap=l,this.equality=h,this.active=!1,this.unsatisfiable=!1,this.left=a,this.right=c,this.gap=l,this.equality=h}return u.prototype.slack=function(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap-this.left.scale*this.left.position()},u}();E.Constraint=o;var m=function(){function u(a,c,l){void 0===c&&(c=1),void 0===l&&(l=1),this.desiredPosition=a,this.weight=c,this.scale=l,this.offset=0}return u.prototype.dfdv=function(){return 2*this.weight*(this.position()-this.desiredPosition)},u.prototype.position=function(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale},u.prototype.visitNeighbours=function(a,c){var l=function(h,d){return h.active&&a!==d&&c(h,d)};this.cOut.forEach(function(h){return l(h,h.right)}),this.cIn.forEach(function(h){return l(h,h.left)})},u}();E.Variable=m;var p=function(){function u(a){this.vars=[],a.offset=0,this.ps=new r(a.scale),this.addVariable(a)}return u.prototype.addVariable=function(a){a.block=this,this.vars.push(a),this.ps.addVariable(a),this.posn=this.ps.getPosn()},u.prototype.updateWeightedPosition=function(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var a=0,c=this.vars.length;a<c;++a)this.ps.addVariable(this.vars[a]);this.posn=this.ps.getPosn()},u.prototype.compute_lm=function(a,c,l){var h=this,d=a.dfdv();return a.visitNeighbours(c,function(x,w){var C=h.compute_lm(w,a,l);w===x.right?(d+=C*x.left.scale,x.lm=C):(d+=C*x.right.scale,x.lm=-C),l(x)}),d/a.scale},u.prototype.populateSplitBlock=function(a,c){var l=this;a.visitNeighbours(c,function(h,d){d.offset=a.offset+(d===h.right?h.gap:-h.gap),l.addVariable(d),l.populateSplitBlock(d,a)})},u.prototype.traverse=function(a,c,l,h){var d=this;void 0===l&&(l=this.vars[0]),void 0===h&&(h=null),l.visitNeighbours(h,function(x,w){c.push(a(x)),d.traverse(a,c,w,l)})},u.prototype.findMinLM=function(){var a=null;return this.compute_lm(this.vars[0],null,function(c){!c.equality&&(null===a||c.lm<a.lm)&&(a=c)}),a},u.prototype.findMinLMBetween=function(a,c){this.compute_lm(a,null,function(){});var l=null;return this.findPath(a,null,c,function(h,d){!h.equality&&h.right===d&&(null===l||h.lm<l.lm)&&(l=h)}),l},u.prototype.findPath=function(a,c,l,h){var d=this,x=!1;return a.visitNeighbours(c,function(w,C){!x&&(C===l||d.findPath(C,a,l,h))&&(x=!0,h(w,C))}),x},u.prototype.isActiveDirectedPathBetween=function(a,c){if(a===c)return!0;for(var l=a.cOut.length;l--;){var h=a.cOut[l];if(h.active&&this.isActiveDirectedPathBetween(h.right,c))return!0}return!1},u.split=function(a){return a.active=!1,[u.createSplitBlock(a.left),u.createSplitBlock(a.right)]},u.createSplitBlock=function(a){var c=new u(a);return c.populateSplitBlock(a,null),c},u.prototype.splitBetween=function(a,c){var l=this.findMinLMBetween(a,c);if(null!==l){var h=u.split(l);return{constraint:l,lb:h[0],rb:h[1]}}return null},u.prototype.mergeAcross=function(a,c,l){c.active=!0;for(var h=0,d=a.vars.length;h<d;++h){var x=a.vars[h];x.offset+=l,this.addVariable(x)}this.posn=this.ps.getPosn()},u.prototype.cost=function(){for(var a=0,c=this.vars.length;c--;){var l=this.vars[c],h=l.position()-l.desiredPosition;a+=h*h*l.weight}return a},u}();E.Block=p;var g=function(){function u(a){this.vs=a;var c=a.length;for(this.list=new Array(c);c--;){var l=new p(a[c]);this.list[c]=l,l.blockInd=c}}return u.prototype.cost=function(){for(var a=0,c=this.list.length;c--;)a+=this.list[c].cost();return a},u.prototype.insert=function(a){a.blockInd=this.list.length,this.list.push(a)},u.prototype.remove=function(a){var c=this.list.length-1,l=this.list[c];this.list.length=c,a!==l&&(this.list[a.blockInd]=l,l.blockInd=a.blockInd)},u.prototype.merge=function(a){var c=a.left.block,l=a.right.block,h=a.right.offset-a.left.offset-a.gap;c.vars.length<l.vars.length?(l.mergeAcross(c,a,h),this.remove(c)):(c.mergeAcross(l,a,-h),this.remove(l))},u.prototype.forEach=function(a){this.list.forEach(a)},u.prototype.updateBlockPositions=function(){this.list.forEach(function(a){return a.updateWeightedPosition()})},u.prototype.split=function(a){var c=this;this.updateBlockPositions(),this.list.forEach(function(l){var h=l.findMinLM();null!==h&&h.lm<f.LAGRANGIAN_TOLERANCE&&(l=h.left.block,p.split(h).forEach(function(d){return c.insert(d)}),c.remove(l),a.push(h))})},u}();E.Blocks=g;var f=function(){function u(a,c){this.vs=a,this.cs=c,this.vs=a,a.forEach(function(l){l.cIn=[],l.cOut=[]}),this.cs=c,c.forEach(function(l){l.left.cOut.push(l),l.right.cIn.push(l)}),this.inactive=c.map(function(l){return l.active=!1,l}),this.bs=null}return u.prototype.cost=function(){return this.bs.cost()},u.prototype.setStartingPositions=function(a){this.inactive=this.cs.map(function(c){return c.active=!1,c}),this.bs=new g(this.vs),this.bs.forEach(function(c,l){return c.posn=a[l]})},u.prototype.setDesiredPositions=function(a){this.vs.forEach(function(c,l){return c.desiredPosition=a[l]})},u.prototype.mostViolated=function(){for(var a=Number.MAX_VALUE,c=null,l=this.inactive,h=l.length,d=h,x=0;x<h;++x){var w=l[x];if(!w.unsatisfiable){var C=w.slack();if((w.equality||C<a)&&(a=C,c=w,d=x,w.equality))break}}return d!==h&&(a<u.ZERO_UPPERBOUND&&!c.active||c.equality)&&(l[d]=l[h-1],l.length=h-1),c},u.prototype.satisfy=function(){null==this.bs&&(this.bs=new g(this.vs)),this.bs.split(this.inactive);for(var a=null;(a=this.mostViolated())&&(a.equality||a.slack()<u.ZERO_UPPERBOUND&&!a.active);){var c=a.left.block;if(c!==a.right.block)this.bs.merge(a);else{if(c.isActiveDirectedPathBetween(a.right,a.left)){a.unsatisfiable=!0;continue}var h=c.splitBetween(a.left,a.right);if(null===h){a.unsatisfiable=!0;continue}this.bs.insert(h.lb),this.bs.insert(h.rb),this.bs.remove(c),this.inactive.push(h.constraint),a.slack()>=0?this.inactive.push(a):this.bs.merge(a)}}},u.prototype.solve=function(){this.satisfy();for(var a=Number.MAX_VALUE,c=this.bs.cost();Math.abs(a-c)>1e-4;)this.satisfy(),a=c,c=this.bs.cost();return c},u.LAGRANGIAN_TOLERANCE=-1e-4,u.ZERO_UPPERBOUND=-1e-10,u}();E.Solver=f,E.removeOverlapInOneDimension=function e(u,a,c){for(var l=u.map(function(j){return new m(j.desiredCenter)}),h=[],d=u.length,x=0;x<d-1;x++)h.push(new o(l[x],l[x+1],(u[x].size+u[x+1].size)/2));var M=l[0],A=l[d-1],N=u[0].size/2,S=u[d-1].size/2,P=null,$=null;return a&&(P=new m(a,1e3*M.weight),l.push(P),h.push(new o(P,M,N))),c&&($=new m(c,1e3*A.weight),l.push($),h.push(new o(A,$,S))),new f(l,h).solve(),{newCenters:l.slice(0,u.length).map(function(j){return j.position()}),lowerBound:P?P.position():M.position()-N,upperBound:$?$.position():A.position()+S}}}}]);